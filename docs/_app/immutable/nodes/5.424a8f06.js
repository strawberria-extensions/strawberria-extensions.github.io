import{s as Ue,f as p,g as h,h as J,d as c,j as v,i as S,o as Ye,p as Ie,a as E,l as A,T as Y,c as k,m as H,k as X,E as Ne,x as a,H as oe,F as ae,n as Fe,D as Je,K as De,a6 as We,y as Pe}from"../chunks/scheduler.5434591f.js";import{S as Be,i as Ge,t as we,c as Xe,a as ye,g as Ze,b as Ae,d as He,m as Qe,e as Ke}from"../chunks/index.2cc0f76f.js";import{e as ue}from"../chunks/each.96bb71ee.js";import{D as $e,b as Ce}from"../chunks/js-big-decimal.9d9c4709.js";import{c as et}from"../chunks/logo.0860a6a8.js";const tt=!0,pt=Object.freeze(Object.defineProperty({__proto__:null,prerender:tt},Symbol.toStringTag,{value:"Module"}));function ze(t,e,i){const r=t.slice();return r[20]=e[i],r[21]=e,r[22]=i,r}function Me(t,e,i){const r=t.slice();return r[20]=e[i],r[23]=e,r[24]=i,r}function nt(t){let e,i=`With every action, you and the bot roll a dice. \r
            If you do more than the bot, time is removed. \r
            If the bot does more, time is added.\r
            The dice outcome percentages are configurable and hidden to the wearer.`,r,I,u,f,d="Time multiplier",o,s,g="The difference between the two dice will be multiplied by this time.",O,T,y,L,N,W="Weighted Dice Outcomes",R,D,C="Configure the outcomes of your weighted dice",w,j,q,l,m,Z="Wearer Loses",x,te,P,Q,Ve="Wearer Wins",de,fe,ne,ie,F,se,Se="Difference =",pe,K,Ee="0",he,U,_e,ve,G,re,le,me,ke;y=new $e({props:{seconds:t[4],settings:{week:!0,day:!0,hour:!0,minute:!0,second:!0},buttons:!0}});let ge=ue([0,1,2,3,4]),z=[];for(let n=0;n<5;n+=1)z[n]=Le(Me(t,ge,n));let be=ue([6,7,8,9,10]),M=[];for(let n=0;n<5;n+=1)M[n]=Re(ze(t,be,n));return{c(){e=p("div"),e.textContent=i,r=E(),I=p("hr"),u=E(),f=p("div"),f.textContent=d,o=E(),s=p("div"),s.textContent=g,O=E(),T=p("div"),Ae(y.$$.fragment),L=E(),N=p("div"),N.textContent=W,R=E(),D=p("div"),D.textContent=C,w=E(),j=p("div"),q=p("div"),l=p("div"),m=p("p"),m.textContent=Z,x=E();for(let n=0;n<5;n+=1)z[n].c();te=E(),P=p("div"),Q=p("p"),Q.textContent=Ve,de=E();for(let n=0;n<5;n+=1)M[n].c();fe=E(),ne=p("div"),ie=p("div"),F=p("div"),se=p("div"),se.textContent=Se,pe=E(),K=p("div"),K.textContent=Ee,he=E(),U=p("input"),_e=A(`\r
                        %`),ve=E(),G=p("p"),re=A(t[3]),this.h()},l(n){e=h(n,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-m7evyo"&&(e.textContent=i),r=k(n),I=h(n,"HR",{}),u=k(n),f=h(n,"DIV",{class:!0,"data-svelte-h":!0}),Y(f)!=="svelte-glcev8"&&(f.textContent=d),o=k(n),s=h(n,"DIV",{class:!0,"data-svelte-h":!0}),Y(s)!=="svelte-pc0ugj"&&(s.textContent=g),O=k(n),T=h(n,"DIV",{class:!0});var b=J(T);He(y.$$.fragment,b),b.forEach(c),L=k(n),N=h(n,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),Y(N)!=="svelte-m8e1ps"&&(N.textContent=W),R=k(n),D=h(n,"DIV",{class:!0,"data-svelte-h":!0}),Y(D)!=="svelte-1lwj5p5"&&(D.textContent=C),w=k(n),j=h(n,"DIV",{class:!0});var V=J(j);q=h(V,"DIV",{style:!0});var _=J(q);l=h(_,"DIV",{style:!0,class:!0});var B=J(l);m=h(B,"P",{class:!0,"data-svelte-h":!0}),Y(m)!=="svelte-1bfqlgl"&&(m.textContent=Z),x=k(B);for(let ee=0;ee<5;ee+=1)z[ee].l(B);B.forEach(c),te=k(_),P=h(_,"DIV",{style:!0,class:!0});var ce=J(P);Q=h(ce,"P",{class:!0,"data-svelte-h":!0}),Y(Q)!=="svelte-p4a4ss"&&(Q.textContent=Ve),de=k(ce);for(let ee=0;ee<5;ee+=1)M[ee].l(ce);ce.forEach(c),_.forEach(c),fe=k(V),ne=h(V,"DIV",{class:!0});var Oe=J(ne);ie=h(Oe,"DIV",{style:!0});var Te=J(ie);F=h(Te,"DIV",{class:!0});var $=J(F);se=h($,"DIV",{"data-svelte-h":!0}),Y(se)!=="svelte-z0li4i"&&(se.textContent=Se),pe=k($),K=h($,"DIV",{class:!0,"data-svelte-h":!0}),Y(K)!=="svelte-kcnpjr"&&(K.textContent=Ee),he=k($),U=h($,"INPUT",{class:!0,placeholder:!0}),_e=H($,`\r
                        %`),$.forEach(c),Te.forEach(c),Oe.forEach(c),ve=k(V),G=h(V,"P",{class:!0,style:!0});var je=J(G);re=H(je,t[3]),je.forEach(c),V.forEach(c),this.h()},h(){v(e,"class","caption"),v(f,"class","page-top"),v(s,"class","caption mb-2"),v(T,"class","d-flex justify-content-center"),v(N,"class","page-top"),X(N,"margin-top","1em"),v(D,"class","caption mb-2"),v(m,"class","dice-col-header"),X(l,"padding-right","1em"),X(l,"border-right","thin solid #a4a7b7"),v(l,"class","dice-config-col"),v(Q,"class","dice-col-header"),X(P,"padding-left","1em"),v(P,"class","dice-config-col"),X(q,"display","flex"),X(q,"flex-direction","row"),X(q,"width","100%"),v(K,"class","dice-config-diffnum"),v(U,"class","dice-config-input form-control"),v(U,"placeholder","0"),v(F,"class","dice-config-row"),X(ie,"width","50%"),v(ne,"class","dice-config-draw"),v(G,"class","invalid"),X(G,"font-size","100%"),Ne(G,"hidden",t[3]===""),v(j,"class","dice-config actions mb-4")},m(n,b){S(n,e,b),S(n,r,b),S(n,I,b),S(n,u,b),S(n,f,b),S(n,o,b),S(n,s,b),S(n,O,b),S(n,T,b),Qe(y,T,null),S(n,L,b),S(n,N,b),S(n,R,b),S(n,D,b),S(n,w,b),S(n,j,b),a(j,q),a(q,l),a(l,m),a(l,x);for(let V=0;V<5;V+=1)z[V]&&z[V].m(l,null);a(q,te),a(q,P),a(P,Q),a(P,de);for(let V=0;V<5;V+=1)M[V]&&M[V].m(P,null);a(j,fe),a(j,ne),a(ne,ie),a(ie,F),a(F,se),a(F,pe),a(F,K),a(F,he),a(F,U),oe(U,t[1][5]),t[14](U),a(F,_e),a(j,ve),a(j,G),a(G,re),le=!0,me||(ke=[ae(U,"input",t[13]),ae(U,"input",t[15])],me=!0)},p(n,b){const V={};if(b&16&&(V.seconds=n[4]),y.$set(V),b&102){ge=ue([0,1,2,3,4]);let _;for(_=0;_<5;_+=1){const B=Me(n,ge,_);z[_]?z[_].p(B,b):(z[_]=Le(B),z[_].c(),z[_].m(l,null))}for(;_<5;_+=1)z[_].d(1)}if(b&102){be=ue([6,7,8,9,10]);let _;for(_=0;_<5;_+=1){const B=ze(n,be,_);M[_]?M[_].p(B,b):(M[_]=Re(B),M[_].c(),M[_].m(P,null))}for(;_<5;_+=1)M[_].d(1)}b&2&&U.value!==n[1][5]&&oe(U,n[1][5]),(!le||b&8)&&Fe(re,n[3]),(!le||b&8)&&Ne(G,"hidden",n[3]==="")},i(n){le||(ye(y.$$.fragment,n),le=!0)},o(n){we(y.$$.fragment,n),le=!1},d(n){n&&(c(e),c(r),c(I),c(u),c(f),c(o),c(s),c(O),c(T),c(L),c(N),c(R),c(D),c(w),c(j)),Ke(y),Je(z,n),Je(M,n),t[14](null),me=!1,De(ke)}}}function it(t){let e,i,r,I,u,f;return{c(){e=p("div"),i=p("img"),I=E(),u=p("div"),f=A(t[0]),this.h()},l(d){e=h(d,"DIV",{class:!0});var o=J(e);i=h(o,"IMG",{src:!0,alt:!0}),I=k(o),u=h(o,"DIV",{class:!0});var s=J(u);f=H(s,t[0]),s.forEach(c),o.forEach(c),this.h()},h(){We(i.src,r=et)||v(i,"src",r),v(i,"alt","Chaster logo"),v(u,"class","mt-4 caption text-lg"),v(e,"class","w-full h-full flex flex-col items-center justify-center")},m(d,o){S(d,e,o),a(e,i),a(e,I),a(e,u),a(u,f)},p(d,o){o&1&&Fe(f,d[0])},i:Pe,o:Pe,d(d){d&&c(e)}}}function Le(t){let e,i,r="Difference =",I,u,f=t[5][t[20]]+"",d,o,s,g=t[20],O,T,y;function L(){t[7].call(s,t[20])}const N=()=>t[8](s,g),W=()=>t[8](null,g);function R(){return t[9](t[20])}return{c(){e=p("div"),i=p("div"),i.textContent=r,I=E(),u=p("div"),d=A(f),o=E(),s=p("input"),O=A(`\r
                            %\r
                        `),this.h()},l(D){e=h(D,"DIV",{class:!0});var C=J(e);i=h(C,"DIV",{"data-svelte-h":!0}),Y(i)!=="svelte-z0li4i"&&(i.textContent=r),I=k(C),u=h(C,"DIV",{class:!0});var w=J(u);d=H(w,f),w.forEach(c),o=k(C),s=h(C,"INPUT",{class:!0,placeholder:!0}),O=H(C,`\r
                            %\r
                        `),C.forEach(c),this.h()},h(){v(u,"class","dice-config-diffnum"),v(s,"class","dice-config-input form-control"),v(s,"placeholder","0"),v(e,"class","dice-config-row")},m(D,C){S(D,e,C),a(e,i),a(e,I),a(e,u),a(u,d),a(e,o),a(e,s),oe(s,t[1][t[20]]),N(),a(e,O),T||(y=[ae(s,"input",L),ae(s,"input",R)],T=!0)},p(D,C){t=D,C&2&&s.value!==t[1][t[20]]&&oe(s,t[1][t[20]]),g!==t[20]&&(W(),g=t[20],N())},d(D){D&&c(e),W(),T=!1,De(y)}}}function Re(t){let e,i,r="Difference =",I,u,f,d=t[5][t[20]]+"",o,s,g,O=t[20],T,y,L;function N(){t[10].call(g,t[20])}const W=()=>t[11](g,O),R=()=>t[11](null,O);function D(){return t[12](t[20])}return{c(){e=p("div"),i=p("div"),i.textContent=r,I=E(),u=p("div"),f=A("+"),o=A(d),s=E(),g=p("input"),T=A(`\r
                            %\r
                        `),this.h()},l(C){e=h(C,"DIV",{class:!0});var w=J(e);i=h(w,"DIV",{"data-svelte-h":!0}),Y(i)!=="svelte-z0li4i"&&(i.textContent=r),I=k(w),u=h(w,"DIV",{class:!0});var j=J(u);f=H(j,"+"),o=H(j,d),j.forEach(c),s=k(w),g=h(w,"INPUT",{class:!0,placeholder:!0}),T=H(w,`\r
                            %\r
                        `),w.forEach(c),this.h()},h(){v(u,"class","dice-config-diffnum"),v(g,"class","dice-config-input form-control"),v(g,"placeholder","0"),v(e,"class","dice-config-row")},m(C,w){S(C,e,w),a(e,i),a(e,I),a(e,u),a(u,f),a(u,o),a(e,s),a(e,g),oe(g,t[1][t[20]]),W(),a(e,T),y||(L=[ae(g,"input",N),ae(g,"input",D)],y=!0)},p(C,w){t=C,w&2&&g.value!==t[1][t[20]]&&oe(g,t[1][t[20]]),O!==t[20]&&(R(),O=t[20],W())},d(C){C&&c(e),R(),y=!1,De(L)}}}function st(t){let e,i,r,I;const u=[it,nt],f=[];function d(o,s){return o[0]!==""?0:1}return i=d(t),r=f[i]=u[i](t),{c(){e=p("div"),r.c(),this.h()},l(o){e=h(o,"DIV",{class:!0});var s=J(e);r.l(s),s.forEach(c),this.h()},h(){v(e,"class","container-bg w-full h-screen pl-3 pr-3 svelte-43el3z")},m(o,s){S(o,e,s),f[i].m(e,null),I=!0},p(o,[s]){let g=i;i=d(o),i===g?f[i].p(o,s):(Ze(),we(f[g],1,1,()=>{f[g]=null}),Xe(),r=f[i],r?r.p(o,s):(r=f[i]=u[i](o),r.c()),ye(r,1),r.m(e,null))},i(o){I||(ye(r),I=!0)},o(o){we(r),I=!1},d(o){o&&c(e),f[i].d()}}}const qe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwbmpsYmpwY2ZlYnFwYXFrcGh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODg1NDM0NTgsImV4cCI6MjAwNDExOTQ1OH0.CsGySz2c8bIWphE6--T51CsmSeBQajfwvBYfTkjviM4",lt="https://bpnjlbjpcfebqpaqkphy.supabase.co/functions/v1/weighted-config-get",ot="https://bpnjlbjpcfebqpaqkphy.supabase.co/functions/v1/weighted-config-put";function xe(t){if(t=="")return!0;if(t.match(/^[0-9\.]+$/)===null)return!1;const e=parseFloat(t);return!(isNaN(e)||e<0||e>100)}function at(t,e,i){const r=[-1,-2,-3,-4,-5,0,1,2,3,4,5];let I="",u,f="Loading extension data...",d=["","","","","","","","","","",""],o=["","","","","","","","","","",""],s=[],g="",O=3600;Ye(async function(){const l=window.location.hash.substring(1);l!==""&&(I=JSON.parse(decodeURIComponent(l)).partnerConfigurationToken),window.parent&&window.parent.postMessage(JSON.stringify({type:"partner_configuration",event:"capabilities",payload:{features:{save:!0}}}),"*"),window.addEventListener("message",async x=>{if(typeof x.data!="string")return;const te=JSON.parse(x.data);te.type==="chaster"&&te.event==="partner_configuration_save"&&(window.parent.postMessage(JSON.stringify({type:"partner_configuration",event:"save_loading"}),"*"),await fetch(ot,{method:"POST",headers:{Authorization:`Bearer ${qe}`},body:JSON.stringify({configurationToken:I,config:{chances:d.map(P=>parseFloat(P)),multiplier:O}})}),window.parent.postMessage(JSON.stringify({type:"partner_configuration",event:"save_success"}),"*"))});const m=await fetch(lt,{method:"POST",headers:{Authorization:`Bearer ${qe}`},body:JSON.stringify({configurationToken:I})});if(m.status!==200){console.error(`Error retrieving extension configuration: ${await m.text()}`);return}const Z=await m.json();delete Z.multiplierText,u=Z,i(1,d=u.chances.map(x=>`${x}`)),o=u.chances.map(x=>`${x}`),i(4,O=u.multiplier),i(0,f="")});function T(){let l=new Ce(0);for(const m of d)xe(m)===!0&&(l=l.add(new Ce(m)));Ce.compareTo(l.getValue(),"100")!==0?i(3,g=`Invalid total percentage, got ${l.getValue()}% but expected 100%`):i(3,g="")}function y(l){const m=s[l],Z=m.value;xe(Z)===!0?(o[l]=Z,m.oldSelectionStart=m.selectionStart,m.oldSelectionEnd=m.selectionEnd):(m.value=o[l],i(1,d[l]=m.value,d),i(1,d),m.setSelectionRange(m.oldSelectionStart,m.oldSelectionEnd)),T()}function L(l){d[l]=this.value,i(1,d)}function N(l,m){Ie[l?"unshift":"push"](()=>{s[m]=l,i(2,s)})}const W=l=>{y(l)};function R(l){d[l]=this.value,i(1,d)}function D(l,m){Ie[l?"unshift":"push"](()=>{s[m]=l,i(2,s)})}const C=l=>{y(l)};function w(){d[5]=this.value,i(1,d)}function j(l){Ie[l?"unshift":"push"](()=>{s[5]=l,i(2,s)})}return[f,d,s,g,O,r,y,L,N,W,R,D,C,w,j,()=>{y(5)}]}class ht extends Be{constructor(e){super(),Ge(this,e,at,st,Ue,{})}}export{ht as component,pt as universal};
