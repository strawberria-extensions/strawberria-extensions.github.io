import{s as ue,f as A,l as te,a as W,g,h as E,m as ie,d,c as z,j as b,i as T,x as f,n as be,y as $,e as Z,A as ke,B as Ee,C as _e,z as we,o as ut,D as ge,p as Te,E as dt,F as K,G as De,H as We,I as ct,J as ft,K as mt,L as ze,M as Be}from"../chunks/scheduler.6e8049bc.js";import{S as ot,i as ht,t as Q,c as de,a as q,g as ce,b as At,d as gt,m as _t,e as vt}from"../chunks/index.0fccc1b3.js";import{e as ne}from"../chunks/each.605e2745.js";import{w as Ce}from"../chunks/index.7f8c83a0.js";import{c as bt}from"../chunks/logo.09e82b80.js";import{g as pt,s as wt,t as Ct}from"../chunks/utility.05bba961.js";import{b as ye}from"../chunks/js-big-decimal.e03afb0d.js";const yt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,It=!0,mi=Object.freeze(Object.defineProperty({__proto__:null,prerender:It},Symbol.toStringTag,{value:"Module"}));var xt=Math.PI;function Pe(e){return(1-Math.cos(xt*e))/2}const Rt="data:audio/mpeg;base64,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",Lt=""+new URL("../assets/wheel-bg-overlay.1f6ec841.svg",import.meta.url).href;var St=Object.defineProperty,Oe=Object.getOwnPropertySymbols,kt=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable,Ie=Math.pow,Fe=(e,t,i)=>t in e?St(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,xe=(e,t)=>{for(var i in t||(t={}))kt.call(t,i)&&Fe(e,i,t[i]);if(Oe)for(var i of Oe(t))Et.call(t,i)&&Fe(e,i,t[i]);return e};function Mt(e=0,t=0,i=14){return parseFloat((Math.random()*(t-e)+e).toFixed(i))}function H(e=0){return e*Math.PI/180}function Vt(e,t,i){return t<i?t<=e&&e<i:t<=e||e<i}function Tt(e,t,i,s){s.save(),s.font=`1px ${t}`;let n=s.measureText(e).width;return s.restore(),i/n}function Dt(e={x:0,y:0},t,i,s){return Ie(e.x-t,2)+Ie(e.y-i,2)<=Ie(s,2)}function Re(e={x:0,y:0},t={},i=1){let s=t.getBoundingClientRect();return{x:(e.x-s.left)*i,y:(e.y-s.top)*i}}function Wt(e,t,i,s){let n=e-i,a=t-s,r=Math.atan2(-a,-n);return r*=180/Math.PI,r<0&&(r+=360),r}function zt(e=0,t=0){let i=e+t,s;return i>0?s=i%360:s=360+i%360,s===360&&(s=0),s}function Bt(e=0,t=0){let i=180-t;return 180-zt(e,i)}function Pt(e=0,t=0,i=1){let s=(e%360+t)%360;return s=Ot(s),s=(i===1?360-s:360+s)%360,s*=i,e+s}function ve(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}function U(e){return typeof e=="number"&&!Number.isNaN(e)}function S({val:e,isValid:t,errorMessage:i,defaultValue:s,action:n=null}){if(t)return n?n():e;if(e===void 0)return s;throw new Error(i)}function je(e){return e&&e.complete&&e.naturalWidth!==0&&e.naturalHeight!==0}function Ot(e=0){return Number(e.toFixed(9))}function Ft(e){return Math.sin(e*Math.PI/2)}var jt=Object.freeze({left:"left",right:"right",center:"center"}),_=Object.freeze({wheel:{borderColor:"#000",borderWidth:1,debug:!1,image:null,isInteractive:!0,itemBackgroundColors:["#fff"],itemLabelAlign:jt.right,itemLabelBaselineOffset:0,itemLabelColors:["#000"],itemLabelFont:"sans-serif",itemLabelFontSizeMax:500,itemLabelRadius:.85,itemLabelRadiusMax:.2,itemLabelRotation:0,items:[],lineColor:"#000",lineWidth:1,pixelRatio:0,radius:.95,rotation:0,rotationResistance:-35,rotationSpeedMax:300,offset:{w:0,h:0},onCurrentIndexChange:null,onRest:null,onSpin:null,overlayImage:null,pointerAngle:0},item:{backgroundColor:null,image:null,imageRadius:.5,imageRotation:0,imageScale:1,label:"",labelColor:null,labelFont:null,weight:1}}),he=Object.freeze({pointerLineColor:"#ff00ff",labelOutlineColor:"#ff00ff",labelRadiusColor:"#00ff00",dragEventHue:200});function Nt(e={}){qt(e),e._handler_onResize=e.resize.bind(e),window.addEventListener("resize",e._handler_onResize)}function Ut(e={}){let t=e.canvas;"PointerEvent"in window?(t.removeEventListener("pointerdown",e._handler_onPointerDown),t.removeEventListener("pointermove",e._handler_onPointerMoveRefreshCursor)):(t.removeEventListener("touchstart",e._handler_onTouchStart),t.removeEventListener("mousedown",e._handler_onMouseDown),t.removeEventListener("mousemove",e._handler_onMouseMoveRefreshCursor)),window.removeEventListener("resize",e._handler_onResize)}function qt(e={}){let t=e.canvas;e._handler_onPointerMoveRefreshCursor=(i={})=>{let s={x:i.clientX,y:i.clientY};e.isCursorOverWheel=e.wheelHitTest(s),e.refreshCursor()},e._handler_onMouseMoveRefreshCursor=(i={})=>{let s={x:i.clientX,y:i.clientY};e.isCursorOverWheel=e.wheelHitTest(s),e.refreshCursor()},e._handler_onPointerDown=(i={})=>{let s={x:i.clientX,y:i.clientY};if(!e.isInteractive||!e.wheelHitTest(s))return;i.preventDefault(),e.dragStart(s),t.setPointerCapture(i.pointerId),t.addEventListener("pointermove",n),t.addEventListener("pointerup",a),t.addEventListener("pointercancel",a),t.addEventListener("pointerout",a);function n(r={}){r.preventDefault(),e.dragMove({x:r.clientX,y:r.clientY})}function a(r={}){r.preventDefault(),t.releasePointerCapture(r.pointerId),t.removeEventListener("pointermove",n),t.removeEventListener("pointerup",a),t.removeEventListener("pointercancel",a),t.removeEventListener("pointerout",a),e.dragEnd()}},e._handler_onMouseDown=(i={})=>{let s={x:i.clientX,y:i.clientY};if(!e.isInteractive||!e.wheelHitTest(s))return;e.dragStart(s),document.addEventListener("mousemove",n),document.addEventListener("mouseup",a);function n(r={}){r.preventDefault(),e.dragMove({x:r.clientX,y:r.clientY})}function a(r={}){r.preventDefault(),document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",a),e.dragEnd()}},e._handler_onTouchStart=(i={})=>{let s={x:i.targetTouches[0].clientX,y:i.targetTouches[0].clientY};if(!e.isInteractive||!e.wheelHitTest(s))return;i.preventDefault(),e.dragStart(s),t.addEventListener("touchmove",n),t.addEventListener("touchend",a),t.addEventListener("touchcancel",a);function n(r={}){r.preventDefault(),e.dragMove({x:r.targetTouches[0].clientX,y:r.targetTouches[0].clientY})}function a(r={}){r.preventDefault(),t.removeEventListener("touchmove",n),t.removeEventListener("touchend",a),t.removeEventListener("touchcancel",a),e.dragEnd()}},"PointerEvent"in window?(t.addEventListener("pointerdown",e._handler_onPointerDown),t.addEventListener("pointermove",e._handler_onPointerMoveRefreshCursor)):(t.addEventListener("touchstart",e._handler_onTouchStart),t.addEventListener("mousedown",e._handler_onMouseDown),t.addEventListener("mousemove",e._handler_onMouseMoveRefreshCursor))}var Ht=class{constructor(e,t={}){if(!ve(e))throw new Error("wheel must be an instance of Wheel");if(!ve(t)&&t!==null)throw new Error("props must be an Object or null");this._wheel=e;for(let i of Object.keys(_.item))this["_"+i]=_.item[i];t?this.init(t):this.init(_.item)}init(e={}){this.backgroundColor=e.backgroundColor,this.image=e.image,this.imageRadius=e.imageRadius,this.imageRotation=e.imageRotation,this.imageScale=e.imageScale,this.label=e.label,this.labelColor=e.labelColor,this.value=e.value,this.weight=e.weight}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){typeof e=="string"?this._backgroundColor=e:this._backgroundColor=_.item.backgroundColor,this._wheel.refresh()}get image(){return this._image}set image(e){let t;typeof e=="string"?(t=new Image,t.src=e,t.onload=i=>this._wheel.refresh()):t=_.item.image,this._image=t,this._wheel.refresh()}get imageRadius(){return this._imageRadius}set imageRadius(e){typeof e=="number"?this._imageRadius=e:this._imageRadius=_.item.imageRadius,this._wheel.refresh()}get imageRotation(){return this._imageRotation}set imageRotation(e){typeof e=="number"?this._imageRotation=e:this._imageRotation=_.item.imageRotation,this._wheel.refresh()}get imageScale(){return this._imageScale}set imageScale(e){typeof e=="number"?this._imageScale=e:this._imageScale=_.item.imageScale,this._wheel.refresh()}get label(){return this._label}set label(e){typeof e=="string"?this._label=e:this._label=_.item.label,this._wheel.refresh()}get labelColor(){return this._labelColor}set labelColor(e){typeof e=="string"?this._labelColor=e:this._labelColor=_.item.labelColor,this._wheel.refresh()}get value(){return this._value}set value(e){this._value=e}get weight(){return this._weight}set weight(e){typeof e=="number"?this._weight=e:this._weight=_.item.weight}getIndex(){let e=this._wheel.items.findIndex(t=>t===this);if(e===-1)throw new Error("Item not found in parent Wheel");return e}getCenterAngle(){let e=this._wheel.getItemAngles()[this.getIndex()];return e.start+(e.end-e.start)/2}getStartAngle(){return this._wheel.getItemAngles()[this.getIndex()].start}getEndAngle(){return this._wheel.getItemAngles()[this.getIndex()].end}getRandomAngle(){return Mt(this.getStartAngle(),this.getEndAngle())}},Jt=class{constructor(e,t={}){if(this._frameRequestId=null,this._rotationSpeed=0,this._rotationDirection=1,!(e instanceof Element))throw new Error("container must be an instance of Element");if(!ve(t)&&t!==null)throw new Error("props must be an Object or null");this._canvasContainer=e,this.canvas=document.createElement("canvas"),this._context=this.canvas.getContext("2d"),this.addCanvas(),Nt(this);for(let i of Object.keys(_.wheel))this["_"+i]=_.wheel[i];t?this.init(t):this.init(_.wheel)}init(e={}){this._isInitialising=!0,this.borderColor=e.borderColor,this.borderWidth=e.borderWidth,this.debug=e.debug,this.image=e.image,this.isInteractive=e.isInteractive,this.itemBackgroundColors=e.itemBackgroundColors,this.itemLabelAlign=e.itemLabelAlign,this.itemLabelBaselineOffset=e.itemLabelBaselineOffset,this.itemLabelColors=e.itemLabelColors,this.itemLabelFont=e.itemLabelFont,this.itemLabelFontSizeMax=e.itemLabelFontSizeMax,this.itemLabelRadius=e.itemLabelRadius,this.itemLabelRadiusMax=e.itemLabelRadiusMax,this.itemLabelRotation=e.itemLabelRotation,this.items=e.items,this.lineColor=e.lineColor,this.lineWidth=e.lineWidth,this.pixelRatio=e.pixelRatio,this.rotationSpeedMax=e.rotationSpeedMax,this.radius=e.radius,this.rotation=e.rotation,this.rotationResistance=e.rotationResistance,this.offset=e.offset,this.onCurrentIndexChange=e.onCurrentIndexChange,this.onRest=e.onRest,this.onSpin=e.onSpin,this.overlayImage=e.overlayImage,this.pointerAngle=e.pointerAngle}addCanvas(){this._canvasContainer.appendChild(this.canvas)}removeCanvas(){this._canvasContainer.removeChild(this.canvas)}remove(){window.cancelAnimationFrame(this._frameRequestId),Ut(this),this.removeCanvas()}resize(){let[e,t]=[this._canvasContainer.clientWidth*this.getActualPixelRatio(),this._canvasContainer.clientHeight*this.getActualPixelRatio()],i=Math.min(e,t),s={w:i-i*this.offset.w,h:i-i*this.offset.h},n=Math.min(e/s.w,t/s.h);this._size=Math.max(s.w*n,s.h*n),this.canvas.style.width=this._canvasContainer.clientWidth+"px",this.canvas.style.height=this._canvasContainer.clientHeight+"px",this.canvas.width=e,this.canvas.height=t,this._center={x:e/2+e*this.offset.w,y:t/2+t*this.offset.h},this._actualRadius=this._size/2*this.radius,this.itemLabelFontSize=this.itemLabelFontSizeMax*(this._size/500),this.labelMaxWidth=this._actualRadius*(this.itemLabelRadius-this.itemLabelRadiusMax);for(let a of this._items)this.itemLabelFontSize=Math.min(this.itemLabelFontSize,Tt(a.label,this.itemLabelFont,this.labelMaxWidth,this._context));this.refresh()}draw(e=0){this._frameRequestId=null;let t=this._context;t.clearRect(0,0,this.canvas.width,this.canvas.height),this.animateRotation(e);let i=this.getItemAngles(this._rotation),s=this.getActualBorderWidth();t.textBaseline="middle",t.textAlign=this.itemLabelAlign,t.font=this.itemLabelFontSize+"px "+this.itemLabelFont,t.save();for(let[n,a]of i.entries()){let r=new Path2D;r.moveTo(this._center.x,this._center.y),r.arc(this._center.x,this._center.y,this._actualRadius-s/2,H(a.start+-90),H(a.end+-90)),this._items[n].path=r}this.drawItemBackgrounds(t,i),this.drawItemImages(t,i),this.drawItemLines(t,i),this.drawItemLabels(t,i),this.drawBorder(t),this.drawImage(t,this._image,!1),this.drawImage(t,this._overlayImage,!0),this.drawPointerLine(t),this.drawDragEvents(t),this._isInitialising=!1}drawItemBackgrounds(e,t=[]){var i;for(let[s,n]of t.entries()){let a=this._items[s];e.fillStyle=(i=a.backgroundColor)!=null?i:this.itemBackgroundColors[s%this.itemBackgroundColors.length],e.fill(a.path)}}drawItemImages(e,t=[]){for(let[i,s]of t.entries()){let n=this._items[i];if(!je(n.image))return;e.save(),e.clip(n.path);let a=s.start+(s.end-s.start)/2;e.translate(this._center.x+Math.cos(H(a+-90))*(this._actualRadius*n.imageRadius),this._center.y+Math.sin(H(a+-90))*(this._actualRadius*n.imageRadius)),e.rotate(H(a+n.imageRotation));let r=this._size/500*n.image.width*n.imageScale,l=this._size/500*n.image.height*n.imageScale,o=-r/2,v=-l/2;e.drawImage(n.image,o,v,r,l),e.restore()}}drawImage(e,t,i=!1){if(!je(t))return;e.translate(this._center.x,this._center.y),i||e.rotate(H(this._rotation));let s=i?this._size:this._size*this.radius,n=-(s/2);e.drawImage(t,n,n,s,s),e.resetTransform()}drawPointerLine(e){!this.debug||(e.translate(this._center.x,this._center.y),e.rotate(H(this._pointerAngle+-90)),e.beginPath(),e.moveTo(0,0),e.lineTo(this._actualRadius*2,0),e.strokeStyle=he.pointerLineColor,e.lineWidth=2,e.stroke(),e.resetTransform())}drawBorder(e){if(this.borderWidth<=0)return;let t=this.getActualBorderWidth(),i=this._borderColor||"transparent";e.beginPath(),e.strokeStyle=i,e.lineWidth=t,e.arc(this._center.x,this._center.y,this._actualRadius-t/2,0,2*Math.PI),e.stroke(),this.debug&&(e.beginPath(),e.strokeStyle=e.strokeStyle=he.labelRadiusColor,e.lineWidth=1,e.arc(this._center.x,this._center.y,this._actualRadius*this.itemLabelRadius,0,2*Math.PI),e.stroke(),e.beginPath(),e.strokeStyle=e.strokeStyle=he.labelRadiusColor,e.lineWidth=1,e.arc(this._center.x,this._center.y,this._actualRadius*this.itemLabelRadiusMax,0,2*Math.PI),e.stroke())}drawItemLines(e,t=[]){if(this.lineWidth<=0)return;let i=this.lineWidth/500*this._size,s=this.getActualBorderWidth();e.translate(this._center.x,this._center.y);for(let n of t)e.rotate(H(n.start+-90)),e.beginPath(),e.moveTo(0,0),e.lineTo(this._actualRadius-s,0),e.strokeStyle=this.lineColor,e.lineWidth=i,e.stroke(),e.rotate(-H(n.start+-90));e.resetTransform()}drawItemLabels(e,t=[]){let i=this.itemLabelFontSize*-this.itemLabelBaselineOffset;for(let[s,n]of t.entries()){let a=this._items[s],r=a.labelColor||this._itemLabelColors[s%this._itemLabelColors.length]||"transparent";if(a.label.trim()===""||r==="transparent")continue;e.save(),e.clip(a.path);let l=n.start+(n.end-n.start)/2;e.translate(this._center.x+Math.cos(H(l+-90))*(this._actualRadius*this.itemLabelRadius),this._center.y+Math.sin(H(l+-90))*(this._actualRadius*this.itemLabelRadius)),e.rotate(H(l+-90)),e.rotate(H(this.itemLabelRotation)),this.debug&&(e.beginPath(),e.moveTo(0,0),e.lineTo(-this.labelMaxWidth,0),e.strokeStyle=he.labelOutlineColor,e.lineWidth=1,e.stroke(),e.strokeRect(0,-this.itemLabelFontSize/2,-this.labelMaxWidth,this.itemLabelFontSize)),e.fillStyle=r,e.fillText(a.label,0,i),e.restore()}}drawDragEvents(e){var t;if(!this.debug||!((t=this.dragEvents)!=null&&t.length))return;let i=[...this.dragEvents].reverse();for(let[s,n]of i.entries()){let a=s/this.dragEvents.length*100;e.beginPath(),e.arc(n.x,n.y,5,0,2*Math.PI),e.fillStyle=`hsl(${he.dragEventHue},100%,${a}%)`,e.strokeStyle="#000",e.lineWidth=.5,e.fill(),e.stroke()}}animateRotation(e=0){if(this._spinToTimeEnd){if(e>=this._spinToTimeEnd){this.rotation=this._spinToEndRotation,this._spinToTimeEnd=void 0,this.raiseEvent_onRest();return}this.refresh();let t=this._spinToTimeEnd-this._spinToTimeStart,i=(e-this._spinToTimeStart)/t;i=i<0?0:i;let s=this._spinToEndRotation-this._spinToStartRotation;this.rotation=this._spinToStartRotation+s*this._spinToEasingFunction(i);return}if(this._rotationSpeed!==0){this.refresh(),this._lastFrameTime===void 0&&(this._lastFrameTime=e);let t=e-this._lastFrameTime;t>0&&(this.rotation+=t/1e3*this._rotationSpeed%360,this._rotationSpeed=this.getRotationSpeedPlusDrag(t),this._rotationSpeed===0&&this.raiseEvent_onRest(),this._lastFrameTime=e);return}this._lastFrameTime=void 0}getRotationSpeedPlusDrag(e=0){let t=this._rotationSpeed+this.rotationResistance*(e/1e3)*this._rotationDirection;return this._rotationDirection===1&&t<0||this._rotationDirection===-1&&t>=0?0:t}spin(e=0){if(!U(e))throw new Error("rotationSpeed must be a number");this.setSpeedSpeed(e,"spin")}spinTo(e=0,t=0,i=null){if(Number.isNaN(e))throw new Error("Error: newRotation parameter is NaN");this.stop(),this.animate(e,t,i),this.raiseEvent_onSpin({method:"spinto",targetRotation:e,duration:t})}spinToItem(e=0,t=0,i=!0,s=1,n=1,a=null){this.stop();let r=i?this.items[e].getCenterAngle():this.items[e].getRandomAngle(),l=Pt(this.rotation,r-this._pointerAngle,n);l+=s*360*n,this.animate(l,t,a),this.raiseEvent_onSpin({method:"spintoitem",targetItemIndex:e,targetRotation:l,duration:t})}animate(e,t,i){this._spinToStartRotation=this.rotation,this._spinToEndRotation=e,this._spinToTimeStart=performance.now(),this._spinToTimeEnd=this._spinToTimeStart+t,this._spinToEasingFunction=i||Ft,this.refresh()}stop(){this._rotationSpeed=0,this._spinToTimeEnd=void 0}getActualBorderWidth(){return this.borderWidth/500*this._size}getActualPixelRatio(){return this._pixelRatio!==0?this._pixelRatio:window.devicePixelRatio}wheelHitTest(e={x:0,y:0}){let t=Re(e,this.canvas,this.getActualPixelRatio());return Dt(t,this._center.x,this._center.y,this._actualRadius)}refreshCursor(){if(this.isInteractive){if(this.isDragging){this.canvas.style.cursor="grabbing";return}if(this.isCursorOverWheel){this.canvas.style.cursor="grab";return}}this.canvas.style.cursor=""}getAngleFromCenter(e={x:0,y:0}){return(Wt(this._center.x,this._center.y,e.x,e.y)+90)%360}getCurrentIndex(){return this._currentIndex}refreshCurrentIndex(e=[]){this._items.length===0&&(this._currentIndex=-1);for(let[t,i]of e.entries())if(Vt(this._pointerAngle,i.start%360,i.end%360)){if(this._currentIndex===t)break;this._currentIndex=t,this._isInitialising||this.raiseEvent_onCurrentIndexChange();break}}getItemAngles(e=0){let t=0;for(let r of this.items)t+=r.weight;let i=360/t,s,n=e,a=[];for(let r of this._items)s=r.weight*i,a.push({start:n,end:n+s}),n+=s;return this._items.length>1&&(a[a.length-1].end=a[0].start+360),a}refresh(){this._frameRequestId===null&&(this._frameRequestId=window.requestAnimationFrame(this.draw.bind(this)))}limitSpeed(e=0,t=0){let i=Math.min(e,t);return Math.max(i,-t)}setSpeedSpeed(e=0,t=""){this.stop(),this._rotationSpeed=this.limitSpeed(e,this._rotationSpeedMax),this._rotationDirection=this._rotationSpeed>=0?1:-1,this._rotationSpeed!==0&&this.raiseEvent_onSpin({method:t,rotationSpeed:this._rotationSpeed,rotationResistance:this._rotationResistance}),this.refresh()}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=S({val:e,isValid:typeof e=="string",errorMessage:"Wheel.borderColor must be a string",defaultValue:_.wheel.borderColor}),this.refresh()}get borderWidth(){return this._borderWidth}set borderWidth(e){this._borderWidth=S({val:e,isValid:U(e),errorMessage:"Wheel.borderWidth must be a number",defaultValue:_.wheel.borderWidth}),this.refresh()}get debug(){return this._debug}set debug(e){this._debug=S({val:e,isValid:typeof e=="boolean",errorMessage:"Wheel.debug must be a boolean",defaultValue:_.wheel.debug}),this.refresh()}get image(){var e,t;return(t=(e=this._image)==null?void 0:e.src)!=null?t:null}set image(e){this._image=S({val:e,isValid:typeof e=="string"||e===null,errorMessage:"Wheel.image must be a url (string) or null",defaultValue:_.wheel.image,action:()=>{if(e===null)return null;let t=new Image;return t.src=e,t.onload=i=>this.refresh(),t}}),this.refresh()}get isInteractive(){return this._isInteractive}set isInteractive(e){this._isInteractive=S({val:e,isValid:typeof e=="boolean",errorMessage:"Wheel.isInteractive must be a boolean",defaultValue:_.wheel.isInteractive}),this.refreshCursor()}get itemBackgroundColors(){return this._itemBackgroundColors}set itemBackgroundColors(e){this._itemBackgroundColors=S({val:e,isValid:Array.isArray(e),errorMessage:"Wheel.itemBackgroundColors must be an array",defaultValue:_.wheel.itemBackgroundColors}),this.refresh()}get itemLabelAlign(){return this._itemLabelAlign}set itemLabelAlign(e){this._itemLabelAlign=S({val:e,isValid:typeof e=="string",errorMessage:"Wheel.itemLabelAlign must be a string",defaultValue:_.wheel.itemLabelAlign}),this.refresh()}get itemLabelBaselineOffset(){return this._itemLabelBaselineOffset}set itemLabelBaselineOffset(e){this._itemLabelBaselineOffset=S({val:e,isValid:U(e),errorMessage:"Wheel.itemLabelBaselineOffset must be a number",defaultValue:_.wheel.itemLabelBaselineOffset}),this.resize()}get itemLabelColors(){return this._itemLabelColors}set itemLabelColors(e){this._itemLabelColors=S({val:e,isValid:Array.isArray(e),errorMessage:"Wheel.itemLabelColors must be an array",defaultValue:_.wheel.itemLabelColors}),this.refresh()}get itemLabelFont(){return this._itemLabelFont}set itemLabelFont(e){this._itemLabelFont=S({val:e,isValid:typeof e=="string",errorMessage:"Wheel.itemLabelFont must be a string",defaultValue:_.wheel.itemLabelFont}),this.resize()}get itemLabelFontSizeMax(){return this._itemLabelFontSizeMax}set itemLabelFontSizeMax(e){this._itemLabelFontSizeMax=S({val:e,isValid:U(e),errorMessage:"Wheel.itemLabelFontSizeMax must be a number",defaultValue:_.wheel.itemLabelFontSizeMax}),this.resize()}get itemLabelRadius(){return this._itemLabelRadius}set itemLabelRadius(e){this._itemLabelRadius=S({val:e,isValid:U(e),errorMessage:"Wheel.itemLabelRadius must be a number",defaultValue:_.wheel.itemLabelRadius}),this.resize()}get itemLabelRadiusMax(){return this._itemLabelRadiusMax}set itemLabelRadiusMax(e){this._itemLabelRadiusMax=S({val:e,isValid:U(e),errorMessage:"Wheel.itemLabelRadiusMax must be a number",defaultValue:_.wheel.itemLabelRadiusMax}),this.resize()}get itemLabelRotation(){return this._itemLabelRotation}set itemLabelRotation(e){this._itemLabelRotation=S({val:e,isValid:U(e),errorMessage:"Wheel.itemLabelRotation must be a number",defaultValue:_.wheel.itemLabelRotation}),this.refresh()}get items(){return this._items}set items(e){this._items=S({val:e,isValid:Array.isArray(e),errorMessage:"Wheel.items must be an array of Items",defaultValue:_.wheel.items,action:()=>{let t=[];for(let i of e)t.push(new Ht(this,{backgroundColor:i.backgroundColor,image:i.image,imageRadius:i.imageRadius,imageRotation:i.imageRotation,imageScale:i.imageScale,label:i.label,labelColor:i.labelColor,value:i.value,weight:i.weight}));return t}}),this.refreshCurrentIndex(this.getItemAngles(this._rotation))}get lineColor(){return this._lineColor}set lineColor(e){this._lineColor=S({val:e,isValid:typeof e=="string",errorMessage:"Wheel.lineColor must be a string",defaultValue:_.wheel.lineColor}),this.refresh()}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=S({val:e,isValid:U(e),errorMessage:"Wheel.lineWidth must be a number",defaultValue:_.wheel.lineWidth}),this.refresh()}get offset(){return this._offset}set offset(e){this._offset=S({val:e,isValid:ve(e),errorMessage:"Wheel.offset must be an object",defaultValue:_.wheel.offset}),this.resize()}get onCurrentIndexChange(){return this._onCurrentIndexChange}set onCurrentIndexChange(e){this._onCurrentIndexChange=S({val:e,isValid:typeof e=="function"||e===null,errorMessage:"Wheel.onCurrentIndexChange must be a function or null",defaultValue:_.wheel.onCurrentIndexChange})}get onRest(){return this._onRest}set onRest(e){this._onRest=S({val:e,isValid:typeof e=="function"||e===null,errorMessage:"Wheel.onRest must be a function or null",defaultValue:_.wheel.onRest})}get onSpin(){return this._onSpin}set onSpin(e){this._onSpin=S({val:e,isValid:typeof e=="function"||e===null,errorMessage:"Wheel.onSpin must be a function or null",defaultValue:_.wheel.onSpin})}get overlayImage(){var e,t;return(t=(e=this._overlayImage)==null?void 0:e.src)!=null?t:null}set overlayImage(e){this._overlayImage=S({val:e,isValid:typeof e=="string"||e===null,errorMessage:"Wheel.overlayImage must be a url (string) or null",defaultValue:_.wheel.overlayImage,action:()=>{if(e===null)return null;let t=new Image;return t.src=e,t.onload=i=>this.refresh(),t}}),this.refresh()}get pixelRatio(){return this._pixelRatio}set pixelRatio(e){this._pixelRatio=S({val:e,isValid:U(e),errorMessage:"Wheel.pixelRatio must be a number",defaultValue:_.wheel.pixelRatio}),this.resize()}get pointerAngle(){return this._pointerAngle}set pointerAngle(e){this._pointerAngle=S({val:e,isValid:U(e)&&e>=0,errorMessage:"Wheel.pointerAngle must be a number between 0 and 360",defaultValue:_.wheel.pointerAngle,action:()=>e%360}),this.debug&&this.refresh()}get radius(){return this._radius}set radius(e){this._radius=S({val:e,isValid:U(e),errorMessage:"Wheel.radius must be a number",defaultValue:_.wheel.radius}),this.resize()}get rotation(){return this._rotation}set rotation(e){this._rotation=S({val:e,isValid:U(e),errorMessage:"Wheel.rotation must be a number",defaultValue:_.wheel.rotation}),this.refreshCurrentIndex(this.getItemAngles(this._rotation)),this.refresh()}get rotationResistance(){return this._rotationResistance}set rotationResistance(e){this._rotationResistance=S({val:e,isValid:U(e),errorMessage:"Wheel.rotationResistance must be a number",defaultValue:_.wheel.rotationResistance})}get rotationSpeed(){return this._rotationSpeed}get rotationSpeedMax(){return this._rotationSpeedMax}set rotationSpeedMax(e){this._rotationSpeedMax=S({val:e,isValid:U(e)&&e>=0,errorMessage:"Wheel.rotationSpeedMax must be a number >= 0",defaultValue:_.wheel.rotationSpeedMax})}dragStart(e={x:0,y:0}){let t=Re(e,this.canvas,this.getActualPixelRatio());this.isDragging=!0,this.stop(),this.dragEvents=[{distance:0,x:t.x,y:t.y,now:performance.now()}],this.refreshCursor()}dragMove(e={x:0,y:0}){let t=Re(e,this.canvas,this.getActualPixelRatio()),i=this.getAngleFromCenter(t),s=this.dragEvents[0],n=this.getAngleFromCenter(s),a=Bt(n,i);this.dragEvents.unshift({distance:a,x:t.x,y:t.y,now:performance.now()}),this.debug&&this.dragEvents.length>=40&&this.dragEvents.pop(),this.rotation+=a}dragEnd(){this.isDragging=!1;let e=0,t=performance.now();for(let[i,s]of this.dragEvents.entries()){if(!this.isDragEventTooOld(t,s)){e+=s.distance;continue}this.dragEvents.length=i;break}this.refreshCursor(),e!==0&&this.setSpeedSpeed(e*(1e3/250),"interact")}isDragEventTooOld(e=0,t={}){return e-t.now>250}raiseEvent_onCurrentIndexChange(e={}){var t;(t=this.onCurrentIndexChange)==null||t.call(this,xe({type:"currentIndexChange",currentIndex:this._currentIndex},e))}raiseEvent_onRest(e={}){var t;(t=this.onRest)==null||t.call(this,xe({type:"rest",currentIndex:this._currentIndex,rotation:this._rotation},e))}raiseEvent_onSpin(e={}){var t;(t=this.onSpin)==null||t.call(this,xe({type:"spin"},e))}};function Ne(e,t,i){const s=e.slice();s[5]=t[i];const n=pt(s[5],s[1]);return s[6]=n,s}function Ue(e){let t,i=ne(e[0].effects),s=[];for(let n=0;n<i.length;n+=1)s[n]=qe(Ne(e,i,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();t=Z()},l(n){for(let a=0;a<s.length;a+=1)s[a].l(n);t=Z()},m(n,a){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(n,a);T(n,t,a)},p(n,a){if(a&3){i=ne(n[0].effects);let r;for(r=0;r<i.length;r+=1){const l=Ne(n,i,r);s[r]?s[r].p(l,a):(s[r]=qe(l),s[r].c(),s[r].m(t.parentNode,t))}for(;r<s.length;r+=1)s[r].d(1);s.length=i.length}},d(n){n&&d(t),ke(s,n)}}}function qe(e){let t,i,s=e[6]+"",n;return{c(){t=A("div"),i=te("• "),n=te(s),this.h()},l(a){t=g(a,"DIV",{class:!0});var r=E(t);i=ie(r,"• "),n=ie(r,s),r.forEach(d),this.h()},h(){b(t,"class","caption whitespace-pre-wrap text-sm")},m(a,r){T(a,t,r),f(t,i),f(t,n)},p(a,r){r&3&&s!==(s=a[6]+"")&&be(n,s)},d(a){a&&d(t)}}}function Kt(e){let t,i,s,n=(e[0].text??"")+"",a,r,l,o,v,p,c,u,h=e[0].effects!==void 0&&Ue(e);return{c(){t=A("div"),i=A("div"),s=A("div"),a=te(n),r=W(),h&&h.c(),o=W(),v=A("div"),p=A("div"),c=te(e[3]),u=te("%"),this.h()},l(m){t=g(m,"DIV",{class:!0});var M=E(t);i=g(M,"DIV",{class:!0,style:!0});var O=E(i);s=g(O,"DIV",{});var y=E(s);a=ie(y,n),y.forEach(d),r=z(O),h&&h.l(O),O.forEach(d),o=z(M),v=g(M,"DIV",{class:!0});var k=E(v);p=g(k,"DIV",{class:!0});var D=E(p);c=ie(D,e[3]),u=ie(D,"%"),D.forEach(d),k.forEach(d),M.forEach(d),this.h()},h(){b(i,"class","flex flex-col outcome-left pl-2 svelte-17o0554"),b(i,"style",l=`border-left: 8px solid ${e[2]}`),b(p,"class","caption"),b(v,"class","flex flex-col justify-center"),b(t,"class","flex flex-row justify-between")},m(m,M){T(m,t,M),f(t,i),f(i,s),f(s,a),f(i,r),h&&h.m(i,null),f(t,o),f(t,v),f(v,p),f(p,c),f(p,u)},p(m,[M]){M&1&&n!==(n=(m[0].text??"")+"")&&be(a,n),m[0].effects!==void 0?h?h.p(m,M):(h=Ue(m),h.c(),h.m(i,null)):h&&(h.d(1),h=null),M&4&&l!==(l=`border-left: 8px solid ${m[2]}`)&&b(i,"style",l)},i:$,o:$,d(m){m&&d(t),h&&h.d()}}}function Qt(e,t,i){let{outcomeData:s}=t,{configData:n}=t,{totalPercentage:a}=t,{color:r}=t,l=new ye(s.percentage).divide(new ye(a),8).multiply(new ye(100)).round(3).getValue().replace(/\.0+$|([^\.])0+$/,"$1");return e.$$set=o=>{"outcomeData"in o&&i(0,s=o.outcomeData),"configData"in o&&i(1,n=o.configData),"totalPercentage"in o&&i(4,a=o.totalPercentage),"color"in o&&i(2,r=o.color)},[s,n,r,l,a]}class Yt extends ot{constructor(t){super(),ht(this,t,Qt,Kt,ue,{outcomeData:0,configData:1,totalPercentage:4,color:2})}}const{window:Se}=yt;function He(e,t,i){const s=e.slice();s[34]=t[i],s[38]=i;const n=s[38]-Math.floor(s[38]/s[10].length)*s[10].length;s[35]=n;const a=s[10][s[35]];return s[36]=a,s}function Je(e){const t=e.slice(),i=t[31].outcomes.reduce((n,a)=>n+=parseFloat(a.percentage),0);t[32]=i;const s=!t[4]&&ni==="keyholder";return t[33]=s,t}function Ke(e,t,i){const s=e.slice();return s[39]=t[i][0],s[31]=t[i][1],s}function Gt(e){const t=e.slice(),i=t[8].wheels[t[3]];return t[31]=i,t}function Xt(e){let t,i,s,n,a='<h4 class="mb-0">Extended Wheel of Fortune</h4> <span class="caption">Developer: @strawberria</span>',r,l,o=`Try your luck and spin the <b>extended</b> wheel of fortune! <br/>
                        Now supporting additional actions and multiple wheels with individual cooldowns!`,v,p=e[3],c,u,h,m,M="Select",O,y,k="Choose which wheel to spin with",D,I,x,Y,j,N,J,re="Spin the wheel!",se,ae,le,ee,oe,fe,C=Qe(e),B=ne(Object.entries(e[8].wheels)),R=[];for(let w=0;w<B.length;w+=1)R[w]=Ge(Ke(e,B,w));let P=$t(Je(e));return{c(){t=A("div"),i=A("div"),s=A("div"),n=A("div"),n.innerHTML=a,r=W(),l=A("div"),l.innerHTML=o,v=W(),C.c(),c=W(),u=A("div"),h=A("div"),m=A("div"),m.textContent=M,O=W(),y=A("div"),y.textContent=k,D=W(),I=A("div"),x=A("select");for(let w=0;w<R.length;w+=1)R[w].c();Y=W(),j=A("div"),N=A("button"),J=A("span"),J.textContent=re,ae=W(),le=W(),P&&P.c(),this.h()},l(w){t=g(w,"DIV",{class:!0});var V=E(t);i=g(V,"DIV",{class:!0});var L=E(i);s=g(L,"DIV",{class:!0});var F=E(s);n=g(F,"DIV",{class:!0,"data-svelte-h":!0}),K(n)!=="svelte-1podld8"&&(n.innerHTML=a),r=z(F),l=g(F,"DIV",{class:!0,"data-svelte-h":!0}),K(l)!=="svelte-1b8f23k"&&(l.innerHTML=o),v=z(F),C.l(F),c=z(F),u=g(F,"DIV",{class:!0});var X=E(u);h=g(X,"DIV",{class:!0});var G=E(h);m=g(G,"DIV",{"data-svelte-h":!0}),K(m)!=="svelte-80uym4"&&(m.textContent=M),O=z(G),y=g(G,"DIV",{class:!0,"data-svelte-h":!0}),K(y)!=="svelte-wcdkar"&&(y.textContent=k),D=z(G),I=g(G,"DIV",{class:!0});var me=E(I);x=g(me,"SELECT",{class:!0});var Ae=E(x);for(let pe=0;pe<R.length;pe+=1)R[pe].l(Ae);Ae.forEach(d),me.forEach(d),G.forEach(d),Y=z(X),j=g(X,"DIV",{class:!0});var Me=E(j);N=g(Me,"BUTTON",{type:!0,class:!0});var Ve=E(N);J=g(Ve,"SPAN",{"data-svelte-h":!0}),K(J)!=="svelte-lbtpzf"&&(J.textContent=re),Ve.forEach(d),Me.forEach(d),X.forEach(d),ae=z(F),F.forEach(d),le=z(L),P&&P.l(L),L.forEach(d),V.forEach(d),this.h()},h(){b(n,"class","flex flex-row items-end justify-between space-x-1 mb-2"),b(l,"class","caption mb-2"),b(y,"class","caption mb-2"),b(x,"class","form-control"),e[3]===void 0&&Ee(()=>e[20].call(x)),b(I,"class","w-full"),b(h,"class","grow"),b(N,"type","button"),b(N,"class","btn btn-primary btn-lg"),N.disabled=se=e[5]||e[31].settings.disabled===!0,b(j,"class","flex flex-col justify-center ml-4 mr-4"),b(u,"class","w-full flex flex-row items-stretch space-x-4"),b(s,"class","h-full flex flex-col svelte-1fmkzzh"),De(s,"card-horizontal",at),b(i,"class","w-full h-full flex flex-row"),b(t,"class","card-content grow svelte-1fmkzzh"),De(t,"card-wrapper-desktop",at)},m(w,V){T(w,t,V),f(t,i),f(i,s),f(s,n),f(s,r),f(s,l),f(s,v),C.m(s,null),f(s,c),f(s,u),f(u,h),f(h,m),f(h,O),f(h,y),f(h,D),f(h,I),f(I,x);for(let L=0;L<R.length;L+=1)R[L]&&R[L].m(x,null);We(x,e[3],!0),f(u,Y),f(u,j),f(j,N),f(N,J),f(s,ae),f(i,le),P&&P.m(i,null),ee=!0,oe||(fe=[_e(x,"change",e[20]),_e(N,"click",e[14])],oe=!0)},p(w,V){if(V[0]&8&&ue(p,p=w[3])?(C.d(1),C=Qe(w),C.c(),C.m(s,c)):C.p(w,V),V[0]&256){B=ne(Object.entries(w[8].wheels));let L;for(L=0;L<B.length;L+=1){const F=Ke(w,B,L);R[L]?R[L].p(F,V):(R[L]=Ge(F),R[L].c(),R[L].m(x,null))}for(;L<R.length;L+=1)R[L].d(1);R.length=B.length}V[0]&264&&We(x,w[3]),(!ee||V[0]&296&&se!==(se=w[5]||w[31].settings.disabled===!0))&&(N.disabled=se),P.p(Je(w),V)},i(w){ee||(q(P),ee=!0)},o(w){Q(P),ee=!1},d(w){w&&d(t),C.d(w),ke(R,w),P&&P.d(),oe=!1,ct(fe)}}}function Zt(e){let t,i,s,n,a,r;return{c(){t=A("div"),i=A("img"),n=W(),a=A("div"),r=te(e[2]),this.h()},l(l){t=g(l,"DIV",{class:!0});var o=E(t);i=g(o,"IMG",{src:!0,alt:!0}),n=z(o),a=g(o,"DIV",{class:!0});var v=E(a);r=ie(v,e[2]),v.forEach(d),o.forEach(d),this.h()},h(){ft(i.src,s=bt)||b(i,"src",s),b(i,"alt","Chaster logo"),b(a,"class","mt-4 caption text-lg"),b(t,"class","w-full h-screen flex flex-col items-center justify-center")},m(l,o){T(l,t,o),f(t,i),f(t,n),f(t,a),f(a,r)},p(l,o){o[0]&4&&be(r,l[2])},i:$,o:$,d(l){l&&d(t)}}}function Qe(e){let t,i,s,n;return{c(){t=A("div"),s=W(),n=A("hr"),this.h()},l(a){t=g(a,"DIV",{class:!0}),E(t).forEach(d),s=z(a),n=g(a,"HR",{}),this.h()},h(){b(t,"class","grow mt-1 wheel-container svelte-1fmkzzh"),Ee(()=>e[19].call(t))},m(a,r){T(a,t,r),e[18](t),i=mt(t,e[19].bind(t)),T(a,s,r),T(a,n,r)},p:$,d(a){a&&(d(t),d(s),d(n)),e[18](null),i()}}}function Ye(e){let t,i=e[31].display+"",s,n;return{c(){t=A("option"),s=te(i),this.h()},l(a){t=g(a,"OPTION",{});var r=E(t);s=ie(r,i),r.forEach(d),this.h()},h(){t.__value=n=e[39],Be(t,t.__value)},m(a,r){T(a,t,r),f(t,s)},p(a,r){r[0]&256&&i!==(i=a[31].display+"")&&be(s,i),r[0]&256&&n!==(n=a[39])&&(t.__value=n,Be(t,t.__value))},d(a){a&&d(t)}}}function Ge(e){let t,i=e[31].settings.disabled===!1&&Ye(e);return{c(){i&&i.c(),t=Z()},l(s){i&&i.l(s),t=Z()},m(s,n){i&&i.m(s,n),T(s,t,n)},p(s,n){s[31].settings.disabled===!1?i?i.p(s,n):(i=Ye(s),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d(s){s&&d(t),i&&i.d(s)}}}function $t(e){let t,i,s,n,a="Keyholder OAuth Status:",r,l,o,v,p,c,u=e[3],h,m;function M(I,x){return I[4]===!0?ti:ei}let O=M(e),y=O(e),k=e[33]&&Xe(e),D=nt(e);return{c(){t=A("div"),i=A("div"),s=A("div"),n=A("div"),n.textContent=a,r=W(),y.c(),l=W(),k&&k.c(),v=W(),p=A("hr"),c=W(),D.c(),this.h()},l(I){t=g(I,"DIV",{class:!0,style:!0});var x=E(t);i=g(x,"DIV",{class:!0});var Y=E(i);s=g(Y,"DIV",{});var j=E(s);n=g(j,"DIV",{"data-svelte-h":!0}),K(n)!=="svelte-kk5wwk"&&(n.textContent=a),r=z(j),y.l(j),j.forEach(d),l=z(Y),k&&k.l(Y),Y.forEach(d),v=z(x),p=g(x,"HR",{}),c=z(x),D.l(x),x.forEach(d),this.h()},h(){b(i,"class",o=ze(`flex flex-row flex-start items-center ${e[33]?"justify-between":"justify-start"}`)+" svelte-1fmkzzh"),b(t,"class","h-full flex flex-col ml-4 something"),b(t,"style",h=`width: calc(${e[0]}px * 1.0)`)},m(I,x){T(I,t,x),f(t,i),f(i,s),f(s,n),f(s,r),y.m(s,null),f(i,l),k&&k.m(i,null),f(t,v),f(t,p),f(t,c),D.m(t,null),m=!0},p(I,x){O!==(O=M(I))&&(y.d(1),y=O(I),y&&(y.c(),y.m(s,null))),I[33]?k?k.p(I,x):(k=Xe(I),k.c(),k.m(i,null)):k&&(k.d(1),k=null),(!m||x[0]&16&&o!==(o=ze(`flex flex-row flex-start items-center ${I[33]?"justify-between":"justify-start"}`)+" svelte-1fmkzzh"))&&b(i,"class",o),x[0]&8&&ue(u,u=I[3])?(ce(),Q(D,1,1,$),de(),D=nt(I),D.c(),q(D,1),D.m(t,null)):D.p(I,x),(!m||x[0]&1&&h!==(h=`width: calc(${I[0]}px * 1.0)`))&&b(t,"style",h)},i(I){m||(q(D),m=!0)},o(I){Q(D),m=!1},d(I){I&&d(t),y.d(),k&&k.d(),D.d(I)}}}function ei(e){let t,i="❌ Missing OAuth permissions!";return{c(){t=A("div"),t.textContent=i,this.h()},l(s){t=g(s,"DIV",{class:!0,"data-svelte-h":!0}),K(t)!=="svelte-1x4anp2"&&(t.textContent=i),this.h()},h(){b(t,"class","text-red-500")},m(s,n){T(s,t,n)},d(s){s&&d(t)}}}function ti(e){let t,i="✔️ OAuth scopes granted!";return{c(){t=A("div"),t.textContent=i,this.h()},l(s){t=g(s,"DIV",{class:!0,"data-svelte-h":!0}),K(t)!=="svelte-1y61f57"&&(t.textContent=i),this.h()},h(){b(t,"class","text-green-500")},m(s,n){T(s,t,n)},d(s){s&&d(t)}}}function Xe(e){let t,i="Authorize Permissions",s,n;return{c(){t=A("button"),t.textContent=i,this.h()},l(a){t=g(a,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),K(t)!=="svelte-196gb9f"&&(t.textContent=i),this.h()},h(){b(t,"type","button"),b(t,"class","btn btn-primary btn-md")},m(a,r){T(a,t,r),s||(n=_e(t,"click",e[15]),s=!0)},p:$,d(a){a&&d(t),s=!1,n()}}}function Ze(e){let t,i="❗ False Percentages Shown ❗";return{c(){t=A("div"),t.textContent=i,this.h()},l(s){t=g(s,"DIV",{class:!0,"data-svelte-h":!0}),K(t)!=="svelte-1doz3y0"&&(t.textContent=i),this.h()},h(){b(t,"class","w-[14em] text-red-600 min-h-[1em]")},m(s,n){T(s,t,n)},d(s){s&&d(t)}}}function $e(e){let t,i="❗ Outcome Effects Hidden ❗";return{c(){t=A("div"),t.textContent=i,this.h()},l(s){t=g(s,"DIV",{class:!0,"data-svelte-h":!0}),K(t)!=="svelte-7584fx"&&(t.textContent=i),this.h()},h(){b(t,"class","w-[14em] text-red-600 min-h-[1em]")},m(s,n){T(s,t,n)},d(s){s&&d(t)}}}function et(e){let t,i,s=e[8],n,a=st(e);return{c(){t=A("div"),i=A("div"),a.c(),this.h()},l(r){t=g(r,"DIV",{class:!0});var l=E(t);i=g(l,"DIV",{class:!0});var o=E(i);a.l(o),o.forEach(d),l.forEach(d),this.h()},h(){b(i,"class","flex flex-col space-y-1 items-stretch"),b(t,"class","card-content outcomes-list svelte-1fmkzzh")},m(r,l){T(r,t,l),f(t,i),a.m(i,null),n=!0},p(r,l){l[0]&256&&ue(s,s=r[8])?(ce(),Q(a,1,1,$),de(),a=st(r),a.c(),q(a,1),a.m(i,null)):a.p(r,l)},i(r){n||(q(a),n=!0)},o(r){Q(a),n=!1},d(r){r&&d(t),a.d(r)}}}function tt(e){let t;return{c(){t=A("hr"),this.h()},l(i){t=g(i,"HR",{class:!0}),this.h()},h(){b(t,"class","mt-0.5 mb-0.5")},m(i,s){T(i,t,s)},d(i){i&&d(t)}}}function it(e){let t,i,s,n;t=new Yt({props:{outcomeData:e[34],configData:e[8],totalPercentage:e[32],color:e[36]}});let a=e[38]!==e[31].outcomes.length-1&&tt();return{c(){At(t.$$.fragment),i=W(),a&&a.c(),s=Z()},l(r){gt(t.$$.fragment,r),i=z(r),a&&a.l(r),s=Z()},m(r,l){_t(t,r,l),T(r,i,l),a&&a.m(r,l),T(r,s,l),n=!0},p(r,l){const o={};l[0]&264&&(o.outcomeData=r[34]),l[0]&256&&(o.configData=r[8]),l[0]&264&&(o.totalPercentage=r[32]),t.$set(o),r[38]!==r[31].outcomes.length-1?a||(a=tt(),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},i(r){n||(q(t.$$.fragment,r),n=!0)},o(r){Q(t.$$.fragment,r),n=!1},d(r){r&&(d(i),d(s)),vt(t,r),a&&a.d(r)}}}function st(e){let t,i,s=ne(e[31].outcomes),n=[];for(let r=0;r<s.length;r+=1)n[r]=it(He(e,s,r));const a=r=>Q(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=Z()},l(r){for(let l=0;l<n.length;l+=1)n[l].l(r);t=Z()},m(r,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(r,l);T(r,t,l),i=!0},p(r,l){if(l[0]&1288){s=ne(r[31].outcomes);let o;for(o=0;o<s.length;o+=1){const v=He(r,s,o);n[o]?(n[o].p(v,l),q(n[o],1)):(n[o]=it(v),n[o].c(),q(n[o],1),n[o].m(t.parentNode,t))}for(ce(),o=s.length;o<n.length;o+=1)a(o);de()}},i(r){if(!i){for(let l=0;l<s.length;l+=1)q(n[l]);i=!0}},o(r){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)Q(n[l]);i=!1},d(r){r&&d(t),ke(n,r)}}}function nt(e){let t,i,s='<div>Outcomes</div> <div class="caption mb-2">View possible outcomes for the wheel</div>',n,a,r,l,o,v,p=e[31].settings.falsePercentages===!0&&Ze(),c=e[31].settings.hiddenEffects===!0&&$e(),u=e[31].outcomes.length>0&&et(e);return{c(){t=A("div"),i=A("div"),i.innerHTML=s,n=W(),a=A("div"),p&&p.c(),r=W(),c&&c.c(),l=W(),u&&u.c(),o=Z(),this.h()},l(h){t=g(h,"DIV",{class:!0});var m=E(t);i=g(m,"DIV",{"data-svelte-h":!0}),K(i)!=="svelte-1jjgdd0"&&(i.innerHTML=s),n=z(m),a=g(m,"DIV",{});var M=E(a);p&&p.l(M),r=z(M),c&&c.l(M),M.forEach(d),m.forEach(d),l=z(h),u&&u.l(h),o=Z(),this.h()},h(){b(t,"class","flex flex-row justify-between")},m(h,m){T(h,t,m),f(t,i),f(t,n),f(t,a),p&&p.m(a,null),f(a,r),c&&c.m(a,null),T(h,l,m),u&&u.m(h,m),T(h,o,m),v=!0},p(h,m){h[31].settings.falsePercentages===!0?p||(p=Ze(),p.c(),p.m(a,r)):p&&(p.d(1),p=null),h[31].settings.hiddenEffects===!0?c||(c=$e(),c.c(),c.m(a,null)):c&&(c.d(1),c=null),h[31].outcomes.length>0?u?(u.p(h,m),m[0]&264&&q(u,1)):(u=et(h),u.c(),q(u,1),u.m(o.parentNode,o)):u&&(ce(),Q(u,1,1,()=>{u=null}),de())},i(h){v||(q(u),v=!0)},o(h){Q(u),v=!1},d(h){h&&(d(t),d(l),d(o)),p&&p.d(),c&&c.d(),u&&u.d(h)}}}function ii(e){let t,i,s,n,a,r;Ee(e[17]);const l=[Zt,Xt],o=[];function v(c,u){return c[2]!==""?0:c[3]!==void 0?1:-1}function p(c,u){return u===1?Gt(c):c}return~(i=v(e))&&(s=o[i]=l[i](p(e,i))),{c(){t=A("div"),s&&s.c(),this.h()},l(c){t=g(c,"DIV",{class:!0});var u=E(t);s&&s.l(u),u.forEach(d),this.h()},h(){b(t,"class","container-bg min-w-0 min-h-0 p-4 space-y-2 grow svelte-1fmkzzh")},m(c,u){T(c,t,u),~i&&o[i].m(t,null),e[21](t),n=!0,a||(r=_e(Se,"resize",e[17]),a=!0)},p(c,u){let h=i;i=v(c),i===h?~i&&o[i].p(p(c,i),u):(s&&(ce(),Q(o[h],1,1,()=>{o[h]=null}),de()),~i?(s=o[i],s?s.p(p(c,i),u):(s=o[i]=l[i](p(c,i)),s.c()),q(s,1),s.m(t,null)):s=null)},i(c){n||(q(s),n=!0)},o(c){Q(s),n=!1},d(c){c&&d(t),~i&&o[i].d(),e[21](null),a=!1,r()}}}const Le="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwbmpsYmpwY2ZlYnFwYXFrcGh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODg1NDM0NTgsImV4cCI6MjAwNDExOTQ1OH0.CsGySz2c8bIWphE6--T51CsmSeBQajfwvBYfTkjviM4",rt="https://bpnjlbjpcfebqpaqkphy.supabase.co/functions/v1/chaster_utilities",si="https://bpnjlbjpcfebqpaqkphy.supabase.co/functions/v1/database_utilities";let ni="keyholder",at=!0;const ri="extensions-318826",lt="profile locks shared_locks keyholder";function ai(e,t,i){let s,n,a;const r=["#fecaca","#fed7aa","#fde68a","#d9f99d","#bbf7d0","#a7f3d0","#99f6e4","#a5f3fc","#bae6fd","#bfdbfe","#c7d2fe","#ddd6fe","#e9d5ff","#f5d0fe","#fbcfe8","#fecdd3"],l=Array(32).fill(0).map(C=>{const B=new Audio(Rt);return B.volume=.3,B});let o="Loading extension data...",v,p="",c=!1,u=Ce({wheels:{}});we(e,u,C=>i(8,s=C));let h=Ce({});we(e,h,C=>i(27,a=C));let m="";ut(async()=>{m=window.location.hash.substring(1).split("?")[0];const C=window.location.search,B=new URLSearchParams(C);if(m!=="")p=JSON.parse(decodeURIComponent(m)).mainToken;else{const w=B.get("state");w!==null&&(p=JSON.parse(decodeURIComponent(w)).mainToken)}const R=B.get("code");if(R!==null){const w=window.location.href.split("?")[0];await fetch(si,{method:"POST",headers:{Authorization:`Bearer ${Le}`},body:JSON.stringify({action:"chaster_access-set",authorizationCode:R,redirectURI:w,scopes:lt})});const V=new URL(window.location.href),L=V.searchParams.get("state");V.searchParams.delete("state"),V.searchParams.delete("session_state"),V.searchParams.delete("code"),V.hash=encodeURIComponent(L),history.pushState(null,"",V.toString())}i(2,o="Retrieving extended wheel data...");const P=await I();i(4,c=P.hasKeyholder),ge(u,s=P.config,s),ge(h,a=P.customData,a),i(3,v=Object.keys(s.wheels)[0]??void 0),i(2,o="")});let M=Ce(void 0);we(e,M,C=>i(9,n=C));let O=!1,y,k=["",0];async function D(){i(5,O=!0);const B=await(await fetch(rt,{method:"POST",headers:{Authorization:`Bearer ${Le}`},body:JSON.stringify({action:"extended-main-spin",mainToken:p,wheelID:v})})).json();if(B.index===void 0)return;const R=await I();y.spinToItem(B.index,5e3,!1,5,1,Pe),setTimeout(()=>{i(5,O=!1),k=[v,y.rotation],ge(u,s=R.config,s),i(4,c=R.hasKeyholder),ge(h,a=R.customData,a),i(3,v=Object.keys(s.wheels)[0]??void 0)},5100)}M.subscribe(x),u.subscribe(x),h.subscribe(x);async function I(){const C=await fetch(rt,{method:"POST",headers:{Authorization:`Bearer ${Le}`},body:JSON.stringify({action:"extended-main-page",mainToken:p})});if(C.status!==200)throw console.error(`Error retrieving session data: ${await C.text()}`),new Error("error retrieving session data");return await C.json()}async function x(){if(v===void 0)return;const C=n;if(C===void 0)return;await wt(10);const B=s.wheels[v],R=JSON.parse(JSON.stringify(B.outcomes.map(X=>{const G=X.text??"",me=[Ct(G,24),G.length>=32?"...":""].join(""),Ae=parseFloat(X.percentage);return{label:me,weight:Ae}})));let P=0;k[0]==v?P=k[1]:k=["",0];const w={items:R,pointerAngle:270,isInteractive:!1,itemBackgroundColors:r,itemLabelRadiusMax:.3,itemLabelRadius:.825,itemLabelAlign:"left",itemLabelRotation:180,borderWidth:2,overlayImage:Lt,rotation:P};C.innerHTML="",y=new Jt(C,w),window.wheel=y,window.ease=Pe;let V=0,L=!1,F;y.onSpin=()=>{let X=0,G=30;clearInterval(F),F=setInterval(()=>{if(L===!0){clearInterval(F),L=!1;return}y._rotation>=X+G&&(X=y._rotation,V=V+1<l.length?V+1:0,l[V].play())},10)},y.onRest=()=>{L=!0,y._rotation=y._rotation-360*Math.floor(y._rotation/360)}}let Y,j,N,J,re=0;function se(){let C=encodeURIComponent(window.location.href.split("#")[0]);const R=["https://sso.chaster.app/auth/realms/app/protocol/openid-connect/auth?",`client_id=${ri}&`,`redirect_uri=${C}&`,`response_type=code&scope=${lt}&state=${m}`].join("");window.location.href=R}function ae(){i(6,Y=Se.innerWidth),i(7,j=Se.innerHeight)}function le(C){Te[C?"unshift":"push"](()=>{n=C,M.set(n)})}function ee(){N=this.clientWidth,i(0,N)}function oe(){v=dt(this),i(3,v)}function fe(C){Te[C?"unshift":"push"](()=>{J=C,i(1,J)})}return e.$$.update=()=>{e.$$.dirty[0]&65539&&J!==void 0&&i(16,re=parseFloat(getComputedStyle(J).fontSize))},[N,J,o,v,c,O,Y,j,s,n,r,u,h,M,D,se,re,ae,le,ee,oe,fe]}class Ai extends ot{constructor(t){super(),ht(this,t,ai,ii,ue,{},null,[-1,-1])}}export{Ai as component,mi as universal};
