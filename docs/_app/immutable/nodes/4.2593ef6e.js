import{s as le,n as W,o as ae,r as ie,i as re}from"../chunks/scheduler.9ce0fd20.js";import{S as oe,i as ce,g as f,h as m,j as C,f as d,k as _,a as V,s as A,m as E,B as q,c as M,n as O,l as R,C as B,x as c,F as $,z as ee,o as G}from"../chunks/index.22b49106.js";import{c as ue}from"../chunks/logo.09e82b80.js";import{a as de}from"../chunks/utility.4ec18238.js";const fe=!0,Se=Object.freeze(Object.defineProperty({__proto__:null,prerender:fe},Symbol.toStringTag,{value:"Module"}));function me(n){let t,e,a,o='<div class="text-4xl text-center font-bold">Scavenger Codes</div> <div class="caption">Developed by @strawberria</div>',l,s,i,b="Apply a scavenger code below!",S,y,L,p,D,j="Submit",N,T,u,v,k,J,g,U,F,X;function Z(r,w){if(r[0]==="valid")return ge;if(r[0]==="invalid")return _e;if(r[0]==="used")return he;if(r[0]==="regularity")return ve}let P=Z(n),I=P&&P(n),h=n[1]!==""&&te(n);return{c(){t=f("div"),e=f("div"),a=f("div"),a.innerHTML=o,l=A(),s=f("div"),i=f("div"),i.textContent=b,S=A(),y=f("input"),L=A(),p=f("button"),D=f("span"),D.textContent=j,T=A(),u=f("div"),v=f("div"),k=E(n[5]),J=A(),g=f("div"),I&&I.c(),U=A(),h&&h.c(),this.h()},l(r){t=m(r,"DIV",{class:!0});var w=C(t);e=m(w,"DIV",{class:!0,style:!0});var x=C(e);a=m(x,"DIV",{class:!0,"data-svelte-h":!0}),q(a)!=="svelte-1b2fqs"&&(a.innerHTML=o),l=M(x),s=m(x,"DIV",{class:!0});var Y=C(s);i=m(Y,"DIV",{class:!0,"data-svelte-h":!0}),q(i)!=="svelte-1n0sbof"&&(i.textContent=b),S=M(Y),y=m(Y,"INPUT",{class:!0,style:!0}),Y.forEach(d),L=M(x),p=m(x,"BUTTON",{type:!0,class:!0});var H=C(p);D=m(H,"SPAN",{"data-svelte-h":!0}),q(D)!=="svelte-1x2x2ay"&&(D.textContent=j),H.forEach(d),T=M(x),u=m(x,"DIV",{class:!0,style:!0});var z=C(u);v=m(z,"DIV",{class:!0,style:!0});var Q=C(v);k=O(Q,n[5]),Q.forEach(d),J=M(z),g=m(z,"DIV",{style:!0});var K=C(g);I&&I.l(K),K.forEach(d),U=M(z),h&&h.l(z),z.forEach(d),x.forEach(d),w.forEach(d),this.h()},h(){_(a,"class","flex flex-col items-center mb-[1em]"),_(i,"class","text-lg text-center"),_(y,"class","form-control text-center font-mono mb-[em]"),R(y,"font-size","160%"),R(y,"width","12em"),_(s,"class","flex flex-col items-center w-full space-y-[0.25em] mb-[1.5em]"),_(p,"type","button"),_(p,"class","btn btn-primary btn-lg mb-[0.5em]"),p.disabled=N=n[5]!==""||n[4]||n[2].length===0,B(p,"cursor-not-allowed",n[5]!==""||n[4]||n[2].length===0),_(v,"class","caption"),R(v,"min-height","1.5em"),R(g,"min-height","1.5em"),B(g,"text-green-500",n[0]==="valid"),B(g,"text-red-500",n[0]==="invalid"),_(u,"class","space-y-[0.25em] w-full flex flex-col items-center"),R(u,"min-height","3.25em"),_(e,"class","flex flex-col items-center card-content"),R(e,"width","32em"),_(t,"class","w-full h-full flex flex-col items-center justify-center")},m(r,w){V(r,t,w),c(t,e),c(e,a),c(e,l),c(e,s),c(s,i),c(s,S),c(s,y),$(y,n[2]),c(e,L),c(e,p),c(p,D),c(e,T),c(e,u),c(u,v),c(v,k),c(u,J),c(u,g),I&&I.m(g,null),c(u,U),h&&h.m(u,null),F||(X=[ee(y,"input",n[7]),ee(p,"click",n[6])],F=!0)},p(r,w){w&4&&y.value!==r[2]&&$(y,r[2]),w&52&&N!==(N=r[5]!==""||r[4]||r[2].length===0)&&(p.disabled=N),w&52&&B(p,"cursor-not-allowed",r[5]!==""||r[4]||r[2].length===0),w&32&&G(k,r[5]),P!==(P=Z(r))&&(I&&I.d(1),I=P&&P(r),I&&(I.c(),I.m(g,null))),w&1&&B(g,"text-green-500",r[0]==="valid"),w&1&&B(g,"text-red-500",r[0]==="invalid"),r[1]!==""?h?h.p(r,w):(h=te(r),h.c(),h.m(u,null)):h&&(h.d(1),h=null)},d(r){r&&d(t),I&&I.d(),h&&h.d(),F=!1,ie(X)}}}function pe(n){let t,e,a,o,l,s;return{c(){t=f("div"),e=f("img"),o=A(),l=f("div"),s=E(n[3]),this.h()},l(i){t=m(i,"DIV",{class:!0});var b=C(t);e=m(b,"IMG",{src:!0,alt:!0}),o=M(b),l=m(b,"DIV",{class:!0});var S=C(l);s=O(S,n[3]),S.forEach(d),b.forEach(d),this.h()},h(){re(e.src,a=ue)||_(e,"src",a),_(e,"alt","Chaster logo"),_(l,"class","mt-4 caption text-lg"),_(t,"class","w-full h-screen flex flex-col items-center justify-center")},m(i,b){V(i,t,b),c(t,e),c(t,o),c(t,l),c(l,s)},p(i,b){b&8&&G(s,i[3])},d(i){i&&d(t)}}}function ve(n){let t;return{c(){t=E("Error: regularity not yet elapsed")},l(e){t=O(e,"Error: regularity not yet elapsed")},m(e,a){V(e,t,a)},d(e){e&&d(t)}}}function he(n){let t;return{c(){t=E("Code already used.")},l(e){t=O(e,"Code already used.")},m(e,a){V(e,t,a)},d(e){e&&d(t)}}}function _e(n){let t;return{c(){t=E("Invalid code specified.")},l(e){t=O(e,"Invalid code specified.")},m(e,a){V(e,t,a)},d(e){e&&d(t)}}}function ge(n){let t;return{c(){t=E("Code successfully applied!")},l(e){t=O(e,"Code successfully applied!")},m(e,a){V(e,t,a)},d(e){e&&d(t)}}}function te(n){let t,e,a="A message from your keyholder",o,l;return{c(){t=f("div"),e=f("b"),e.textContent=a,o=E(`:\r
                            `),l=E(n[1]),this.h()},l(s){t=m(s,"DIV",{class:!0});var i=C(t);e=m(i,"B",{"data-svelte-h":!0}),q(e)!=="svelte-n59uha"&&(e.textContent=a),o=O(i,`:\r
                            `),l=O(i,n[1]),i.forEach(d),this.h()},h(){_(t,"class","whitespace-pre-line")},m(s,i){V(s,t,i),c(t,e),c(t,o),c(t,l)},p(s,i){i&2&&G(l,s[1])},d(s){s&&d(t)}}}function be(n){let t;function e(l,s){return l[3]!==""?pe:me}let a=e(n),o=a(n);return{c(){t=f("div"),o.c(),this.h()},l(l){t=m(l,"DIV",{class:!0});var s=C(t);o.l(s),s.forEach(d),this.h()},h(){_(t,"class","container-bg w-full h-screen p-4 svelte-rp1h59")},m(l,s){V(l,t,s),o.m(t,null)},p(l,[s]){a===(a=e(l))&&o?o.p(l,s):(o.d(1),o=a(l),o&&(o.c(),o.m(t,null)))},i:W,o:W,d(l){l&&d(t),o.d()}}}const se="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwbmpsYmpwY2ZlYnFwYXFrcGh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODg1NDM0NTgsImV4cCI6MjAwNDExOTQ1OH0.CsGySz2c8bIWphE6--T51CsmSeBQajfwvBYfTkjviM4",ne="https://bpnjlbjpcfebqpaqkphy.supabase.co/functions/v1/chaster_utilities";function ye(n,t,e){let a=new Date,o,l="",s="",i="",b="Loading extension data...",S="";ae(async()=>{S=window.location.hash.substring(1).split("?")[0];const T=window.location.search,u=new URLSearchParams(T);if(S!=="")i=JSON.parse(decodeURIComponent(S)).mainToken;else{const g=u.get("state");g!==null&&(i=JSON.parse(decodeURIComponent(g)).mainToken)}const v=await fetch(ne,{method:"POST",headers:{Authorization:`Bearer ${se}`},body:JSON.stringify({action:"scavenger-main-page",mainToken:i})});if(v.status!==200){console.error(`Error retrieving page data: ${await v.text()}`);return}const k=await v.json();a=new Date(k.nextActionDate);const J=a.getTime()/1e3;j(J),D=setInterval(j,1e3,J),e(3,b="")});let y=!1;async function L(){e(4,y=!0);const u=await(await fetch(ne,{method:"POST",headers:{Authorization:`Bearer ${se}`},body:JSON.stringify({action:"scavenger-main-submit",mainToken:i,code:s})})).json();e(0,o=u.result),e(1,l=u.message??"");const v=new Date(u.nextActionDate);if(new Date().getTime()<v.getTime()){const k=v.getTime()/1e3;j(k),D=setInterval(j,1e3,k)}e(4,y=!1)}let p="",D=-1;function j(T){const u=Math.floor(new Date().getTime()/1e3);if(T-u<=1)clearInterval(D),e(5,p=""),D=-1;else{const v=de(T-u,!0);e(5,p=`Next action in ${v}`)}}function N(){s=this.value,e(2,s)}return[o,l,s,b,y,p,L,N]}class Te extends oe{constructor(t){super(),ce(this,t,ye,be,le,{})}}export{Te as component,Se as universal};
