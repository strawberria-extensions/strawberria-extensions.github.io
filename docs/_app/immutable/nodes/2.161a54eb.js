import{s as Ke,f as d,l as oe,a as T,g as c,h as L,m as he,d as A,c as V,j as g,i as q,x as o,n as Ae,y as ue,A as Ge,B as xe,z as Se,o as $e,p as Me,C as U,D as _e,E as fe,F as et,G as tt,H as Ee,I as it,e as Te}from"../chunks/scheduler.1e450469.js";import{S as Xe,i as Ze,a as $,t as re,g as Ce,c as Ie,b as rt,d as st,m as nt,e as at}from"../chunks/index.1b62e736.js";import{e as Ve}from"../chunks/each.9e037287.js";import{w as We}from"../chunks/index.157684a0.js";import{c as lt}from"../chunks/logo.0860a6a8.js";import{g as ot,s as ht,t as ut}from"../chunks/utility.997101cc.js";const dt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,ct=!0,ei=Object.freeze(Object.defineProperty({__proto__:null,prerender:ct},Symbol.toStringTag,{value:"Module"}));var mt=Math.PI;function ze(e){return(1-Math.cos(mt*e))/2}const ft="data:audio/mpeg;base64,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",At="/_app/immutable/assets/wheel-bg-overlay.1f6ec841.svg";var gt=Object.defineProperty,De=Object.getOwnPropertySymbols,_t=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,pe=Math.pow,Be=(e,t,i)=>t in e?gt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ve=(e,t)=>{for(var i in t||(t={}))_t.call(t,i)&&Be(e,i,t[i]);if(De)for(var i of De(t))pt.call(t,i)&&Be(e,i,t[i]);return e};function vt(e=0,t=0,i=14){return parseFloat((Math.random()*(t-e)+e).toFixed(i))}function J(e=0){return e*Math.PI/180}function bt(e,t,i){return t<i?t<=e&&e<i:t<=e||e<i}function wt(e,t,i,r){r.save(),r.font=`1px ${t}`;let n=r.measureText(e).width;return r.restore(),i/n}function yt(e={x:0,y:0},t,i,r){return pe(e.x-t,2)+pe(e.y-i,2)<=pe(r,2)}function be(e={x:0,y:0},t={},i=1){let r=t.getBoundingClientRect();return{x:(e.x-r.left)*i,y:(e.y-r.top)*i}}function xt(e,t,i,r){let n=e-i,s=t-r,a=Math.atan2(-s,-n);return a*=180/Math.PI,a<0&&(a+=360),a}function Ct(e=0,t=0){let i=e+t,r;return i>0?r=i%360:r=360+i%360,r===360&&(r=0),r}function It(e=0,t=0){let i=180-t;return 180-Ct(e,i)}function Rt(e=0,t=0,i=1){let r=(e%360+t)%360;return r=Lt(r),r=(i===1?360-r:360+r)%360,r*=i,e+r}function ge(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}function Y(e){return typeof e=="number"&&!Number.isNaN(e)}function w({val:e,isValid:t,errorMessage:i,defaultValue:r,action:n=null}){if(t)return n?n():e;if(e===void 0)return r;throw new Error(i)}function Oe(e){return e&&e.complete&&e.naturalWidth!==0&&e.naturalHeight!==0}function Lt(e=0){return Number(e.toFixed(9))}function kt(e){return Math.sin(e*Math.PI/2)}var St=Object.freeze({left:"left",right:"right",center:"center"}),m=Object.freeze({wheel:{borderColor:"#000",borderWidth:1,debug:!1,image:null,isInteractive:!0,itemBackgroundColors:["#fff"],itemLabelAlign:St.right,itemLabelBaselineOffset:0,itemLabelColors:["#000"],itemLabelFont:"sans-serif",itemLabelFontSizeMax:500,itemLabelRadius:.85,itemLabelRadiusMax:.2,itemLabelRotation:0,items:[],lineColor:"#000",lineWidth:1,pixelRatio:0,radius:.95,rotation:0,rotationResistance:-35,rotationSpeedMax:300,offset:{w:0,h:0},onCurrentIndexChange:null,onRest:null,onSpin:null,overlayImage:null,pointerAngle:0},item:{backgroundColor:null,image:null,imageRadius:.5,imageRotation:0,imageScale:1,label:"",labelColor:null,labelFont:null,weight:1}}),le=Object.freeze({pointerLineColor:"#ff00ff",labelOutlineColor:"#ff00ff",labelRadiusColor:"#00ff00",dragEventHue:200});function Mt(e={}){Tt(e),e._handler_onResize=e.resize.bind(e),window.addEventListener("resize",e._handler_onResize)}function Et(e={}){let t=e.canvas;"PointerEvent"in window?(t.removeEventListener("pointerdown",e._handler_onPointerDown),t.removeEventListener("pointermove",e._handler_onPointerMoveRefreshCursor)):(t.removeEventListener("touchstart",e._handler_onTouchStart),t.removeEventListener("mousedown",e._handler_onMouseDown),t.removeEventListener("mousemove",e._handler_onMouseMoveRefreshCursor)),window.removeEventListener("resize",e._handler_onResize)}function Tt(e={}){let t=e.canvas;e._handler_onPointerMoveRefreshCursor=(i={})=>{let r={x:i.clientX,y:i.clientY};e.isCursorOverWheel=e.wheelHitTest(r),e.refreshCursor()},e._handler_onMouseMoveRefreshCursor=(i={})=>{let r={x:i.clientX,y:i.clientY};e.isCursorOverWheel=e.wheelHitTest(r),e.refreshCursor()},e._handler_onPointerDown=(i={})=>{let r={x:i.clientX,y:i.clientY};if(!e.isInteractive||!e.wheelHitTest(r))return;i.preventDefault(),e.dragStart(r),t.setPointerCapture(i.pointerId),t.addEventListener("pointermove",n),t.addEventListener("pointerup",s),t.addEventListener("pointercancel",s),t.addEventListener("pointerout",s);function n(a={}){a.preventDefault(),e.dragMove({x:a.clientX,y:a.clientY})}function s(a={}){a.preventDefault(),t.releasePointerCapture(a.pointerId),t.removeEventListener("pointermove",n),t.removeEventListener("pointerup",s),t.removeEventListener("pointercancel",s),t.removeEventListener("pointerout",s),e.dragEnd()}},e._handler_onMouseDown=(i={})=>{let r={x:i.clientX,y:i.clientY};if(!e.isInteractive||!e.wheelHitTest(r))return;e.dragStart(r),document.addEventListener("mousemove",n),document.addEventListener("mouseup",s);function n(a={}){a.preventDefault(),e.dragMove({x:a.clientX,y:a.clientY})}function s(a={}){a.preventDefault(),document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",s),e.dragEnd()}},e._handler_onTouchStart=(i={})=>{let r={x:i.targetTouches[0].clientX,y:i.targetTouches[0].clientY};if(!e.isInteractive||!e.wheelHitTest(r))return;i.preventDefault(),e.dragStart(r),t.addEventListener("touchmove",n),t.addEventListener("touchend",s),t.addEventListener("touchcancel",s);function n(a={}){a.preventDefault(),e.dragMove({x:a.targetTouches[0].clientX,y:a.targetTouches[0].clientY})}function s(a={}){a.preventDefault(),t.removeEventListener("touchmove",n),t.removeEventListener("touchend",s),t.removeEventListener("touchcancel",s),e.dragEnd()}},"PointerEvent"in window?(t.addEventListener("pointerdown",e._handler_onPointerDown),t.addEventListener("pointermove",e._handler_onPointerMoveRefreshCursor)):(t.addEventListener("touchstart",e._handler_onTouchStart),t.addEventListener("mousedown",e._handler_onMouseDown),t.addEventListener("mousemove",e._handler_onMouseMoveRefreshCursor))}var Vt=class{constructor(e,t={}){if(!ge(e))throw new Error("wheel must be an instance of Wheel");if(!ge(t)&&t!==null)throw new Error("props must be an Object or null");this._wheel=e;for(let i of Object.keys(m.item))this["_"+i]=m.item[i];t?this.init(t):this.init(m.item)}init(e={}){this.backgroundColor=e.backgroundColor,this.image=e.image,this.imageRadius=e.imageRadius,this.imageRotation=e.imageRotation,this.imageScale=e.imageScale,this.label=e.label,this.labelColor=e.labelColor,this.value=e.value,this.weight=e.weight}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){typeof e=="string"?this._backgroundColor=e:this._backgroundColor=m.item.backgroundColor,this._wheel.refresh()}get image(){return this._image}set image(e){let t;typeof e=="string"?(t=new Image,t.src=e,t.onload=i=>this._wheel.refresh()):t=m.item.image,this._image=t,this._wheel.refresh()}get imageRadius(){return this._imageRadius}set imageRadius(e){typeof e=="number"?this._imageRadius=e:this._imageRadius=m.item.imageRadius,this._wheel.refresh()}get imageRotation(){return this._imageRotation}set imageRotation(e){typeof e=="number"?this._imageRotation=e:this._imageRotation=m.item.imageRotation,this._wheel.refresh()}get imageScale(){return this._imageScale}set imageScale(e){typeof e=="number"?this._imageScale=e:this._imageScale=m.item.imageScale,this._wheel.refresh()}get label(){return this._label}set label(e){typeof e=="string"?this._label=e:this._label=m.item.label,this._wheel.refresh()}get labelColor(){return this._labelColor}set labelColor(e){typeof e=="string"?this._labelColor=e:this._labelColor=m.item.labelColor,this._wheel.refresh()}get value(){return this._value}set value(e){this._value=e}get weight(){return this._weight}set weight(e){typeof e=="number"?this._weight=e:this._weight=m.item.weight}getIndex(){let e=this._wheel.items.findIndex(t=>t===this);if(e===-1)throw new Error("Item not found in parent Wheel");return e}getCenterAngle(){let e=this._wheel.getItemAngles()[this.getIndex()];return e.start+(e.end-e.start)/2}getStartAngle(){return this._wheel.getItemAngles()[this.getIndex()].start}getEndAngle(){return this._wheel.getItemAngles()[this.getIndex()].end}getRandomAngle(){return vt(this.getStartAngle(),this.getEndAngle())}},Wt=class{constructor(e,t={}){if(this._frameRequestId=null,this._rotationSpeed=0,this._rotationDirection=1,!(e instanceof Element))throw new Error("container must be an instance of Element");if(!ge(t)&&t!==null)throw new Error("props must be an Object or null");this._canvasContainer=e,this.canvas=document.createElement("canvas"),this._context=this.canvas.getContext("2d"),this.addCanvas(),Mt(this);for(let i of Object.keys(m.wheel))this["_"+i]=m.wheel[i];t?this.init(t):this.init(m.wheel)}init(e={}){this._isInitialising=!0,this.borderColor=e.borderColor,this.borderWidth=e.borderWidth,this.debug=e.debug,this.image=e.image,this.isInteractive=e.isInteractive,this.itemBackgroundColors=e.itemBackgroundColors,this.itemLabelAlign=e.itemLabelAlign,this.itemLabelBaselineOffset=e.itemLabelBaselineOffset,this.itemLabelColors=e.itemLabelColors,this.itemLabelFont=e.itemLabelFont,this.itemLabelFontSizeMax=e.itemLabelFontSizeMax,this.itemLabelRadius=e.itemLabelRadius,this.itemLabelRadiusMax=e.itemLabelRadiusMax,this.itemLabelRotation=e.itemLabelRotation,this.items=e.items,this.lineColor=e.lineColor,this.lineWidth=e.lineWidth,this.pixelRatio=e.pixelRatio,this.rotationSpeedMax=e.rotationSpeedMax,this.radius=e.radius,this.rotation=e.rotation,this.rotationResistance=e.rotationResistance,this.offset=e.offset,this.onCurrentIndexChange=e.onCurrentIndexChange,this.onRest=e.onRest,this.onSpin=e.onSpin,this.overlayImage=e.overlayImage,this.pointerAngle=e.pointerAngle}addCanvas(){this._canvasContainer.appendChild(this.canvas)}removeCanvas(){this._canvasContainer.removeChild(this.canvas)}remove(){window.cancelAnimationFrame(this._frameRequestId),Et(this),this.removeCanvas()}resize(){let[e,t]=[this._canvasContainer.clientWidth*this.getActualPixelRatio(),this._canvasContainer.clientHeight*this.getActualPixelRatio()],i=Math.min(e,t),r={w:i-i*this.offset.w,h:i-i*this.offset.h},n=Math.min(e/r.w,t/r.h);this._size=Math.max(r.w*n,r.h*n),this.canvas.style.width=this._canvasContainer.clientWidth+"px",this.canvas.style.height=this._canvasContainer.clientHeight+"px",this.canvas.width=e,this.canvas.height=t,this._center={x:e/2+e*this.offset.w,y:t/2+t*this.offset.h},this._actualRadius=this._size/2*this.radius,this.itemLabelFontSize=this.itemLabelFontSizeMax*(this._size/500),this.labelMaxWidth=this._actualRadius*(this.itemLabelRadius-this.itemLabelRadiusMax);for(let s of this._items)this.itemLabelFontSize=Math.min(this.itemLabelFontSize,wt(s.label,this.itemLabelFont,this.labelMaxWidth,this._context));this.refresh()}draw(e=0){this._frameRequestId=null;let t=this._context;t.clearRect(0,0,this.canvas.width,this.canvas.height),this.animateRotation(e);let i=this.getItemAngles(this._rotation),r=this.getActualBorderWidth();t.textBaseline="middle",t.textAlign=this.itemLabelAlign,t.font=this.itemLabelFontSize+"px "+this.itemLabelFont,t.save();for(let[n,s]of i.entries()){let a=new Path2D;a.moveTo(this._center.x,this._center.y),a.arc(this._center.x,this._center.y,this._actualRadius-r/2,J(s.start+-90),J(s.end+-90)),this._items[n].path=a}this.drawItemBackgrounds(t,i),this.drawItemImages(t,i),this.drawItemLines(t,i),this.drawItemLabels(t,i),this.drawBorder(t),this.drawImage(t,this._image,!1),this.drawImage(t,this._overlayImage,!0),this.drawPointerLine(t),this.drawDragEvents(t),this._isInitialising=!1}drawItemBackgrounds(e,t=[]){var i;for(let[r,n]of t.entries()){let s=this._items[r];e.fillStyle=(i=s.backgroundColor)!=null?i:this.itemBackgroundColors[r%this.itemBackgroundColors.length],e.fill(s.path)}}drawItemImages(e,t=[]){for(let[i,r]of t.entries()){let n=this._items[i];if(!Oe(n.image))return;e.save(),e.clip(n.path);let s=r.start+(r.end-r.start)/2;e.translate(this._center.x+Math.cos(J(s+-90))*(this._actualRadius*n.imageRadius),this._center.y+Math.sin(J(s+-90))*(this._actualRadius*n.imageRadius)),e.rotate(J(s+n.imageRotation));let a=this._size/500*n.image.width*n.imageScale,l=this._size/500*n.image.height*n.imageScale,u=-a/2,h=-l/2;e.drawImage(n.image,u,h,a,l),e.restore()}}drawImage(e,t,i=!1){if(!Oe(t))return;e.translate(this._center.x,this._center.y),i||e.rotate(J(this._rotation));let r=i?this._size:this._size*this.radius,n=-(r/2);e.drawImage(t,n,n,r,r),e.resetTransform()}drawPointerLine(e){!this.debug||(e.translate(this._center.x,this._center.y),e.rotate(J(this._pointerAngle+-90)),e.beginPath(),e.moveTo(0,0),e.lineTo(this._actualRadius*2,0),e.strokeStyle=le.pointerLineColor,e.lineWidth=2,e.stroke(),e.resetTransform())}drawBorder(e){if(this.borderWidth<=0)return;let t=this.getActualBorderWidth(),i=this._borderColor||"transparent";e.beginPath(),e.strokeStyle=i,e.lineWidth=t,e.arc(this._center.x,this._center.y,this._actualRadius-t/2,0,2*Math.PI),e.stroke(),this.debug&&(e.beginPath(),e.strokeStyle=e.strokeStyle=le.labelRadiusColor,e.lineWidth=1,e.arc(this._center.x,this._center.y,this._actualRadius*this.itemLabelRadius,0,2*Math.PI),e.stroke(),e.beginPath(),e.strokeStyle=e.strokeStyle=le.labelRadiusColor,e.lineWidth=1,e.arc(this._center.x,this._center.y,this._actualRadius*this.itemLabelRadiusMax,0,2*Math.PI),e.stroke())}drawItemLines(e,t=[]){if(this.lineWidth<=0)return;let i=this.lineWidth/500*this._size,r=this.getActualBorderWidth();e.translate(this._center.x,this._center.y);for(let n of t)e.rotate(J(n.start+-90)),e.beginPath(),e.moveTo(0,0),e.lineTo(this._actualRadius-r,0),e.strokeStyle=this.lineColor,e.lineWidth=i,e.stroke(),e.rotate(-J(n.start+-90));e.resetTransform()}drawItemLabels(e,t=[]){let i=this.itemLabelFontSize*-this.itemLabelBaselineOffset;for(let[r,n]of t.entries()){let s=this._items[r],a=s.labelColor||this._itemLabelColors[r%this._itemLabelColors.length]||"transparent";if(s.label.trim()===""||a==="transparent")continue;e.save(),e.clip(s.path);let l=n.start+(n.end-n.start)/2;e.translate(this._center.x+Math.cos(J(l+-90))*(this._actualRadius*this.itemLabelRadius),this._center.y+Math.sin(J(l+-90))*(this._actualRadius*this.itemLabelRadius)),e.rotate(J(l+-90)),e.rotate(J(this.itemLabelRotation)),this.debug&&(e.beginPath(),e.moveTo(0,0),e.lineTo(-this.labelMaxWidth,0),e.strokeStyle=le.labelOutlineColor,e.lineWidth=1,e.stroke(),e.strokeRect(0,-this.itemLabelFontSize/2,-this.labelMaxWidth,this.itemLabelFontSize)),e.fillStyle=a,e.fillText(s.label,0,i),e.restore()}}drawDragEvents(e){var t;if(!this.debug||!((t=this.dragEvents)!=null&&t.length))return;let i=[...this.dragEvents].reverse();for(let[r,n]of i.entries()){let s=r/this.dragEvents.length*100;e.beginPath(),e.arc(n.x,n.y,5,0,2*Math.PI),e.fillStyle=`hsl(${le.dragEventHue},100%,${s}%)`,e.strokeStyle="#000",e.lineWidth=.5,e.fill(),e.stroke()}}animateRotation(e=0){if(this._spinToTimeEnd){if(e>=this._spinToTimeEnd){this.rotation=this._spinToEndRotation,this._spinToTimeEnd=void 0,this.raiseEvent_onRest();return}this.refresh();let t=this._spinToTimeEnd-this._spinToTimeStart,i=(e-this._spinToTimeStart)/t;i=i<0?0:i;let r=this._spinToEndRotation-this._spinToStartRotation;this.rotation=this._spinToStartRotation+r*this._spinToEasingFunction(i);return}if(this._rotationSpeed!==0){this.refresh(),this._lastFrameTime===void 0&&(this._lastFrameTime=e);let t=e-this._lastFrameTime;t>0&&(this.rotation+=t/1e3*this._rotationSpeed%360,this._rotationSpeed=this.getRotationSpeedPlusDrag(t),this._rotationSpeed===0&&this.raiseEvent_onRest(),this._lastFrameTime=e);return}this._lastFrameTime=void 0}getRotationSpeedPlusDrag(e=0){let t=this._rotationSpeed+this.rotationResistance*(e/1e3)*this._rotationDirection;return this._rotationDirection===1&&t<0||this._rotationDirection===-1&&t>=0?0:t}spin(e=0){if(!Y(e))throw new Error("rotationSpeed must be a number");this.setSpeedSpeed(e,"spin")}spinTo(e=0,t=0,i=null){if(Number.isNaN(e))throw new Error("Error: newRotation parameter is NaN");this.stop(),this.animate(e,t,i),this.raiseEvent_onSpin({method:"spinto",targetRotation:e,duration:t})}spinToItem(e=0,t=0,i=!0,r=1,n=1,s=null){this.stop();let a=i?this.items[e].getCenterAngle():this.items[e].getRandomAngle(),l=Rt(this.rotation,a-this._pointerAngle,n);l+=r*360*n,this.animate(l,t,s),this.raiseEvent_onSpin({method:"spintoitem",targetItemIndex:e,targetRotation:l,duration:t})}animate(e,t,i){this._spinToStartRotation=this.rotation,this._spinToEndRotation=e,this._spinToTimeStart=performance.now(),this._spinToTimeEnd=this._spinToTimeStart+t,this._spinToEasingFunction=i||kt,this.refresh()}stop(){this._rotationSpeed=0,this._spinToTimeEnd=void 0}getActualBorderWidth(){return this.borderWidth/500*this._size}getActualPixelRatio(){return this._pixelRatio!==0?this._pixelRatio:window.devicePixelRatio}wheelHitTest(e={x:0,y:0}){let t=be(e,this.canvas,this.getActualPixelRatio());return yt(t,this._center.x,this._center.y,this._actualRadius)}refreshCursor(){if(this.isInteractive){if(this.isDragging){this.canvas.style.cursor="grabbing";return}if(this.isCursorOverWheel){this.canvas.style.cursor="grab";return}}this.canvas.style.cursor=""}getAngleFromCenter(e={x:0,y:0}){return(xt(this._center.x,this._center.y,e.x,e.y)+90)%360}getCurrentIndex(){return this._currentIndex}refreshCurrentIndex(e=[]){this._items.length===0&&(this._currentIndex=-1);for(let[t,i]of e.entries())if(bt(this._pointerAngle,i.start%360,i.end%360)){if(this._currentIndex===t)break;this._currentIndex=t,this._isInitialising||this.raiseEvent_onCurrentIndexChange();break}}getItemAngles(e=0){let t=0;for(let a of this.items)t+=a.weight;let i=360/t,r,n=e,s=[];for(let a of this._items)r=a.weight*i,s.push({start:n,end:n+r}),n+=r;return this._items.length>1&&(s[s.length-1].end=s[0].start+360),s}refresh(){this._frameRequestId===null&&(this._frameRequestId=window.requestAnimationFrame(this.draw.bind(this)))}limitSpeed(e=0,t=0){let i=Math.min(e,t);return Math.max(i,-t)}setSpeedSpeed(e=0,t=""){this.stop(),this._rotationSpeed=this.limitSpeed(e,this._rotationSpeedMax),this._rotationDirection=this._rotationSpeed>=0?1:-1,this._rotationSpeed!==0&&this.raiseEvent_onSpin({method:t,rotationSpeed:this._rotationSpeed,rotationResistance:this._rotationResistance}),this.refresh()}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=w({val:e,isValid:typeof e=="string",errorMessage:"Wheel.borderColor must be a string",defaultValue:m.wheel.borderColor}),this.refresh()}get borderWidth(){return this._borderWidth}set borderWidth(e){this._borderWidth=w({val:e,isValid:Y(e),errorMessage:"Wheel.borderWidth must be a number",defaultValue:m.wheel.borderWidth}),this.refresh()}get debug(){return this._debug}set debug(e){this._debug=w({val:e,isValid:typeof e=="boolean",errorMessage:"Wheel.debug must be a boolean",defaultValue:m.wheel.debug}),this.refresh()}get image(){var e,t;return(t=(e=this._image)==null?void 0:e.src)!=null?t:null}set image(e){this._image=w({val:e,isValid:typeof e=="string"||e===null,errorMessage:"Wheel.image must be a url (string) or null",defaultValue:m.wheel.image,action:()=>{if(e===null)return null;let t=new Image;return t.src=e,t.onload=i=>this.refresh(),t}}),this.refresh()}get isInteractive(){return this._isInteractive}set isInteractive(e){this._isInteractive=w({val:e,isValid:typeof e=="boolean",errorMessage:"Wheel.isInteractive must be a boolean",defaultValue:m.wheel.isInteractive}),this.refreshCursor()}get itemBackgroundColors(){return this._itemBackgroundColors}set itemBackgroundColors(e){this._itemBackgroundColors=w({val:e,isValid:Array.isArray(e),errorMessage:"Wheel.itemBackgroundColors must be an array",defaultValue:m.wheel.itemBackgroundColors}),this.refresh()}get itemLabelAlign(){return this._itemLabelAlign}set itemLabelAlign(e){this._itemLabelAlign=w({val:e,isValid:typeof e=="string",errorMessage:"Wheel.itemLabelAlign must be a string",defaultValue:m.wheel.itemLabelAlign}),this.refresh()}get itemLabelBaselineOffset(){return this._itemLabelBaselineOffset}set itemLabelBaselineOffset(e){this._itemLabelBaselineOffset=w({val:e,isValid:Y(e),errorMessage:"Wheel.itemLabelBaselineOffset must be a number",defaultValue:m.wheel.itemLabelBaselineOffset}),this.resize()}get itemLabelColors(){return this._itemLabelColors}set itemLabelColors(e){this._itemLabelColors=w({val:e,isValid:Array.isArray(e),errorMessage:"Wheel.itemLabelColors must be an array",defaultValue:m.wheel.itemLabelColors}),this.refresh()}get itemLabelFont(){return this._itemLabelFont}set itemLabelFont(e){this._itemLabelFont=w({val:e,isValid:typeof e=="string",errorMessage:"Wheel.itemLabelFont must be a string",defaultValue:m.wheel.itemLabelFont}),this.resize()}get itemLabelFontSizeMax(){return this._itemLabelFontSizeMax}set itemLabelFontSizeMax(e){this._itemLabelFontSizeMax=w({val:e,isValid:Y(e),errorMessage:"Wheel.itemLabelFontSizeMax must be a number",defaultValue:m.wheel.itemLabelFontSizeMax}),this.resize()}get itemLabelRadius(){return this._itemLabelRadius}set itemLabelRadius(e){this._itemLabelRadius=w({val:e,isValid:Y(e),errorMessage:"Wheel.itemLabelRadius must be a number",defaultValue:m.wheel.itemLabelRadius}),this.resize()}get itemLabelRadiusMax(){return this._itemLabelRadiusMax}set itemLabelRadiusMax(e){this._itemLabelRadiusMax=w({val:e,isValid:Y(e),errorMessage:"Wheel.itemLabelRadiusMax must be a number",defaultValue:m.wheel.itemLabelRadiusMax}),this.resize()}get itemLabelRotation(){return this._itemLabelRotation}set itemLabelRotation(e){this._itemLabelRotation=w({val:e,isValid:Y(e),errorMessage:"Wheel.itemLabelRotation must be a number",defaultValue:m.wheel.itemLabelRotation}),this.refresh()}get items(){return this._items}set items(e){this._items=w({val:e,isValid:Array.isArray(e),errorMessage:"Wheel.items must be an array of Items",defaultValue:m.wheel.items,action:()=>{let t=[];for(let i of e)t.push(new Vt(this,{backgroundColor:i.backgroundColor,image:i.image,imageRadius:i.imageRadius,imageRotation:i.imageRotation,imageScale:i.imageScale,label:i.label,labelColor:i.labelColor,value:i.value,weight:i.weight}));return t}}),this.refreshCurrentIndex(this.getItemAngles(this._rotation))}get lineColor(){return this._lineColor}set lineColor(e){this._lineColor=w({val:e,isValid:typeof e=="string",errorMessage:"Wheel.lineColor must be a string",defaultValue:m.wheel.lineColor}),this.refresh()}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=w({val:e,isValid:Y(e),errorMessage:"Wheel.lineWidth must be a number",defaultValue:m.wheel.lineWidth}),this.refresh()}get offset(){return this._offset}set offset(e){this._offset=w({val:e,isValid:ge(e),errorMessage:"Wheel.offset must be an object",defaultValue:m.wheel.offset}),this.resize()}get onCurrentIndexChange(){return this._onCurrentIndexChange}set onCurrentIndexChange(e){this._onCurrentIndexChange=w({val:e,isValid:typeof e=="function"||e===null,errorMessage:"Wheel.onCurrentIndexChange must be a function or null",defaultValue:m.wheel.onCurrentIndexChange})}get onRest(){return this._onRest}set onRest(e){this._onRest=w({val:e,isValid:typeof e=="function"||e===null,errorMessage:"Wheel.onRest must be a function or null",defaultValue:m.wheel.onRest})}get onSpin(){return this._onSpin}set onSpin(e){this._onSpin=w({val:e,isValid:typeof e=="function"||e===null,errorMessage:"Wheel.onSpin must be a function or null",defaultValue:m.wheel.onSpin})}get overlayImage(){var e,t;return(t=(e=this._overlayImage)==null?void 0:e.src)!=null?t:null}set overlayImage(e){this._overlayImage=w({val:e,isValid:typeof e=="string"||e===null,errorMessage:"Wheel.overlayImage must be a url (string) or null",defaultValue:m.wheel.overlayImage,action:()=>{if(e===null)return null;let t=new Image;return t.src=e,t.onload=i=>this.refresh(),t}}),this.refresh()}get pixelRatio(){return this._pixelRatio}set pixelRatio(e){this._pixelRatio=w({val:e,isValid:Y(e),errorMessage:"Wheel.pixelRatio must be a number",defaultValue:m.wheel.pixelRatio}),this.resize()}get pointerAngle(){return this._pointerAngle}set pointerAngle(e){this._pointerAngle=w({val:e,isValid:Y(e)&&e>=0,errorMessage:"Wheel.pointerAngle must be a number between 0 and 360",defaultValue:m.wheel.pointerAngle,action:()=>e%360}),this.debug&&this.refresh()}get radius(){return this._radius}set radius(e){this._radius=w({val:e,isValid:Y(e),errorMessage:"Wheel.radius must be a number",defaultValue:m.wheel.radius}),this.resize()}get rotation(){return this._rotation}set rotation(e){this._rotation=w({val:e,isValid:Y(e),errorMessage:"Wheel.rotation must be a number",defaultValue:m.wheel.rotation}),this.refreshCurrentIndex(this.getItemAngles(this._rotation)),this.refresh()}get rotationResistance(){return this._rotationResistance}set rotationResistance(e){this._rotationResistance=w({val:e,isValid:Y(e),errorMessage:"Wheel.rotationResistance must be a number",defaultValue:m.wheel.rotationResistance})}get rotationSpeed(){return this._rotationSpeed}get rotationSpeedMax(){return this._rotationSpeedMax}set rotationSpeedMax(e){this._rotationSpeedMax=w({val:e,isValid:Y(e)&&e>=0,errorMessage:"Wheel.rotationSpeedMax must be a number >= 0",defaultValue:m.wheel.rotationSpeedMax})}dragStart(e={x:0,y:0}){let t=be(e,this.canvas,this.getActualPixelRatio());this.isDragging=!0,this.stop(),this.dragEvents=[{distance:0,x:t.x,y:t.y,now:performance.now()}],this.refreshCursor()}dragMove(e={x:0,y:0}){let t=be(e,this.canvas,this.getActualPixelRatio()),i=this.getAngleFromCenter(t),r=this.dragEvents[0],n=this.getAngleFromCenter(r),s=It(n,i);this.dragEvents.unshift({distance:s,x:t.x,y:t.y,now:performance.now()}),this.debug&&this.dragEvents.length>=40&&this.dragEvents.pop(),this.rotation+=s}dragEnd(){this.isDragging=!1;let e=0,t=performance.now();for(let[i,r]of this.dragEvents.entries()){if(!this.isDragEventTooOld(t,r)){e+=r.distance;continue}this.dragEvents.length=i;break}this.refreshCursor(),e!==0&&this.setSpeedSpeed(e*(1e3/250),"interact")}isDragEventTooOld(e=0,t={}){return e-t.now>250}raiseEvent_onCurrentIndexChange(e={}){var t;(t=this.onCurrentIndexChange)==null||t.call(this,ve({type:"currentIndexChange",currentIndex:this._currentIndex},e))}raiseEvent_onRest(e={}){var t;(t=this.onRest)==null||t.call(this,ve({type:"rest",currentIndex:this._currentIndex,rotation:this._rotation},e))}raiseEvent_onSpin(e={}){var t;(t=this.onSpin)==null||t.call(this,ve({type:"spin"},e))}};function Fe(e){let t,i=e[0].text+"",r;return{c(){t=d("div"),r=oe(i),this.h()},l(n){t=c(n,"DIV",{class:!0});var s=L(t);r=he(s,i),s.forEach(A),this.h()},h(){g(t,"class","caption whitespace-pre-wrap text-sm")},m(n,s){q(n,t,s),o(t,r)},p(n,s){s&1&&i!==(i=n[0].text+"")&&Ae(r,i)},d(n){n&&A(t)}}}function zt(e){let t,i,r,n=(e[0].label??"")+"",s,a,l,u,h,f,C=e[0].percentage+"",S,k,x=e[0].text!==""&&Fe(e);return{c(){t=d("div"),i=d("div"),r=d("div"),s=oe(n),a=T(),x&&x.c(),u=T(),h=d("div"),f=d("div"),S=oe(C),k=oe("%"),this.h()},l(_){t=c(_,"DIV",{class:!0});var b=L(t);i=c(b,"DIV",{class:!0,style:!0});var B=L(i);r=c(B,"DIV",{});var N=L(r);s=he(N,n),N.forEach(A),a=V(B),x&&x.l(B),B.forEach(A),u=V(b),h=c(b,"DIV",{class:!0});var W=L(h);f=c(W,"DIV",{});var z=L(f);S=he(z,C),k=he(z,"%"),z.forEach(A),W.forEach(A),b.forEach(A),this.h()},h(){g(i,"class","flex flex-col outcome-left pl-2 svelte-17o0554"),g(i,"style",l=`border-left: 8px solid ${e[1]}`),g(h,"class","flex flex-col justify-center"),g(t,"class","flex flex-row justify-between")},m(_,b){q(_,t,b),o(t,i),o(i,r),o(r,s),o(i,a),x&&x.m(i,null),o(t,u),o(t,h),o(h,f),o(f,S),o(f,k)},p(_,[b]){b&1&&n!==(n=(_[0].label??"")+"")&&Ae(s,n),_[0].text!==""?x?x.p(_,b):(x=Fe(_),x.c(),x.m(i,null)):x&&(x.d(1),x=null),b&2&&l!==(l=`border-left: 8px solid ${_[1]}`)&&g(i,"style",l),b&1&&C!==(C=_[0].percentage+"")&&Ae(S,C)},i:ue,o:ue,d(_){_&&A(t),x&&x.d()}}}function Dt(e,t,i){let{outcomeData:r}=t,{color:n}=t;return e.$$set=s=>{"outcomeData"in s&&i(0,r=s.outcomeData),"color"in s&&i(1,n=s.color)},[r,n]}class Bt extends Xe{constructor(t){super(),Ze(this,t,Dt,zt,Ke,{outcomeData:0,color:1})}}const{window:ye}=dt;function Pe(e,t,i){const r=e.slice();r[27]=t[i],r[31]=i;const n=r[31]-Math.floor(r[31]/r[9].length)*r[9].length;r[28]=n;const s=r[9][r[28]];return r[29]=s,r}function we(e){const t=e.slice(),i=!t[4]&&Ht==="keyholder";return t[26]=i,t}function Ot(e){let t,i,r,n,s='<h4 class="mb-0">Extended Wheel of Fortune</h4> <span class="caption">Developer: @strawberria</span>',a,l,u=`Try your luck and spin the <b>extended</b> wheel of fortune! <br/>
                        Now supporting additional actions and multiple wheels with individual cooldowns!`,h,f,C,S,k,x,_,b,B,N="Select",W,z,Z="Choose which wheel to spin with",O,I,v,p,R="Task Wheel",F,y="Freeze",M,Q="Pillory",K,G,D,P="<span>Spin the wheel!</span>",te,se,ie,ae,Re,j=!e[6]&&qe(),E=e[6]&&Ne(we(e));return{c(){t=d("div"),i=d("div"),r=d("div"),n=d("div"),n.innerHTML=s,a=T(),l=d("div"),l.innerHTML=u,h=T(),f=d("div"),S=T(),k=d("hr"),x=T(),_=d("div"),b=d("div"),B=d("div"),B.textContent=N,W=T(),z=d("div"),z.textContent=Z,O=T(),I=d("div"),v=d("select"),p=d("option"),p.textContent=R,F=d("option"),F.textContent=y,M=d("option"),M.textContent=Q,K=T(),G=d("div"),D=d("button"),D.innerHTML=P,te=T(),j&&j.c(),se=T(),E&&E.c(),this.h()},l(H){t=c(H,"DIV",{class:!0});var ee=L(t);i=c(ee,"DIV",{class:!0});var de=L(i);r=c(de,"DIV",{class:!0});var X=L(r);n=c(X,"DIV",{class:!0,"data-svelte-h":!0}),U(n)!=="svelte-1podld8"&&(n.innerHTML=s),a=V(X),l=c(X,"DIV",{class:!0,"data-svelte-h":!0}),U(l)!=="svelte-1b8f23k"&&(l.innerHTML=u),h=V(X),f=c(X,"DIV",{class:!0}),L(f).forEach(A),S=V(X),k=c(X,"HR",{}),x=V(X),_=c(X,"DIV",{class:!0});var ce=L(_);b=c(ce,"DIV",{class:!0});var ne=L(b);B=c(ne,"DIV",{"data-svelte-h":!0}),U(B)!=="svelte-80uym4"&&(B.textContent=N),W=V(ne),z=c(ne,"DIV",{class:!0,"data-svelte-h":!0}),U(z)!=="svelte-wcdkar"&&(z.textContent=Z),O=V(ne),I=c(ne,"DIV",{class:!0});var Le=L(I);v=c(Le,"SELECT",{class:!0});var me=L(v);p=c(me,"OPTION",{"data-svelte-h":!0}),U(p)!=="svelte-uave17"&&(p.textContent=R),F=c(me,"OPTION",{"data-svelte-h":!0}),U(F)!=="svelte-1wuskqe"&&(F.textContent=y),M=c(me,"OPTION",{"data-svelte-h":!0}),U(M)!=="svelte-134j56c"&&(M.textContent=Q),me.forEach(A),Le.forEach(A),ne.forEach(A),K=V(ce),G=c(ce,"DIV",{class:!0});var ke=L(G);D=c(ke,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),U(D)!=="svelte-yssfkd"&&(D.innerHTML=P),ke.forEach(A),ce.forEach(A),te=V(X),j&&j.l(X),X.forEach(A),se=V(de),E&&E.l(de),de.forEach(A),ee.forEach(A),this.h()},h(){g(n,"class","flex flex-row items-end justify-between space-x-1 mb-2"),g(l,"class","caption mb-2"),g(f,"class","grow mt-1 wheel-container svelte-1fmkzzh"),Ge(()=>e[18].call(f)),g(z,"class","caption mb-2"),p.__value="add_time",_e(p,p.__value),F.__value="freeze",_e(F,F.__value),M.__value="pillory",_e(M,M.__value),g(v,"class","form-control"),g(I,"class","w-full"),g(b,"class","grow"),g(D,"type","button"),g(D,"class","btn btn-primary btn-lg"),g(G,"class","flex flex-col justify-center ml-4 mr-4"),g(_,"class","w-full flex flex-row items-stretch space-x-4"),g(r,"class","h-full flex flex-col svelte-1fmkzzh"),fe(r,"card-horizontal",e[6]),g(i,"class","w-full h-full flex flex-row"),g(t,"class","card-content grow svelte-1fmkzzh"),fe(t,"card-wrapper-desktop",e[6])},m(H,ee){q(H,t,ee),o(t,i),o(i,r),o(r,n),o(r,a),o(r,l),o(r,h),o(r,f),e[17](f),C=et(f,e[18].bind(f)),o(r,S),o(r,k),o(r,x),o(r,_),o(_,b),o(b,B),o(b,W),o(b,z),o(b,O),o(b,I),o(I,v),o(v,p),o(v,F),o(v,M),o(_,K),o(_,G),o(G,D),o(r,te),j&&j.m(r,null),o(i,se),E&&E.m(i,null),ie=!0,ae||(Re=xe(D,"click",e[12]),ae=!0)},p(H,ee){H[6]?j&&(j.d(1),j=null):j||(j=qe(),j.c(),j.m(r,null)),(!ie||ee[0]&64)&&fe(r,"card-horizontal",H[6]),H[6]?E?(E.p(we(H),ee),ee[0]&64&&$(E,1)):(E=Ne(we(H)),E.c(),$(E,1),E.m(i,null)):E&&(Ce(),re(E,1,1,()=>{E=null}),Ie()),(!ie||ee[0]&64)&&fe(t,"card-wrapper-desktop",H[6])},i(H){ie||($(E),ie=!0)},o(H){re(E),ie=!1},d(H){H&&A(t),e[17](null),C(),j&&j.d(),E&&E.d(),ae=!1,Re()}}}function Ft(e){let t,i,r,n,s,a;return{c(){t=d("div"),i=d("img"),n=T(),s=d("div"),a=oe(e[3]),this.h()},l(l){t=c(l,"DIV",{class:!0});var u=L(t);i=c(u,"IMG",{src:!0,alt:!0}),n=V(u),s=c(u,"DIV",{class:!0});var h=L(s);a=he(h,e[3]),h.forEach(A),u.forEach(A),this.h()},h(){tt(i.src,r=lt)||g(i,"src",r),g(i,"alt","Chaster logo"),g(s,"class","mt-4 caption text-lg"),g(t,"class","w-full h-screen flex flex-col items-center justify-center")},m(l,u){q(l,t,u),o(t,i),o(t,n),o(t,s),o(s,a)},p(l,u){u[0]&8&&Ae(a,l[3])},i:ue,o:ue,d(l){l&&A(t)}}}function qe(e){let t,i,r,n="Outcomes";return{c(){t=d("hr"),i=T(),r=d("div"),r.textContent=n},l(s){t=c(s,"HR",{}),i=V(s),r=c(s,"DIV",{"data-svelte-h":!0}),U(r)!=="svelte-o84tnz"&&(r.textContent=n)},m(s,a){q(s,t,a),q(s,i,a),q(s,r,a)},d(s){s&&(A(t),A(i),A(r))}}}function Ne(e){let t,i,r,n,s="Keyholder OAuth Status:",a,l,u,h,f,C,S,k="Outcomes",x,_,b="View possible outcomes for the wheel",B,N,W;function z(p,R){return p[4]===!0?qt:Pt}let Z=z(e),O=Z(e),I=e[26]&&je(e),v=e[7].outcomes.length>0&&Ue(e);return{c(){t=d("div"),i=d("div"),r=d("div"),n=d("div"),n.textContent=s,a=T(),O.c(),l=T(),I&&I.c(),h=T(),f=d("hr"),C=T(),S=d("div"),S.textContent=k,x=T(),_=d("div"),_.textContent=b,B=T(),v&&v.c(),this.h()},l(p){t=c(p,"DIV",{class:!0,style:!0});var R=L(t);i=c(R,"DIV",{class:!0});var F=L(i);r=c(F,"DIV",{});var y=L(r);n=c(y,"DIV",{"data-svelte-h":!0}),U(n)!=="svelte-kk5wwk"&&(n.textContent=s),a=V(y),O.l(y),y.forEach(A),l=V(F),I&&I.l(F),F.forEach(A),h=V(R),f=c(R,"HR",{}),C=V(R),S=c(R,"DIV",{"data-svelte-h":!0}),U(S)!=="svelte-o84tnz"&&(S.textContent=k),x=V(R),_=c(R,"DIV",{class:!0,"data-svelte-h":!0}),U(_)!=="svelte-1bpz2qz"&&(_.textContent=b),B=V(R),v&&v.l(R),R.forEach(A),this.h()},h(){g(i,"class",u=Ee(`flex flex-row flex-start items-center ${e[26]?"justify-between":"justify-start"}`)+" svelte-1fmkzzh"),g(_,"class","caption mb-2"),g(t,"class","h-full flex flex-col ml-4 something"),g(t,"style",N=`width: calc(${e[1]}px * 1.0)`)},m(p,R){q(p,t,R),o(t,i),o(i,r),o(r,n),o(r,a),O.m(r,null),o(i,l),I&&I.m(i,null),o(t,h),o(t,f),o(t,C),o(t,S),o(t,x),o(t,_),o(t,B),v&&v.m(t,null),W=!0},p(p,R){Z!==(Z=z(p))&&(O.d(1),O=Z(p),O&&(O.c(),O.m(r,null))),p[26]?I?I.p(p,R):(I=je(p),I.c(),I.m(i,null)):I&&(I.d(1),I=null),(!W||R[0]&16&&u!==(u=Ee(`flex flex-row flex-start items-center ${p[26]?"justify-between":"justify-start"}`)+" svelte-1fmkzzh"))&&g(i,"class",u),p[7].outcomes.length>0?v?(v.p(p,R),R[0]&128&&$(v,1)):(v=Ue(p),v.c(),$(v,1),v.m(t,null)):v&&(Ce(),re(v,1,1,()=>{v=null}),Ie()),(!W||R[0]&2&&N!==(N=`width: calc(${p[1]}px * 1.0)`))&&g(t,"style",N)},i(p){W||($(v),W=!0)},o(p){re(v),W=!1},d(p){p&&A(t),O.d(),I&&I.d(),v&&v.d()}}}function Pt(e){let t,i="❌ Missing OAuth permissions!";return{c(){t=d("div"),t.textContent=i,this.h()},l(r){t=c(r,"DIV",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1x4anp2"&&(t.textContent=i),this.h()},h(){g(t,"class","text-red-500")},m(r,n){q(r,t,n)},d(r){r&&A(t)}}}function qt(e){let t,i="✔️ OAuth scopes granted!";return{c(){t=d("div"),t.textContent=i,this.h()},l(r){t=c(r,"DIV",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1y61f57"&&(t.textContent=i),this.h()},h(){g(t,"class","text-green-500")},m(r,n){q(r,t,n)},d(r){r&&A(t)}}}function je(e){let t,i="Authorize Permissions",r,n;return{c(){t=d("button"),t.textContent=i,this.h()},l(s){t=c(s,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),U(t)!=="svelte-196gb9f"&&(t.textContent=i),this.h()},h(){g(t,"type","button"),g(t,"class","btn btn-primary btn-md")},m(s,a){q(s,t,a),r||(n=xe(t,"click",e[13]),r=!0)},p:ue,d(s){s&&A(t),r=!1,n()}}}function Ue(e){let t,i,r,n=Ve(e[7].outcomes),s=[];for(let l=0;l<n.length;l+=1)s[l]=Ye(Pe(e,n,l));const a=l=>re(s[l],1,1,()=>{s[l]=null});return{c(){t=d("div"),i=d("div");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){t=c(l,"DIV",{class:!0});var u=L(t);i=c(u,"DIV",{class:!0});var h=L(i);for(let f=0;f<s.length;f+=1)s[f].l(h);h.forEach(A),u.forEach(A),this.h()},h(){g(i,"class","flex flex-col space-y-1 items-stretch"),g(t,"class","card-content outcomes-list svelte-1fmkzzh")},m(l,u){q(l,t,u),o(t,i);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(i,null);r=!0},p(l,u){if(u[0]&640){n=Ve(l[7].outcomes);let h;for(h=0;h<n.length;h+=1){const f=Pe(l,n,h);s[h]?(s[h].p(f,u),$(s[h],1)):(s[h]=Ye(f),s[h].c(),$(s[h],1),s[h].m(i,null))}for(Ce(),h=n.length;h<s.length;h+=1)a(h);Ie()}},i(l){if(!r){for(let u=0;u<n.length;u+=1)$(s[u]);r=!0}},o(l){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)re(s[u]);r=!1},d(l){l&&A(t),it(s,l)}}}function He(e){let t;return{c(){t=d("hr"),this.h()},l(i){t=c(i,"HR",{class:!0}),this.h()},h(){g(t,"class","mt-0.5 mb-0.5")},m(i,r){q(i,t,r)},d(i){i&&A(t)}}}function Ye(e){let t,i,r,n;t=new Bt({props:{outcomeData:e[27],color:e[29]}});let s=e[31]!==e[7].outcomes.length-1&&He();return{c(){rt(t.$$.fragment),i=T(),s&&s.c(),r=Te()},l(a){st(t.$$.fragment,a),i=V(a),s&&s.l(a),r=Te()},m(a,l){nt(t,a,l),q(a,i,l),s&&s.m(a,l),q(a,r,l),n=!0},p(a,l){const u={};l[0]&128&&(u.outcomeData=a[27]),t.$set(u),a[31]!==a[7].outcomes.length-1?s||(s=He(),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},i(a){n||($(t.$$.fragment,a),n=!0)},o(a){re(t.$$.fragment,a),n=!1},d(a){a&&(A(i),A(r)),at(t,a),s&&s.d(a)}}}function Nt(e){let t,i,r,n,s,a;Ge(e[16]);const l=[Ft,Ot],u=[];function h(f,C){return 1}return i=h(),r=u[i]=l[i](e),{c(){t=d("div"),r.c(),this.h()},l(f){t=c(f,"DIV",{class:!0});var C=L(t);r.l(C),C.forEach(A),this.h()},h(){g(t,"class","container-bg min-w-0 min-h-0 pl-3 pr-3 space-y-2 grow svelte-1fmkzzh")},m(f,C){q(f,t,C),u[i].m(t,null),e[19](t),n=!0,s||(a=xe(ye,"resize",e[16]),s=!0)},p(f,C){r.p(f,C)},i(f){n||($(r),n=!0)},o(f){re(r),n=!1},d(f){f&&A(t),u[i].d(),e[19](null),s=!1,a()}}}const Je="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwbmpsYmpwY2ZlYnFwYXFrcGh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODg1NDM0NTgsImV4cCI6MjAwNDExOTQ1OH0.CsGySz2c8bIWphE6--T51CsmSeBQajfwvBYfTkjviM4",jt="https://bpnjlbjpcfebqpaqkphy.supabase.co/functions/v1/chaster-oauth-store",Ut="https://bpnjlbjpcfebqpaqkphy.supabase.co/functions/v1/wheel-session-get";let Ht="keyholder";const Yt="extensions-318826",Qe="profile%20locks%20shared_locks%20keyholder";function Jt(e,t,i){let r,n;const s=["#fecaca","#fed7aa","#fde68a","#d9f99d","#bbf7d0","#a7f3d0","#99f6e4","#a5f3fc","#bae6fd","#bfdbfe","#c7d2fe","#ddd6fe","#e9d5ff","#f5d0fe","#fbcfe8","#fecdd3"],a=Array(32).fill(0).map(y=>{const M=new Audio(ft);return M.volume=.3,M});let l="",u="Loading extension data...",h=We({outcomes:[],handleText:""});Se(e,h,y=>i(7,r=y));let f=!1;h.update(y=>{const M={outcomes:[{percentage:"5.00",text:"After spending an entire day stumbling through the forest, you find yourself exactly back where you started.",key:"add_time",params:[86400]},{percentage:"10.00",text:"You make significant progress during your exploration, getting closer and closer to civilization.",key:"remove_time",params:[43200]},{percentage:"5.00",text:"",key:"share_link-requirement-increase",params:[12]},{percentage:"20.00",text:"",key:"share_link-add_time-set",params:[14400]},{percentage:"4.50",text:"",key:"pillory-put",params:[]},{percentage:"0.50",text:"",key:"dice-regularitys-set",params:["non_cumulative",3600]},{percentage:"5.00",text:"After spending an entire day stumbling through the forest, you find yourself exactly back where you started.",key:"add_time",params:[86400]},{percentage:"10.00",text:"You make significant progress during your exploration, getting closer and closer to civilization.",key:"remove_time",params:[43200]},{percentage:"5.00",text:"",key:"share_link-requirement-increase",params:[12]},{percentage:"20.00",text:"",key:"share_link-add_time-set",params:[14400]},{percentage:"4.50",text:"",key:"pillory-put",params:[]},{percentage:"0.50",text:"",key:"dice-regularitys-set",params:["non_cumulative",3600]},{percentage:"5.00",text:"After spending an entire day stumbling through the forest, you find yourself exactly back where you started.",key:"add_time",params:[86400]},{percentage:"10.00",text:"You make significant progress during your exploration, getting closer and closer to civilization.",key:"remove_time",params:[43200]},{percentage:"5.00",text:"",key:"share_link-requirement-increase",params:[12]},{percentage:"20.00",text:"",key:"share_link-add_time-set",params:[14400]},{percentage:"4.50",text:"",key:"pillory-put",params:[]},{percentage:"0.50",text:"",key:"dice-regularitys-set",params:["non_cumulative",3600]},{percentage:"5.00",text:"After spending an entire day stumbling through the forest, you find yourself exactly back where you started.",key:"add_time",params:[86400]},{percentage:"10.00",text:"You make significant progress during your exploration, getting closer and closer to civilization.",key:"remove_time",params:[43200]},{percentage:"5.00",text:"",key:"share_link-requirement-increase",params:[12]},{percentage:"20.00",text:"",key:"share_link-add_time-set",params:[14400]},{percentage:"4.50",text:"",key:"pillory-put",params:[]},{percentage:"0.50",text:"",key:"dice-regularitys-set",params:["non_cumulative",3600]}],handleText:""};return M.outcomes.forEach(Q=>{Q.label=ot(Q)}),M});let C="";$e(async()=>{C=window.location.hash.substring(1).split("?")[0];const y=window.location.search,M=new URLSearchParams(y);if(C!=="")l=JSON.parse(decodeURIComponent(C)).mainToken;else{const D=M.get("state");D!==null&&(l=JSON.parse(decodeURIComponent(D)).mainToken)}const Q=M.get("code");if(Q!==null){const D=window.location.href.split("?")[0];await fetch(jt,{method:"POST",headers:{Authorization:`Bearer ${Je}`},body:JSON.stringify({authorizationCode:Q,redirectURI:D,scopes:Qe})});const P=new URL(window.location.href),te=P.searchParams.get("state");P.searchParams.delete("state"),P.searchParams.delete("session_state"),P.searchParams.delete("code"),P.hash=encodeURIComponent(te),history.pushState(null,"",P.toString())}i(3,u="Checking OAuth permissions...");const K=await fetch(Ut,{method:"POST",headers:{Authorization:`Bearer ${Je}`},body:JSON.stringify({mainToken:l})});if(K.status!==200){console.error(`Error retrieving session data: ${await K.text()}`);return}const G=await K.json();i(4,f=G[1]),i(3,u="")});let S=We(void 0);Se(e,S,y=>i(8,n=y));let k;async function x(){k.spinToItem(Math.floor(Math.random()*k.items.length),5e3,!1,5,1,ze)}S.subscribe(_),h.subscribe(_);async function _(){const y=n;if(y===void 0)return;await ht(10);const Q={items:JSON.parse(JSON.stringify(r.outcomes.map((P,te)=>{const se=P.label??"",ie=[ut(se,24),se.length>=32?"...":""].join(""),ae=parseFloat(P.percentage);return{label:ie,weight:ae}}))),pointerAngle:270,itemBackgroundColors:s,itemLabelRadiusMax:.3,itemLabelRadius:.825,itemLabelAlign:"left",itemLabelRotation:180,borderWidth:2,overlayImage:At};y.innerHTML="",k=new Wt(y,Q),window.wheel=k,window.ease=ze;let K=0,G=!1,D;k.onSpin=()=>{let P=0,te=30;clearInterval(D),D=setInterval(()=>{if(G===!0){clearInterval(D),G=!1;return}k._rotation>=P+te&&(P=k._rotation,K=K+1<a.length?K+1:0,a[K].play())},10)},k.onRest=()=>{G=!0,k._rotation=k._rotation-360*Math.floor(k._rotation/360)}}let b,B,N,W,z=0,Z=0,O=!0;function I(){let y=encodeURIComponent(window.location.href.split("#")[0]);const Q=["https://sso.chaster.app/auth/realms/app/protocol/openid-connect/auth?",`client_id=${Yt}&`,`redirect_uri=${y}&`,`response_type=code&${Qe}&state=${C}`].join("");window.location.href=Q}function v(){i(0,b=ye.innerWidth),i(5,B=ye.innerHeight)}function p(y){Me[y?"unshift":"push"](()=>{n=y,S.set(n)})}function R(){N=this.clientWidth,i(1,N)}function F(y){Me[y?"unshift":"push"](()=>{W=y,i(2,W)})}return e.$$.update=()=>{e.$$.dirty[0]&49159&&W!==void 0&&(i(14,z=parseFloat(getComputedStyle(W).fontSize)),i(15,Z=N*2+4*z*4+(4*z+4)),i(6,O=b>Z))},[b,N,W,u,f,B,O,r,n,s,h,S,x,I,z,Z,v,p,R,F]}class ti extends Xe{constructor(t){super(),Ze(this,t,Jt,Nt,Ke,{},null,[-1,-1])}}export{ti as component,ei as universal};
