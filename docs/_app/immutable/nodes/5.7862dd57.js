import{s as te,f as p,g as v,h as C,d as f,j as h,i as j,y as H,o as se,a as V,l as P,F as q,c as A,m as R,k as M,G as N,x as o,M as Q,C as K,n as ee,I as ne,J as ae}from"../chunks/scheduler.6e8049bc.js";import{S as le,i as ie}from"../chunks/index.0fccc1b3.js";import{c as re}from"../chunks/logo.0860a6a8.js";import"../chunks/paths.261d0d7c.js";import{b as oe}from"../chunks/utility.4f0b18bb.js";const ce=!0,De=Object.freeze(Object.defineProperty({__proto__:null,prerender:ce},Symbol.toStringTag,{value:"Module"}));function ue(s){let t,e,a,r='<div class="text-4xl text-center font-bold">Scavenger Codes</div> <div class="caption">Developed by @strawberria</div>',n,l,c,m="Apply a scavenger code below!",S,g,x,d,w,z="Submit",T,D,u,b,E,O,y,Y,B;function F(i,I){if(i[0]==="valid")return ve;if(i[0]==="invalid")return pe;if(i[0]==="used")return me;if(i[0]==="regularity")return fe}let J=F(s),_=J&&J(s);return{c(){t=p("div"),e=p("div"),a=p("div"),a.innerHTML=r,n=V(),l=p("div"),c=p("div"),c.textContent=m,S=V(),g=p("input"),x=V(),d=p("button"),w=p("span"),w.textContent=z,D=V(),u=p("div"),b=p("div"),E=P(s[4]),O=V(),y=p("div"),_&&_.c(),this.h()},l(i){t=v(i,"DIV",{class:!0});var I=C(t);e=v(I,"DIV",{class:!0,style:!0});var k=C(e);a=v(k,"DIV",{class:!0,"data-svelte-h":!0}),q(a)!=="svelte-1b2fqs"&&(a.innerHTML=r),n=A(k),l=v(k,"DIV",{class:!0});var L=C(l);c=v(L,"DIV",{class:!0,"data-svelte-h":!0}),q(c)!=="svelte-1n0sbof"&&(c.textContent=m),S=A(L),g=v(L,"INPUT",{class:!0,style:!0}),L.forEach(f),x=A(k),d=v(k,"BUTTON",{type:!0,class:!0});var G=C(d);w=v(G,"SPAN",{"data-svelte-h":!0}),q(w)!=="svelte-1x2x2ay"&&(w.textContent=z),G.forEach(f),D=A(k),u=v(k,"DIV",{class:!0,style:!0});var U=C(u);b=v(U,"DIV",{class:!0,style:!0});var X=C(b);E=R(X,s[4]),X.forEach(f),O=A(U),y=v(U,"DIV",{style:!0});var Z=C(y);_&&_.l(Z),Z.forEach(f),U.forEach(f),k.forEach(f),I.forEach(f),this.h()},h(){h(a,"class","flex flex-col items-center mb-[1em]"),h(c,"class","text-lg text-center"),h(g,"class","form-control text-center font-mono mb-[em]"),M(g,"font-size","160%"),M(g,"width","12em"),h(l,"class","flex flex-col items-center w-full space-y-[0.25em] mb-[1.5em]"),h(d,"type","button"),h(d,"class","btn btn-primary btn-lg mb-[0.5em]"),d.disabled=T=s[4]!==""||s[3]||s[1].length===0,N(d,"cursor-not-allowed",s[4]!==""||s[3]||s[1].length===0),h(b,"class","caption"),M(b,"min-height","1.5em"),M(y,"min-height","1.5em"),N(y,"text-green-500",s[0]==="valid"),N(y,"text-red-500",s[0]==="invalid"),h(u,"class","space-y-[0.25em] w-full flex flex-col items-center"),M(u,"min-height","3.25em"),h(e,"class","flex flex-col items-center card-content"),M(e,"width","32em"),h(t,"class","w-full h-full flex flex-col items-center justify-center")},m(i,I){j(i,t,I),o(t,e),o(e,a),o(e,n),o(e,l),o(l,c),o(l,S),o(l,g),Q(g,s[1]),o(e,x),o(e,d),o(d,w),o(e,D),o(e,u),o(u,b),o(b,E),o(u,O),o(u,y),_&&_.m(y,null),Y||(B=[K(g,"input",s[6]),K(d,"click",s[5])],Y=!0)},p(i,I){I&2&&g.value!==i[1]&&Q(g,i[1]),I&26&&T!==(T=i[4]!==""||i[3]||i[1].length===0)&&(d.disabled=T),I&26&&N(d,"cursor-not-allowed",i[4]!==""||i[3]||i[1].length===0),I&16&&ee(E,i[4]),J!==(J=F(i))&&(_&&_.d(1),_=J&&J(i),_&&(_.c(),_.m(y,null))),I&1&&N(y,"text-green-500",i[0]==="valid"),I&1&&N(y,"text-red-500",i[0]==="invalid")},d(i){i&&f(t),_&&_.d(),Y=!1,ne(B)}}}function de(s){let t,e,a,r,n,l;return{c(){t=p("div"),e=p("img"),r=V(),n=p("div"),l=P(s[2]),this.h()},l(c){t=v(c,"DIV",{class:!0});var m=C(t);e=v(m,"IMG",{src:!0,alt:!0}),r=A(m),n=v(m,"DIV",{class:!0});var S=C(n);l=R(S,s[2]),S.forEach(f),m.forEach(f),this.h()},h(){ae(e.src,a=re)||h(e,"src",a),h(e,"alt","Chaster logo"),h(n,"class","mt-4 caption text-lg"),h(t,"class","w-full h-screen flex flex-col items-center justify-center")},m(c,m){j(c,t,m),o(t,e),o(t,r),o(t,n),o(n,l)},p(c,m){m&4&&ee(l,c[2])},d(c){c&&f(t)}}}function fe(s){let t;return{c(){t=P("Error: regularity not yet elapsed")},l(e){t=R(e,"Error: regularity not yet elapsed")},m(e,a){j(e,t,a)},d(e){e&&f(t)}}}function me(s){let t;return{c(){t=P("Code already used.")},l(e){t=R(e,"Code already used.")},m(e,a){j(e,t,a)},d(e){e&&f(t)}}}function pe(s){let t;return{c(){t=P("Invalid code specified.")},l(e){t=R(e,"Invalid code specified.")},m(e,a){j(e,t,a)},d(e){e&&f(t)}}}function ve(s){let t;return{c(){t=P("Code successfully applied!")},l(e){t=R(e,"Code successfully applied!")},m(e,a){j(e,t,a)},d(e){e&&f(t)}}}function he(s){let t;function e(n,l){return n[2]!==""?de:ue}let a=e(s),r=a(s);return{c(){t=p("div"),r.c(),this.h()},l(n){t=v(n,"DIV",{class:!0});var l=C(t);r.l(l),l.forEach(f),this.h()},h(){h(t,"class","container-bg w-full h-screen p-4 svelte-rp1h59")},m(n,l){j(n,t,l),r.m(t,null)},p(n,[l]){a===(a=e(n))&&r?r.p(n,l):(r.d(1),r=a(n),r&&(r.c(),r.m(t,null)))},i:H,o:H,d(n){n&&f(t),r.d()}}}const W="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwbmpsYmpwY2ZlYnFwYXFrcGh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODg1NDM0NTgsImV4cCI6MjAwNDExOTQ1OH0.CsGySz2c8bIWphE6--T51CsmSeBQajfwvBYfTkjviM4",$="https://bpnjlbjpcfebqpaqkphy.supabase.co/functions/v1/chaster_utilities";function _e(s,t,e){let a=new Date,r,n="",l="",c="Loading extension data...",m="";se(async()=>{m=window.location.hash.substring(1).split("?")[0];const T=window.location.search,D=new URLSearchParams(T);if(m!=="")l=JSON.parse(decodeURIComponent(m)).mainToken;else{const O=D.get("state");O!==null&&(l=JSON.parse(decodeURIComponent(O)).mainToken)}const u=await fetch($,{method:"POST",headers:{Authorization:`Bearer ${W}`},body:JSON.stringify({action:"scavenger-main-page",mainToken:l})});if(u.status!==200){console.error(`Error retrieving page data: ${await u.text()}`);return}const b=await u.json();a=new Date(b.nextActionDate);const E=a.getTime()/1e3;w(E),d=setInterval(w,1e3,E),e(2,c="")});let S=!1;async function g(){e(3,S=!0);const D=await(await fetch($,{method:"POST",headers:{Authorization:`Bearer ${W}`},body:JSON.stringify({action:"scavenger-main-submit",mainToken:l,code:n})})).json();e(0,r=D.result);const u=new Date(D.nextActionDate);if(new Date().getTime()<u.getTime()){const b=u.getTime()/1e3;w(b),d=setInterval(w,1e3,b)}e(3,S=!1)}let x="",d=-1;function w(T){const D=Math.floor(new Date().getTime()/1e3);if(T-D<=1)clearInterval(d),e(4,x=""),d=-1;else{const u=oe(T-D,!0);e(4,x=`Next action in ${u}`)}}function z(){n=this.value,e(1,n)}return[r,n,c,S,x,g,z]}class Se extends le{constructor(t){super(),ie(this,t,_e,he,te,{})}}export{Se as component,De as universal};
