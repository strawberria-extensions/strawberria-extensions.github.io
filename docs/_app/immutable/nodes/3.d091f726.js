import{s as H,n as U,e as X,o as K,h as Y,r as Z,i as Q}from"../chunks/scheduler.803aa159.js";import{S as W,i as $,g as h,h as _,j as x,f as l,k as g,a as I,s as C,B as P,c as J,C as A,x as y,F as j,z as L,m as ee,n as te,o as se}from"../chunks/index.78bf47b2.js";import{w as q}from"../chunks/index.636016b2.js";import{c as ae}from"../chunks/logo.09e82b80.js";const ne=!0,de=Object.freeze(Object.defineProperty({__proto__:null,prerender:ne},Symbol.toStringTag,{value:"Module"}));function ie(r){let t,s,p="Updated JSON Configuration",n,e,i,u,c,f,w,E="Database Custom Data",T,d,O,N,k,b,m,z="Handlebar Text",D,v,S,R;return{c(){t=h("div"),s=h("div"),s.textContent=p,n=C(),e=h("textarea"),i=C(),u=h("hr"),c=C(),f=h("div"),w=h("div"),w.textContent=E,T=C(),d=h("textarea"),O=C(),N=h("hr"),k=C(),b=h("div"),m=h("div"),m.textContent=z,D=C(),v=h("textarea"),this.h()},l(a){t=_(a,"DIV",{class:!0});var o=x(t);s=_(o,"DIV",{"data-svelte-h":!0}),P(s)!=="svelte-mvtttl"&&(s.textContent=p),n=J(o),e=_(o,"TEXTAREA",{class:!0,rows:!0}),x(e).forEach(l),o.forEach(l),i=J(a),u=_(a,"HR",{}),c=J(a),f=_(a,"DIV",{class:!0});var M=x(f);w=_(M,"DIV",{"data-svelte-h":!0}),P(w)!=="svelte-16qn20o"&&(w.textContent=E),T=J(M),d=_(M,"TEXTAREA",{class:!0,rows:!0}),x(d).forEach(l),M.forEach(l),O=J(a),N=_(a,"HR",{}),k=J(a),b=_(a,"DIV",{class:!0});var V=x(b);m=_(V,"DIV",{"data-svelte-h":!0}),P(m)!=="svelte-vvi46a"&&(m.textContent=z),D=J(V),v=_(V,"TEXTAREA",{class:!0,rows:!0}),x(v).forEach(l),V.forEach(l),this.h()},h(){g(e,"class","form-control resize-none svelte-1pi0ai7"),g(e,"rows","6"),A(e,"text-invalid",r[4]),g(t,"class","space-y-[0.5em]"),g(d,"class","form-control resize-none svelte-1pi0ai7"),g(d,"rows","2"),A(d,"text-invalid",r[5]),g(f,"class","space-y-[0.5em]"),g(v,"class","form-control resize-none"),g(v,"rows","2"),g(b,"class","space-y-[0.5em]")},m(a,o){I(a,t,o),y(t,s),y(t,n),y(t,e),j(e,r[0]),I(a,i,o),I(a,u,o),I(a,c,o),I(a,f,o),y(f,w),y(f,T),y(f,d),j(d,r[1]),I(a,O,o),I(a,N,o),I(a,k,o),I(a,b,o),y(b,m),y(b,D),y(b,v),j(v,r[2]),S||(R=[L(e,"input",r[8]),L(d,"input",r[9]),L(v,"input",r[10])],S=!0)},p(a,o){o&1&&j(e,a[0]),o&16&&A(e,"text-invalid",a[4]),o&2&&j(d,a[1]),o&32&&A(d,"text-invalid",a[5]),o&4&&j(v,a[2])},d(a){a&&(l(t),l(i),l(u),l(c),l(f),l(O),l(N),l(k),l(b)),S=!1,Z(R)}}}function re(r){let t,s,p,n,e,i;return{c(){t=h("div"),s=h("img"),n=C(),e=h("div"),i=ee(r[3]),this.h()},l(u){t=_(u,"DIV",{class:!0});var c=x(t);s=_(c,"IMG",{src:!0,alt:!0}),n=J(c),e=_(c,"DIV",{class:!0});var f=x(e);i=te(f,r[3]),f.forEach(l),c.forEach(l),this.h()},h(){Q(s.src,p=ae)||g(s,"src",p),g(s,"alt","Chaster logo"),g(e,"class","mt-4 mb-3 caption text-lg"),g(t,"class","w-full h-screen flex flex-col items-center justify-center")},m(u,c){I(u,t,c),y(t,s),y(t,n),y(t,e),y(e,i)},p(u,c){c&8&&se(i,u[3])},d(u){u&&l(t)}}}function oe(r){let t;function s(e,i){return e[3]!==""?re:ie}let p=s(r),n=p(r);return{c(){t=h("div"),n.c(),this.h()},l(e){t=_(e,"DIV",{class:!0});var i=x(t);n.l(i),i.forEach(l),this.h()},h(){g(t,"class","container-bg w-full h-screen pl-3 pr-3 svelte-1pi0ai7")},m(e,i){I(e,t,i),n.m(t,null)},p(e,[i]){p===(p=s(e))&&n?n.p(e,i):(n.d(1),n=p(e),n&&(n.c(),n.m(t,null)))},i:U,o:U,d(e){e&&l(t),n.d()}}}const B="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwbmpsYmpwY2ZlYnFwYXFrcGh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODg1NDM0NTgsImV4cCI6MjAwNDExOTQ1OH0.CsGySz2c8bIWphE6--T51CsmSeBQajfwvBYfTkjviM4",F="https://bpnjlbjpcfebqpaqkphy.supabase.co/functions/v1/chaster_utilities",G="extended_wheel";function le(r,t,s){let p,n,e=q({});X(r,e,m=>s(14,n=m));let i=q({});X(r,i,m=>s(13,p=m));let u="",c="",f="",w="",E="Loading extension data...",T="";K(async()=>{T=window.location.hash.substring(1).split("?")[0];const m=window.location.search,z=new URLSearchParams(m);if(T!=="")w=JSON.parse(decodeURIComponent(T)).partnerConfigurationToken;else{const S=z.get("state");S!==null&&S!==""&&(w=JSON.parse(decodeURIComponent(S)).partnerConfigurationToken)}window.parent&&window.parent.postMessage(JSON.stringify({type:"partner_configuration",event:"capabilities",payload:{features:{save:!0}}}),"*"),window.addEventListener("message",async S=>{if(typeof S.data!="string")return;const R=JSON.parse(S.data);R.type==="chaster"&&R.event==="partner_configuration_save"&&(window.parent.postMessage(JSON.stringify({type:"partner_configuration",event:"save_loading"}),"*"),await fetch(F,{method:"POST",headers:{Authorization:`Bearer ${B}`},body:JSON.stringify({action:"config-update",config:{...n,handlebar:f},configToken:w,customKey:G,customData:p})}),window.parent.postMessage(JSON.stringify({type:"partner_configuration",event:"save_success"}),"*"))}),s(3,E="Retrieving extension config...");const D=await fetch(F,{method:"POST",headers:{Authorization:`Bearer ${B}`},body:JSON.stringify({action:"config-get",configToken:w,customKey:G})});if(D.status!==200){console.error(`Error retrieving config data: ${await D.text()}`);return}const v=await D.json();s(2,f=v.config.handlebar??""),delete v.config.handlebar,e.set(v.config),s(0,u=JSON.stringify(n)),i.set(v.custom),s(1,c=JSON.stringify(p)),s(3,E="")});let d=!1,O=!1;function N(){u=this.value,s(0,u)}function k(){c=this.value,s(1,c)}function b(){f=this.value,s(2,f)}return r.$$.update=()=>{if(r.$$.dirty&1){s(4,d=!0);try{Y(e,n=JSON.parse(u),n),s(4,d=!1)}catch{}}if(r.$$.dirty&2){s(5,O=!0);try{Y(i,p=JSON.parse(c),p),s(5,O=!1)}catch{}}},[u,c,f,E,d,O,e,i,N,k,b]}class he extends W{constructor(t){super(),$(this,t,le,oe,H,{})}}export{he as component,de as universal};
