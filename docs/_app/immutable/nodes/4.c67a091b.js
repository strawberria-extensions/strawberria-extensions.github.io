import{s as v,f as d,a as b,g as f,h as x,c as C,d as h,J as g,j as a,i as p,x as y,y as m,o as w,F as _,C as k}from"../chunks/scheduler.6e8049bc.js";import{S as O,i as S}from"../chunks/index.0fccc1b3.js";import{c as j}from"../chunks/logo.0860a6a8.js";const z=!0,N=Object.freeze(Object.defineProperty({__proto__:null,prerender:z},Symbol.toStringTag,{value:"Module"}));function A(l){let t,n="Successfully authorized OAuth, thanks!";return{c(){t=d("div"),t.textContent=n,this.h()},l(o){t=f(o,"DIV",{class:!0,"data-svelte-h":!0}),_(t)!=="svelte-x1zcdq"&&(t.textContent=n),this.h()},h(){a(t,"class","mt-4 mb-3 caption text-lg")},m(o,s){p(o,t,s)},p:m,d(o){o&&h(t)}}}function J(l){let t,n="Keyholder OAuth connection necessary for extension functionality.",o,s,u="Authorize Permissions",i,r;return{c(){t=d("div"),t.textContent=n,o=b(),s=d("button"),s.textContent=u,this.h()},l(e){t=f(e,"DIV",{class:!0,"data-svelte-h":!0}),_(t)!=="svelte-f4ktfz"&&(t.textContent=n),o=C(e),s=f(e,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),_(s)!=="svelte-1rp4cws"&&(s.textContent=u),this.h()},h(){a(t,"class","mt-4 mb-3 caption text-lg"),a(s,"type","button"),a(s,"class","text-lg btn btn-primary btn-md")},m(e,c){p(e,t,c),p(e,o,c),p(e,s,c),i||(r=k(s,"click",D),i=!0)},p:m,d(e){e&&(h(t),h(o),h(s)),i=!1,r()}}}function R(l){let t,n,o,s;function u(e,c){return e[0]===!1?J:A}let i=u(l),r=i(l);return{c(){t=d("div"),n=d("img"),s=b(),r.c(),this.h()},l(e){t=f(e,"DIV",{class:!0});var c=x(t);n=f(c,"IMG",{src:!0,alt:!0}),s=C(c),r.l(c),c.forEach(h),this.h()},h(){g(n.src,o=j)||a(n,"src",o),a(n,"alt","Chaster logo"),a(t,"class","w-full h-screen flex flex-col items-center justify-center")},m(e,c){p(e,t,c),y(t,n),y(t,s),r.m(t,null)},p(e,[c]){i===(i=u(e))&&r?r.p(e,c):(r.d(1),r=i(e),r&&(r.c(),r.m(t,null)))},i:m,o:m,d(e){e&&h(t),r.d()}}}const T="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwbmpsYmpwY2ZlYnFwYXFrcGh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODg1NDM0NTgsImV4cCI6MjAwNDExOTQ1OH0.CsGySz2c8bIWphE6--T51CsmSeBQajfwvBYfTkjviM4",U="https://bpnjlbjpcfebqpaqkphy.supabase.co/functions/v1/chaster-oauth-store",q="extensions-318826",I="profile locks shared_locks keyholder";function D(){let l=encodeURIComponent(window.location.href.split("#")[0]);const n=["https://sso.chaster.app/auth/realms/app/protocol/openid-connect/auth?",`client_id=${q}&`,`redirect_uri=${l}&`,`response_type=code&scope=${I}&state=`].join("");window.location.href=n}function M(l,t,n){let o=!1;return w(async()=>{const s=window.location.search,i=new URLSearchParams(s).get("code");if(i!==null){n(0,o=!0);const r=window.location.href.split("?")[0];await fetch(U,{method:"POST",headers:{Authorization:`Bearer ${T}`},body:JSON.stringify({authorizationCode:i,redirectURI:r,scopes:I})})}else n(0,o=!1)}),[o]}class $ extends O{constructor(t){super(),S(this,t,M,R,v,{})}}export{$ as component,N as universal};
