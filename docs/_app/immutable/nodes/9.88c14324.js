import{s as Ge,n as _e,r as me,o as Ze,b as ke,i as Qe}from"../chunks/scheduler.803aa159.js";import{S as Ae,i as Xe,g as v,h as m,j as T,f as h,k as f,a as j,x as a,y as Se,e as Pe,s as N,m as G,B as q,c as O,n as A,C as ue,z as te,o as ve,t as Ee,b as Ke,d as Te,p as xe,r as $e,u as et,l as ee,v as tt,F as fe,w as nt}from"../chunks/index.78bf47b2.js";import{e as de}from"../chunks/each.e59479a4.js";import{b as Ve}from"../chunks/js-big-decimal.e03afb0d.js";import{c as st}from"../chunks/logo.09e82b80.js";const it=!0,bt=Object.freeze(Object.defineProperty({__proto__:null,prerender:it},Symbol.toStringTag,{value:"Module"}));function Le(n,t,e){const s=n.slice();s[10]=t[e];const r=s[2][s[10]];s[11]=r;const i=s[4][s[10]];return s[12]=i,s}function Re(n){let t,e,s,r='<i class="fal fa-plus-circle"></i>',i,c,l,u=n[11].tens+"",d,b,k,E=n[11].ones+"",_,M,V,L=n[10]+"",P,S,g,y,J='<i class="fal fa-minus-circle"></i>',R,p,I;function X(){return n[8](n[12])}function B(){return n[9](n[12])}return{c(){t=v("div"),e=v("button"),s=v("div"),s.innerHTML=r,i=N(),c=v("div"),l=v("div"),d=G(u),b=N(),k=v("div"),_=G(E),M=N(),V=v("div"),P=G(L),S=N(),g=v("button"),y=v("div"),y.innerHTML=J,R=N(),this.h()},l(U){t=m(U,"DIV",{class:!0});var w=T(t);e=m(w,"BUTTON",{role:!0,"aria-label":!0,type:!0,class:!0});var Z=T(e);s=m(Z,"DIV",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-jfm9wh"&&(s.innerHTML=r),Z.forEach(h),i=O(w),c=m(w,"DIV",{class:!0});var ne=T(c);l=m(ne,"DIV",{class:!0});var oe=T(l);d=A(oe,u),oe.forEach(h),b=O(ne),k=m(ne,"DIV",{class:!0});var ae=T(k);_=A(ae,E),ae.forEach(h),ne.forEach(h),M=O(w),V=m(w,"DIV",{class:!0});var K=T(V);P=A(K,L),K.forEach(h),S=O(w),g=m(w,"BUTTON",{role:!0,"aria-label":!0,type:!0,class:!0});var x=T(g);y=m(x,"DIV",{class:!0,"data-svelte-h":!0}),q(y)!=="svelte-140olmr"&&(y.innerHTML=J),x.forEach(h),R=O(w),w.forEach(h),this.h()},h(){f(s,"class","duration-btn duration-plus"),f(e,"role","presentation"),f(e,"aria-label",`Add ${n[10]}`),f(e,"type","button"),f(e,"class","sc-ikJzcn fJNrxx"),ue(e,"hidden",n[1]===!1),f(l,"class","duration-digit"),f(k,"class","duration-digit"),f(c,"class","duration-digits"),f(V,"class","duration-label"),f(y,"class","duration-btn duration-minus"),f(g,"role","presentation"),f(g,"aria-label",`Remove ${n[10]}`),f(g,"type","button"),f(g,"class","sc-ikJzcn fJNrxx"),ue(g,"hidden",n[1]===!1),f(t,"class","DurationSelectorItem duration-item small")},m(U,w){j(U,t,w),a(t,e),a(e,s),a(t,i),a(t,c),a(c,l),a(l,d),a(c,b),a(c,k),a(k,_),a(t,M),a(t,V),a(V,P),a(t,S),a(t,g),a(g,y),a(t,R),p||(I=[te(e,"click",X),te(g,"click",B)],p=!0)},p(U,w){n=U,w&2&&ue(e,"hidden",n[1]===!1),w&4&&u!==(u=n[11].tens+"")&&ve(d,u),w&4&&E!==(E=n[11].ones+"")&&ve(_,E),w&2&&ue(g,"hidden",n[1]===!1)},d(U){U&&h(t),p=!1,me(I)}}}function Ue(n){let t,e=n[0][n[10]]===!0&&Re(n);return{c(){e&&e.c(),t=Pe()},l(s){e&&e.l(s),t=Pe()},m(s,r){e&&e.m(s,r),j(s,t,r)},p(s,r){s[0][s[10]]===!0?e?e.p(s,r):(e=Re(s),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(s){s&&h(t),e&&e.d(s)}}}function lt(n){let t,e,s=de(n[3]),r=[];for(let i=0;i<s.length;i+=1)r[i]=Ue(Le(n,s,i));return{c(){t=v("div"),e=v("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){t=m(i,"DIV",{class:!0});var c=T(t);e=m(c,"DIV",{class:!0,"aria-label":!0});var l=T(e);for(let u=0;u<r.length;u+=1)r[u].l(l);l.forEach(h),c.forEach(h),this.h()},h(){f(e,"class","DurationSelector"),f(e,"aria-label","Select a duration"),f(t,"class","d-flex justify-content-center")},m(i,c){j(i,t,c),a(t,e);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null)},p(i,[c]){if(c&63){s=de(i[3]);let l;for(l=0;l<s.length;l+=1){const u=Le(i,s,l);r[l]?r[l].p(u,c):(r[l]=Ue(u),r[l].c(),r[l].m(e,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=s.length}},i:_e,o:_e,d(i){i&&h(t),Se(r,i)}}}function ot(n,t,e){const s=["week","day","hour","minute","second"],r={week:604800,day:86400,hour:3600,minute:60,second:1};let i={week:{tens:"0",ones:"0"},day:{tens:"0",ones:"0"},hour:{tens:"0",ones:"0"},minute:{tens:"0",ones:"0"},second:{tens:"0",ones:"0"}},{seconds:c}=t,{settings:l}=t,{buttons:u=!1}=t,{minSeconds:d=1}=t;function b(_){c+_>=d?e(6,c+=_):e(6,c=d)}const k=_=>{b(_)},E=_=>{b(-1*_)};return n.$$set=_=>{"seconds"in _&&e(6,c=_.seconds),"settings"in _&&e(0,l=_.settings),"buttons"in _&&e(1,u=_.buttons),"minSeconds"in _&&e(7,d=_.minSeconds)},n.$$.update=()=>{if(n.$$.dirty&64){let _=c;for(const M of s){const V=r[M],L=Math.floor(_/V);_-=L*V;const[P,S]=`${L}`.padStart(2,"0").split("");e(2,i[M].tens=P,i),e(2,i[M].ones=S,i)}}},[l,u,i,s,r,b,c,d,k,E]}class at extends Ae{constructor(t){super(),Xe(this,t,ot,lt,Ge,{seconds:6,settings:0,buttons:1,minSeconds:7})}}function Be(n,t,e){const s=n.slice();return s[20]=t[e],s[21]=t,s[22]=e,s}function qe(n,t,e){const s=n.slice();return s[20]=t[e],s[23]=t,s[24]=e,s}function rt(n){let t,e=`With every action, you and the bot roll a dice. \r
            If you do more than the bot, time is removed. \r
            If the bot does more, time is added.\r
            The dice outcome percentages are configurable and hidden to the wearer.`,s,r,i,c,l="Time multiplier",u,d,b="The difference between the two dice will be multiplied by this time.",k,E,_,M,V,L="Weighted Dice Outcomes",P,S,g="Configure the outcomes of your weighted dice",y,J,R,p,I,X="Wearer Loses",B,U,w,Z,ne="Wearer Wins",oe,ae,K,x,H,re,Ne="Difference =",ge,se,Oe="0",be,W,Ie,Ce,$,he,ce,ye,je;_=new at({props:{seconds:n[4],settings:{week:!0,day:!0,hour:!0,minute:!0,second:!0},buttons:!0}});let we=de([0,1,2,3,4]),F=[];for(let o=0;o<5;o+=1)F[o]=Fe(qe(n,we,o));let De=de([6,7,8,9,10]),Y=[];for(let o=0;o<5;o+=1)Y[o]=Ye(Be(n,De,o));return{c(){t=v("div"),t.textContent=e,s=N(),r=v("hr"),i=N(),c=v("div"),c.textContent=l,u=N(),d=v("div"),d.textContent=b,k=N(),E=v("div"),$e(_.$$.fragment),M=N(),V=v("div"),V.textContent=L,P=N(),S=v("div"),S.textContent=g,y=N(),J=v("div"),R=v("div"),p=v("div"),I=v("p"),I.textContent=X,B=N();for(let o=0;o<5;o+=1)F[o].c();U=N(),w=v("div"),Z=v("p"),Z.textContent=ne,oe=N();for(let o=0;o<5;o+=1)Y[o].c();ae=N(),K=v("div"),x=v("div"),H=v("div"),re=v("div"),re.textContent=Ne,ge=N(),se=v("div"),se.textContent=Oe,be=N(),W=v("input"),Ie=G(`\r
                        %`),Ce=N(),$=v("p"),he=G(n[3]),this.h()},l(o){t=m(o,"DIV",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-m7evyo"&&(t.textContent=e),s=O(o),r=m(o,"HR",{}),i=O(o),c=m(o,"DIV",{class:!0,"data-svelte-h":!0}),q(c)!=="svelte-glcev8"&&(c.textContent=l),u=O(o),d=m(o,"DIV",{class:!0,"data-svelte-h":!0}),q(d)!=="svelte-pc0ugj"&&(d.textContent=b),k=O(o),E=m(o,"DIV",{class:!0});var D=T(E);et(_.$$.fragment,D),D.forEach(h),M=O(o),V=m(o,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),q(V)!=="svelte-m8e1ps"&&(V.textContent=L),P=O(o),S=m(o,"DIV",{class:!0,"data-svelte-h":!0}),q(S)!=="svelte-1lwj5p5"&&(S.textContent=g),y=O(o),J=m(o,"DIV",{class:!0});var z=T(J);R=m(z,"DIV",{style:!0});var C=T(R);p=m(C,"DIV",{style:!0,class:!0});var Q=T(p);I=m(Q,"P",{class:!0,"data-svelte-h":!0}),q(I)!=="svelte-1bfqlgl"&&(I.textContent=X),B=O(Q);for(let le=0;le<5;le+=1)F[le].l(Q);Q.forEach(h),U=O(C),w=m(C,"DIV",{style:!0,class:!0});var pe=T(w);Z=m(pe,"P",{class:!0,"data-svelte-h":!0}),q(Z)!=="svelte-p4a4ss"&&(Z.textContent=ne),oe=O(pe);for(let le=0;le<5;le+=1)Y[le].l(pe);pe.forEach(h),C.forEach(h),ae=O(z),K=m(z,"DIV",{class:!0});var Je=T(K);x=m(Je,"DIV",{style:!0});var Me=T(x);H=m(Me,"DIV",{class:!0});var ie=T(H);re=m(ie,"DIV",{"data-svelte-h":!0}),q(re)!=="svelte-z0li4i"&&(re.textContent=Ne),ge=O(ie),se=m(ie,"DIV",{class:!0,"data-svelte-h":!0}),q(se)!=="svelte-kcnpjr"&&(se.textContent=Oe),be=O(ie),W=m(ie,"INPUT",{class:!0,placeholder:!0}),Ie=A(ie,`\r
                        %`),ie.forEach(h),Me.forEach(h),Je.forEach(h),Ce=O(z),$=m(z,"P",{class:!0,style:!0});var ze=T($);he=A(ze,n[3]),ze.forEach(h),z.forEach(h),this.h()},h(){f(t,"class","caption"),f(c,"class","page-top"),f(d,"class","caption mb-2"),f(E,"class","d-flex justify-content-center"),f(V,"class","page-top"),ee(V,"margin-top","1em"),f(S,"class","caption mb-2"),f(I,"class","dice-col-header"),ee(p,"padding-right","1em"),ee(p,"border-right","thin solid #a4a7b7"),f(p,"class","dice-config-col"),f(Z,"class","dice-col-header"),ee(w,"padding-left","1em"),f(w,"class","dice-config-col"),ee(R,"display","flex"),ee(R,"flex-direction","row"),ee(R,"width","100%"),f(se,"class","dice-config-diffnum"),f(W,"class","dice-config-input form-control"),f(W,"placeholder","0"),f(H,"class","dice-config-row"),ee(x,"width","50%"),f(K,"class","dice-config-draw"),f($,"class","invalid"),ee($,"font-size","100%"),ue($,"hidden",n[3]===""),f(J,"class","dice-config actions mb-4")},m(o,D){j(o,t,D),j(o,s,D),j(o,r,D),j(o,i,D),j(o,c,D),j(o,u,D),j(o,d,D),j(o,k,D),j(o,E,D),tt(_,E,null),j(o,M,D),j(o,V,D),j(o,P,D),j(o,S,D),j(o,y,D),j(o,J,D),a(J,R),a(R,p),a(p,I),a(p,B);for(let z=0;z<5;z+=1)F[z]&&F[z].m(p,null);a(R,U),a(R,w),a(w,Z),a(w,oe);for(let z=0;z<5;z+=1)Y[z]&&Y[z].m(w,null);a(J,ae),a(J,K),a(K,x),a(x,H),a(H,re),a(H,ge),a(H,se),a(H,be),a(H,W),fe(W,n[1][5]),n[14](W),a(H,Ie),a(J,Ce),a(J,$),a($,he),ce=!0,ye||(je=[te(W,"input",n[13]),te(W,"input",n[15])],ye=!0)},p(o,D){const z={};if(D&16&&(z.seconds=o[4]),_.$set(z),D&102){we=de([0,1,2,3,4]);let C;for(C=0;C<5;C+=1){const Q=qe(o,we,C);F[C]?F[C].p(Q,D):(F[C]=Fe(Q),F[C].c(),F[C].m(p,null))}for(;C<5;C+=1)F[C].d(1)}if(D&102){De=de([6,7,8,9,10]);let C;for(C=0;C<5;C+=1){const Q=Be(o,De,C);Y[C]?Y[C].p(Q,D):(Y[C]=Ye(Q),Y[C].c(),Y[C].m(w,null))}for(;C<5;C+=1)Y[C].d(1)}D&2&&W.value!==o[1][5]&&fe(W,o[1][5]),(!ce||D&8)&&ve(he,o[3]),(!ce||D&8)&&ue($,"hidden",o[3]==="")},i(o){ce||(Te(_.$$.fragment,o),ce=!0)},o(o){Ee(_.$$.fragment,o),ce=!1},d(o){o&&(h(t),h(s),h(r),h(i),h(c),h(u),h(d),h(k),h(E),h(M),h(V),h(P),h(S),h(y),h(J)),nt(_),Se(F,o),Se(Y,o),n[14](null),ye=!1,me(je)}}}function ct(n){let t,e,s,r,i,c;return{c(){t=v("div"),e=v("img"),r=N(),i=v("div"),c=G(n[0]),this.h()},l(l){t=m(l,"DIV",{class:!0});var u=T(t);e=m(u,"IMG",{src:!0,alt:!0}),r=O(u),i=m(u,"DIV",{class:!0});var d=T(i);c=A(d,n[0]),d.forEach(h),u.forEach(h),this.h()},h(){Qe(e.src,s=st)||f(e,"src",s),f(e,"alt","Chaster logo"),f(i,"class","mt-4 caption text-lg"),f(t,"class","w-full h-full flex flex-col items-center justify-center")},m(l,u){j(l,t,u),a(t,e),a(t,r),a(t,i),a(i,c)},p(l,u){u&1&&ve(c,l[0])},i:_e,o:_e,d(l){l&&h(t)}}}function Fe(n){let t,e,s="Difference =",r,i,c=n[5][n[20]]+"",l,u,d,b=n[20],k,E,_;function M(){n[7].call(d,n[20])}const V=()=>n[8](d,b),L=()=>n[8](null,b);function P(){return n[9](n[20])}return{c(){t=v("div"),e=v("div"),e.textContent=s,r=N(),i=v("div"),l=G(c),u=N(),d=v("input"),k=G(`\r
                            %\r
                        `),this.h()},l(S){t=m(S,"DIV",{class:!0});var g=T(t);e=m(g,"DIV",{"data-svelte-h":!0}),q(e)!=="svelte-z0li4i"&&(e.textContent=s),r=O(g),i=m(g,"DIV",{class:!0});var y=T(i);l=A(y,c),y.forEach(h),u=O(g),d=m(g,"INPUT",{class:!0,placeholder:!0}),k=A(g,`\r
                            %\r
                        `),g.forEach(h),this.h()},h(){f(i,"class","dice-config-diffnum"),f(d,"class","dice-config-input form-control"),f(d,"placeholder","0"),f(t,"class","dice-config-row")},m(S,g){j(S,t,g),a(t,e),a(t,r),a(t,i),a(i,l),a(t,u),a(t,d),fe(d,n[1][n[20]]),V(),a(t,k),E||(_=[te(d,"input",M),te(d,"input",P)],E=!0)},p(S,g){n=S,g&2&&d.value!==n[1][n[20]]&&fe(d,n[1][n[20]]),b!==n[20]&&(L(),b=n[20],V())},d(S){S&&h(t),L(),E=!1,me(_)}}}function Ye(n){let t,e,s="Difference =",r,i,c,l=n[5][n[20]]+"",u,d,b,k=n[20],E,_,M;function V(){n[10].call(b,n[20])}const L=()=>n[11](b,k),P=()=>n[11](null,k);function S(){return n[12](n[20])}return{c(){t=v("div"),e=v("div"),e.textContent=s,r=N(),i=v("div"),c=G("+"),u=G(l),d=N(),b=v("input"),E=G(`\r
                            %\r
                        `),this.h()},l(g){t=m(g,"DIV",{class:!0});var y=T(t);e=m(y,"DIV",{"data-svelte-h":!0}),q(e)!=="svelte-z0li4i"&&(e.textContent=s),r=O(y),i=m(y,"DIV",{class:!0});var J=T(i);c=A(J,"+"),u=A(J,l),J.forEach(h),d=O(y),b=m(y,"INPUT",{class:!0,placeholder:!0}),E=A(y,`\r
                            %\r
                        `),y.forEach(h),this.h()},h(){f(i,"class","dice-config-diffnum"),f(b,"class","dice-config-input form-control"),f(b,"placeholder","0"),f(t,"class","dice-config-row")},m(g,y){j(g,t,y),a(t,e),a(t,r),a(t,i),a(i,c),a(i,u),a(t,d),a(t,b),fe(b,n[1][n[20]]),L(),a(t,E),_||(M=[te(b,"input",V),te(b,"input",S)],_=!0)},p(g,y){n=g,y&2&&b.value!==n[1][n[20]]&&fe(b,n[1][n[20]]),k!==n[20]&&(P(),k=n[20],L())},d(g){g&&h(t),P(),_=!1,me(M)}}}function ut(n){let t,e,s,r;const i=[ct,rt],c=[];function l(u,d){return u[0]!==""?0:1}return e=l(n),s=c[e]=i[e](n),{c(){t=v("div"),s.c(),this.h()},l(u){t=m(u,"DIV",{class:!0});var d=T(t);s.l(d),d.forEach(h),this.h()},h(){f(t,"class","container-bg w-full h-screen pl-3 pr-3 svelte-43el3z")},m(u,d){j(u,t,d),c[e].m(t,null),r=!0},p(u,[d]){let b=e;e=l(u),e===b?c[e].p(u,d):(xe(),Ee(c[b],1,1,()=>{c[b]=null}),Ke(),s=c[e],s?s.p(u,d):(s=c[e]=i[e](u),s.c()),Te(s,1),s.m(t,null))},i(u){r||(Te(s),r=!0)},o(u){Ee(s),r=!1},d(u){u&&h(t),c[e].d()}}}const He="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwbmpsYmpwY2ZlYnFwYXFrcGh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODg1NDM0NTgsImV4cCI6MjAwNDExOTQ1OH0.CsGySz2c8bIWphE6--T51CsmSeBQajfwvBYfTkjviM4",dt="https://bpnjlbjpcfebqpaqkphy.supabase.co/functions/v1/weighted-config-get",ft="https://bpnjlbjpcfebqpaqkphy.supabase.co/functions/v1/weighted-config-put";function We(n){if(n=="")return!0;if(n.match(/^[0-9\.]+$/)===null)return!1;const t=parseFloat(n);return!(isNaN(t)||t<0||t>100)}function ht(n,t,e){const s=[-1,-2,-3,-4,-5,0,1,2,3,4,5];let r="",i,c="Loading extension data...",l=["","","","","","","","","","",""],u=["","","","","","","","","","",""],d=[],b="",k=3600;Ze(async function(){const p=window.location.hash.substring(1);p!==""&&(r=JSON.parse(decodeURIComponent(p)).partnerConfigurationToken),window.parent&&window.parent.postMessage(JSON.stringify({type:"partner_configuration",event:"capabilities",payload:{features:{save:!0}}}),"*"),window.addEventListener("message",async B=>{if(typeof B.data!="string")return;const U=JSON.parse(B.data);U.type==="chaster"&&U.event==="partner_configuration_save"&&(window.parent.postMessage(JSON.stringify({type:"partner_configuration",event:"save_loading"}),"*"),await fetch(ft,{method:"POST",headers:{Authorization:`Bearer ${He}`},body:JSON.stringify({configurationToken:r,config:{chances:l.map(w=>parseFloat(w)),multiplier:k}})}),window.parent.postMessage(JSON.stringify({type:"partner_configuration",event:"save_success"}),"*"))});const I=await fetch(dt,{method:"POST",headers:{Authorization:`Bearer ${He}`},body:JSON.stringify({configurationToken:r})});if(I.status!==200){console.error(`Error retrieving extension configuration: ${await I.text()}`);return}const X=await I.json();delete X.multiplierText,i=X,e(1,l=i.chances.map(B=>`${B}`)),u=i.chances.map(B=>`${B}`),e(4,k=i.multiplier),e(0,c="")});function E(){let p=new Ve(0);for(const I of l)We(I)===!0&&(p=p.add(new Ve(I)));Ve.compareTo(p.getValue(),"100")!==0?e(3,b=`Invalid total percentage, got ${p.getValue()}% but expected 100%`):e(3,b="")}function _(p){const I=d[p],X=I.value;We(X)===!0?(u[p]=X,I.oldSelectionStart=I.selectionStart,I.oldSelectionEnd=I.selectionEnd):(I.value=u[p],e(1,l[p]=I.value,l),e(1,l),I.setSelectionRange(I.oldSelectionStart,I.oldSelectionEnd)),E()}function M(p){l[p]=this.value,e(1,l)}function V(p,I){ke[p?"unshift":"push"](()=>{d[I]=p,e(2,d)})}const L=p=>{_(p)};function P(p){l[p]=this.value,e(1,l)}function S(p,I){ke[p?"unshift":"push"](()=>{d[I]=p,e(2,d)})}const g=p=>{_(p)};function y(){l[5]=this.value,e(1,l)}function J(p){ke[p?"unshift":"push"](()=>{d[5]=p,e(2,d)})}return[c,l,d,b,k,s,_,M,V,L,P,S,g,y,J,()=>{_(5)}]}class It extends Ae{constructor(t){super(),Xe(this,t,ht,ut,Ge,{})}}export{It as component,bt as universal};
