import{s as ke,j as ue,n as ce,k as Le,e as Me,o as Te,f as xe,i as je}from"../chunks/scheduler.45a29d2a.js";import{S as Ee,i as Ce,g as v,m as L,s as M,h as _,j as y,n as T,f as u,c as x,A as he,k as f,a as K,x as i,o as Y,y as Ve,t as te,b as Pe,d as W,p as Se,B as X,r as Oe,u as qe,v as He,w as ze}from"../chunks/index.402d22ca.js";import{e as fe}from"../chunks/each.e59479a4.js";import{w as Je}from"../chunks/index.a61b5093.js";import{c as Ne}from"../chunks/logo.09e82b80.js";import{b as Re,g as Ue}from"../chunks/utility.7beff880.js";const Ye=!0,nt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ye},Symbol.toStringTag,{value:"Module"}));function ye(n,t,l){const e=n.slice();e[9]=t[l];const s=Ue(e[9]);return e[10]=s,e}function we(n){let t,l=fe(n[2].penaltyConfig.effects),e=[];for(let s=0;s<l.length;s+=1)e[s]=De(ye(n,l,s));return{c(){t=v("ul");for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l(s){t=_(s,"UL",{class:!0});var o=y(t);for(let a=0;a<e.length;a+=1)e[a].l(o);o.forEach(u),this.h()},h(){f(t,"class","flex flex-col list effect-list caption pl-[0.25em] mt-[0.125em] svelte-1fe1t23")},m(s,o){K(s,t,o);for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(t,null)},p(s,o){if(o&4){l=fe(s[2].penaltyConfig.effects);let a;for(a=0;a<l.length;a+=1){const m=ye(s,l,a);e[a]?e[a].p(m,o):(e[a]=De(m),e[a].c(),e[a].m(t,null))}for(;a<e.length;a+=1)e[a].d(1);e.length=l.length}},d(s){s&&u(t),Ve(e,s)}}}function De(n){let t,l=n[10]+"",e;return{c(){t=v("li"),e=L(l)},l(s){t=_(s,"LI",{});var o=y(t);e=T(o,l),o.forEach(u)},m(s,o){K(s,t,o),i(t,e)},p(s,o){o&4&&l!==(l=s[10]+"")&&Y(e,l)},d(s){s&&u(t)}}}function Be(n){let t,l,e,s,o=n[2].extensionData.display+"",a,m,c,d,D,I,g,k,O,q,H,R,j,V,z,B,J,P,E,h,le="Penalty effects:",p,w,r,N=n[2].penaltyData.current+"",U,Z,A=n[2].penaltyConfig.required+"",F,de,$=n[1].what+"",ae,ee=n[2].penaltyConfig.required>0?"s":"",se,ne,S=n[2].penaltyConfig.effects.length>0&&we(n);return{c(){t=v("div"),l=v("div"),e=v("div"),s=v("h5"),a=L(o),m=M(),c=v("div"),d=L(n[6]),D=M(),I=v("div"),g=M(),k=v("a"),O=L("Open"),q=M(),H=v("div"),R=L(n[4]),j=M(),V=v("div"),z=v("div"),J=M(),P=v("div"),E=v("div"),h=v("div"),h.textContent=le,p=M(),S&&S.c(),w=M(),r=v("div"),U=L(N),Z=L(" / "),F=L(A),de=M(),ae=L($),se=L(ee),this.h()},l(C){t=_(C,"DIV",{class:!0});var b=y(t);l=_(b,"DIV",{class:!0});var Q=y(l);e=_(Q,"DIV",{class:!0});var ie=y(e);s=_(ie,"H5",{class:!0});var pe=y(s);a=T(pe,o),pe.forEach(u),m=x(ie),c=_(ie,"DIV",{class:!0});var ve=y(c);d=T(ve,n[6]),ve.forEach(u),ie.forEach(u),D=x(Q),I=_(Q,"DIV",{class:!0}),y(I).forEach(u),g=x(Q),k=_(Q,"A",{href:!0,target:!0,class:!0});var _e=y(k);O=T(_e,"Open"),_e.forEach(u),Q.forEach(u),q=x(b),H=_(b,"DIV",{});var me=y(H);R=T(me,n[4]),me.forEach(u),j=x(b),V=_(b,"DIV",{class:!0});var ge=y(V);z=_(ge,"DIV",{role:!0,class:!0,style:!0}),y(z).forEach(u),ge.forEach(u),J=x(b),P=_(b,"DIV",{class:!0});var oe=y(P);E=_(oe,"DIV",{class:!0});var re=y(E);h=_(re,"DIV",{"data-svelte-h":!0}),he(h)!=="svelte-bjs3vd"&&(h.textContent=le),p=x(re),S&&S.l(re),re.forEach(u),w=x(oe),r=_(oe,"DIV",{class:!0});var G=y(r);U=T(G,N),Z=T(G," / "),F=T(G,A),de=x(G),ae=T(G,$),se=T(G,ee),G.forEach(u),oe.forEach(u),b.forEach(u),this.h()},h(){f(s,"class","mb-[0.25em]"),f(c,"class","caption"),f(e,"class","flex flex-col"),f(I,"class","grow"),f(k,"href",n[5]),f(k,"target","_blank"),f(k,"class","btn btn-outline-primary"),f(l,"class","flex flex-row space-x-[1em] items-center mb-[0.75em]"),f(z,"role","progressbar"),f(z,"class","progress-bar"),f(z,"style",B=`width: ${n[3]}%`),f(V,"class","progress"),f(E,"class","flex flex-col grow"),f(r,"class","shrink-0 caption"),f(P,"class","flex flex-row items-start text-sm whitespace-pre-wrap space-x-[1em]"),f(t,"class",ne=ue(`card-content flex flex-col space-y-[0.5em] ${n[0]?"w-[32em]":"w-full"}`)+" svelte-1fe1t23")},m(C,b){K(C,t,b),i(t,l),i(l,e),i(e,s),i(s,a),i(e,m),i(e,c),i(c,d),i(l,D),i(l,I),i(l,g),i(l,k),i(k,O),i(t,q),i(t,H),i(H,R),i(t,j),i(t,V),i(V,z),i(t,J),i(t,P),i(P,E),i(E,h),i(E,p),S&&S.m(E,null),i(P,w),i(P,r),i(r,U),i(r,Z),i(r,F),i(r,de),i(r,ae),i(r,se)},p(C,[b]){b&4&&o!==(o=C[2].extensionData.display+"")&&Y(a,o),b&16&&Y(R,C[4]),b&8&&B!==(B=`width: ${C[3]}%`)&&f(z,"style",B),C[2].penaltyConfig.effects.length>0?S?S.p(C,b):(S=we(C),S.c(),S.m(E,null)):S&&(S.d(1),S=null),b&4&&N!==(N=C[2].penaltyData.current+"")&&Y(U,N),b&4&&A!==(A=C[2].penaltyConfig.required+"")&&Y(F,A),b&2&&$!==($=C[1].what+"")&&Y(ae,$),b&4&&ee!==(ee=C[2].penaltyConfig.required>0?"s":"")&&Y(se,ee),b&1&&ne!==(ne=ue(`card-content flex flex-col space-y-[0.5em] ${C[0]?"w-[32em]":"w-full"}`)+" svelte-1fe1t23")&&f(t,"class",ne)},i:ce,o:ce,d(C){C&&u(t),S&&S.d()}}}function Ae(n,t,l){let{shouldHorizontal:e}=t,{lockID:s}=t,{extensionLookup:o}=t,{individualPenaltyData:a}=t;const m=`https://chaster.app/locks/${s}/extensions/${a.extensionData._id}`,c=o.key==="extended_wheel"?`Spin the wheel named '${a.penaltyConfig.display}'`:"";let d=a.penaltyData.current/a.penaltyConfig.required*100;d>100&&(d=100);let D="",I=setInterval(()=>{const g=new Date().getTime(),k=a.penaltyData.lastPenaltyMS+a.penaltyConfig.interval-g;l(4,D=k>0?Re(Math.floor(k/1e3)):a.penaltyData.current>a.penaltyConfig.required?"Completed! Waiting for system...":"Too late! Waiting for system...")},200);return Le(()=>{clearInterval(I)}),n.$$set=g=>{"shouldHorizontal"in g&&l(0,e=g.shouldHorizontal),"lockID"in g&&l(7,s=g.lockID),"extensionLookup"in g&&l(1,o=g.extensionLookup),"individualPenaltyData"in g&&l(2,a=g.individualPenaltyData)},[e,o,a,d,D,m,c,s]}class Fe extends Ee{constructor(t){super(),Ce(this,t,Ae,Be,ke,{shouldHorizontal:0,lockID:7,extensionLookup:1,individualPenaltyData:2})}}function be(n,t,l){const e=n.slice();e[11]=t[l];const s=e[6][e[11].extensionData.slug];return e[12]=s,e}function Ge(n){let t,l,e,s='<h4 class="mb-0">[üçì] Strawberria Penalties</h4> <span class="caption">Developer: <a href="https://chaster.app/user/strawberria" target="_blank">@strawberria</a></span>',o,a,m=`Extended penalty handling for all personally-developed extensions! <br/>
                    Now supporting extended lock effects and dynamic penalty interval with minute-level granularity!`,c,d,D,I,g,k,O,q,H,R,j,V,z,B,J,P,E=fe(n[5]),h=[];for(let p=0;p<E.length;p+=1)h[p]=Ie(be(n,E,p));const le=p=>te(h[p],1,1,()=>{h[p]=null});return{c(){t=v("div"),l=v("div"),e=v("div"),e.innerHTML=s,o=M(),a=v("div"),a.innerHTML=m,c=M(),d=v("div"),D=v("i"),I=M(),g=v("h3"),k=L(n[2]),O=L(" / "),q=L(n[3]),H=L(" completed"),R=M(),j=v("div"),V=v("div"),B=M(),J=v("div");for(let p=0;p<h.length;p+=1)h[p].c();this.h()},l(p){t=_(p,"DIV",{class:!0});var w=y(t);l=_(w,"DIV",{class:!0});var r=y(l);e=_(r,"DIV",{class:!0,"data-svelte-h":!0}),he(e)!=="svelte-1drm992"&&(e.innerHTML=s),o=x(r),a=_(r,"DIV",{class:!0,"data-svelte-h":!0}),he(a)!=="svelte-18bx7mj"&&(a.innerHTML=m),c=x(r),d=_(r,"DIV",{class:!0});var N=y(d);D=_(N,"I",{class:!0}),y(D).forEach(u),I=x(N),g=_(N,"H3",{});var U=y(g);k=T(U,n[2]),O=T(U," / "),q=T(U,n[3]),H=T(U," completed"),U.forEach(u),N.forEach(u),R=x(r),j=_(r,"DIV",{class:!0});var Z=y(j);V=_(Z,"DIV",{role:!0,class:!0,style:!0}),y(V).forEach(u),Z.forEach(u),r.forEach(u),B=x(w),J=_(w,"DIV",{class:!0});var A=y(J);for(let F=0;F<h.length;F+=1)h[F].l(A);A.forEach(u),w.forEach(u),this.h()},h(){f(e,"class","flex items-end justify-between mb-2"),X(e,"flex-row",n[8]),X(e,"flex-col",!n[8]),X(e,"space-x-1",n[8]),X(e,"items-end",n[8]),f(a,"class","caption mb-3"),f(D,"class","fal fa-tasks fa-2x"),f(d,"class","flex flex-row space-x-[0.5em]"),f(V,"role","progressbar"),f(V,"class","progress-bar"),f(V,"style",z=`width: ${n[4]}%;`),f(j,"class","progress"),f(l,"class","card-content svelte-17a10ne"),X(l,"card-wrapper-desktop",n[8]),f(J,"class","grid gap-[1.5em]"),X(J,"grid-cols-2",n[8]),X(J,"grid-cols-1",!n[8]),f(t,"class",ue(`flex flex-col space-y-[1.5em] ${n[8]?"w-[65.5em]":"w-full"}`)+" svelte-17a10ne")},m(p,w){K(p,t,w),i(t,l),i(l,e),i(l,o),i(l,a),i(l,c),i(l,d),i(d,D),i(d,I),i(d,g),i(g,k),i(g,O),i(g,q),i(g,H),i(l,R),i(l,j),i(j,V),i(t,B),i(t,J);for(let r=0;r<h.length;r+=1)h[r]&&h[r].m(J,null);P=!0},p(p,w){if((!P||w&4)&&Y(k,p[2]),(!P||w&8)&&Y(q,p[3]),(!P||w&16&&z!==(z=`width: ${p[4]}%;`))&&f(V,"style",z),w&354){E=fe(p[5]);let r;for(r=0;r<E.length;r+=1){const N=be(p,E,r);h[r]?(h[r].p(N,w),W(h[r],1)):(h[r]=Ie(N),h[r].c(),W(h[r],1),h[r].m(J,null))}for(Se(),r=E.length;r<h.length;r+=1)le(r);Pe()}},i(p){if(!P){for(let w=0;w<E.length;w+=1)W(h[w]);P=!0}},o(p){h=h.filter(Boolean);for(let w=0;w<h.length;w+=1)te(h[w]);P=!1},d(p){p&&u(t),Ve(h,p)}}}function Xe(n){let t,l,e,s,o,a;return{c(){t=v("div"),l=v("img"),s=M(),o=v("div"),a=L(n[0]),this.h()},l(m){t=_(m,"DIV",{class:!0});var c=y(t);l=_(c,"IMG",{src:!0,alt:!0}),s=x(c),o=_(c,"DIV",{class:!0});var d=y(o);a=T(d,n[0]),d.forEach(u),c.forEach(u),this.h()},h(){je(l.src,e=Ne)||f(l,"src",e),f(l,"alt","Chaster logo"),f(o,"class","mt-4 caption text-lg"),f(t,"class","w-full h-screen flex flex-col items-center justify-center")},m(m,c){K(m,t,c),i(t,l),i(t,s),i(t,o),i(o,a)},p(m,c){c&1&&Y(a,m[0])},i:ce,o:ce,d(m){m&&u(t)}}}function Ie(n){let t,l;return t=new Fe({props:{shouldHorizontal:n[8],lockID:n[1],extensionLookup:n[12],individualPenaltyData:n[11]}}),{c(){Oe(t.$$.fragment)},l(e){qe(t.$$.fragment,e)},m(e,s){He(t,e,s),l=!0},p(e,s){const o={};s&2&&(o.lockID=e[1]),s&32&&(o.extensionLookup=e[12]),s&32&&(o.individualPenaltyData=e[11]),t.$set(o)},i(e){l||(W(t.$$.fragment,e),l=!0)},o(e){te(t.$$.fragment,e),l=!1},d(e){ze(t,e)}}}function Ze(n){let t,l,e,s;const o=[Xe,Ge],a=[];function m(c,d){return c[0]!==""?0:1}return l=m(n),e=a[l]=o[l](n),{c(){t=v("div"),e.c(),this.h()},l(c){t=_(c,"DIV",{class:!0});var d=y(t);e.l(d),d.forEach(u),this.h()},h(){f(t,"class","container-bg min-w-0 min-h-0 p-4 space-y-2 grow svelte-17a10ne")},m(c,d){K(c,t,d),a[l].m(t,null),s=!0},p(c,[d]){let D=l;l=m(c),l===D?a[l].p(c,d):(Se(),te(a[D],1,1,()=>{a[D]=null}),Pe(),e=a[l],e?e.p(c,d):(e=a[l]=o[l](c),e.c()),W(e,1),e.m(t,null))},i(c){s||(W(e),s=!0)},o(c){te(e),s=!1},d(c){c&&u(t),a[l].d()}}}const Qe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwbmpsYmpwY2ZlYnFwYXFrcGh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODg1NDM0NTgsImV4cCI6MjAwNDExOTQ1OH0.CsGySz2c8bIWphE6--T51CsmSeBQajfwvBYfTkjviM4",We="https://bpnjlbjpcfebqpaqkphy.supabase.co/functions/v1/chaster_utilities";function Ke(n,t,l){let e;const s={"extended-wheel-of-fortune":{key:"extended_wheel",what:"spin"}};let o="Loading extension data...",a="",m=Je([]);Me(n,m,O=>l(5,e=O));let c="",d="";Te(async()=>{d=window.location.hash.substring(1).split("?")[0];const O=window.location.search,q=new URLSearchParams(O);if(d!=="")a=JSON.parse(decodeURIComponent(d)).mainToken;else{const j=q.get("state");j!==null&&(a=JSON.parse(decodeURIComponent(j)).mainToken)}const H=await fetch(We,{method:"POST",headers:{Authorization:`Bearer ${Qe}`},body:JSON.stringify({action:"strawberria_penalties-page",mainToken:a})});if(H.status!==200)throw console.error(`Error retrieving session data: ${await H.text()}`),new Error("error retrieving session data");const R=await H.json();xe(m,e=R.data,e),l(1,c=R.lockID),l(0,o="")});let D=0,I=1,g=0;m.subscribe(O=>{l(2,D=0),l(3,I=0);for(const q of O)l(2,D+=q.penaltyData.current>=q.penaltyConfig.required?1:0),l(3,I++,I);l(4,g=I===0?0:D/I*100)});let k=!/Mobi/i.test(window.navigator.userAgent);return[o,c,D,I,g,e,s,m,k]}class it extends Ee{constructor(t){super(),Ce(this,t,Ke,Ze,ke,{})}}export{it as component,nt as universal};
