import{s as v,i as x,n as m,o as g}from"../chunks/scheduler.d6997cf0.js";import{S as w,i as k,g as d,s as y,h as f,j as O,c as I,f as h,k as l,a as p,x as b,A as _,D as S}from"../chunks/index.2defdddc.js";import{c as j}from"../chunks/logo.09e82b80.js";const z=!0,N=Object.freeze(Object.defineProperty({__proto__:null,prerender:z},Symbol.toStringTag,{value:"Module"}));function A(a){let t,n="Successfully authorized OAuth, thanks!";return{c(){t=d("div"),t.textContent=n,this.h()},l(o){t=f(o,"DIV",{class:!0,"data-svelte-h":!0}),_(t)!=="svelte-x1zcdq"&&(t.textContent=n),this.h()},h(){l(t,"class","mt-4 mb-3 caption text-lg")},m(o,s){p(o,t,s)},p:m,d(o){o&&h(t)}}}function J(a){let t,n="Keyholder OAuth connection necessary for extension functionality.",o,s,u="Authorize Permissions",r,i;return{c(){t=d("div"),t.textContent=n,o=y(),s=d("button"),s.textContent=u,this.h()},l(e){t=f(e,"DIV",{class:!0,"data-svelte-h":!0}),_(t)!=="svelte-f4ktfz"&&(t.textContent=n),o=I(e),s=f(e,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),_(s)!=="svelte-1rp4cws"&&(s.textContent=u),this.h()},h(){l(t,"class","mt-4 mb-3 caption text-lg"),l(s,"type","button"),l(s,"class","text-lg btn btn-primary btn-md")},m(e,c){p(e,t,c),p(e,o,c),p(e,s,c),r||(i=S(s,"click",q),r=!0)},p:m,d(e){e&&(h(t),h(o),h(s)),r=!1,i()}}}function R(a){let t,n,o,s;function u(e,c){return e[0]===!1?J:A}let r=u(a),i=r(a);return{c(){t=d("div"),n=d("img"),s=y(),i.c(),this.h()},l(e){t=f(e,"DIV",{class:!0});var c=O(t);n=f(c,"IMG",{src:!0,alt:!0}),s=I(c),i.l(c),c.forEach(h),this.h()},h(){x(n.src,o=j)||l(n,"src",o),l(n,"alt","Chaster logo"),l(t,"class","w-full h-screen flex flex-col items-center justify-center")},m(e,c){p(e,t,c),b(t,n),b(t,s),i.m(t,null)},p(e,[c]){r===(r=u(e))&&i?i.p(e,c):(i.d(1),i=r(e),i&&(i.c(),i.m(t,null)))},i:m,o:m,d(e){e&&h(t),i.d()}}}const U="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwbmpsYmpwY2ZlYnFwYXFrcGh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODg1NDM0NTgsImV4cCI6MjAwNDExOTQ1OH0.CsGySz2c8bIWphE6--T51CsmSeBQajfwvBYfTkjviM4",D="https://bpnjlbjpcfebqpaqkphy.supabase.co/functions/v1/database_utilities",T="extensions-318826",C="profile locks shared_locks keyholder";function q(){let a=encodeURIComponent(window.location.href.split("#")[0]);const n=["https://sso.chaster.app/auth/realms/app/protocol/openid-connect/auth?",`client_id=${T}&`,`redirect_uri=${a}&`,`response_type=code&scope=${C}&state=`].join("");window.location.href=n}function M(a,t,n){let o=!1;return g(async()=>{const s=window.location.search,r=new URLSearchParams(s).get("code");if(r!==null){n(0,o=!0);const i=window.location.href.split("?")[0];await fetch(D,{method:"POST",headers:{Authorization:`Bearer ${U}`},body:JSON.stringify({action:"chaster_access-set",authorizationCode:r,redirectURI:i,scopes:C})})}else n(0,o=!1)}),[o]}class $ extends w{constructor(t){super(),k(this,t,M,R,v,{})}}export{$ as component,N as universal};
