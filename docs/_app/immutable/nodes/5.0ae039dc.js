import{s as we,n as oe,j as Pe,e as Se,o as xe,f as Le,i as Me}from"../chunks/scheduler.89cf524d.js";import{S as Ie,i as ke,g as v,m as x,s as L,h as m,j as g,n as M,f as d,c as T,A as de,k as f,a as W,x as n,o as Y,y as Ee,t as te,b as Ce,d as Q,p as Ve,B as ee,r as Te,u as je,v as Oe,w as qe}from"../chunks/index.471140c5.js";import{e as ce}from"../chunks/each.e59479a4.js";import{w as Je}from"../chunks/index.44131604.js";import{c as He}from"../chunks/logo.09e82b80.js";import{b as Ne,g as ze}from"../chunks/utility.f874d4e0.js";const Re=!0,at=Object.freeze(Object.defineProperty({__proto__:null,prerender:Re},Symbol.toStringTag,{value:"Module"}));function _e(r,t,l){const e=r.slice();e[8]=t[l];const a=ze(e[8]);return e[9]=a,e}function ge(r){let t,l=ce(r[1].penaltyConfig.effects),e=[];for(let a=0;a<l.length;a+=1)e[a]=ye(_e(r,l,a));return{c(){t=v("ul");for(let a=0;a<e.length;a+=1)e[a].c();this.h()},l(a){t=m(a,"UL",{class:!0});var i=g(t);for(let s=0;s<e.length;s+=1)e[s].l(i);i.forEach(d),this.h()},h(){f(t,"class","flex flex-col effect-list caption pl-[0.25em] mt-[0.125em]")},m(a,i){W(a,t,i);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(t,null)},p(a,i){if(i&2){l=ce(a[1].penaltyConfig.effects);let s;for(s=0;s<l.length;s+=1){const _=_e(a,l,s);e[s]?e[s].p(_,i):(e[s]=ye(_),e[s].c(),e[s].m(t,null))}for(;s<e.length;s+=1)e[s].d(1);e.length=l.length}},d(a){a&&d(t),Ee(e,a)}}}function ye(r){let t,l=r[9]+"",e;return{c(){t=v("li"),e=x(l)},l(a){t=m(a,"LI",{});var i=g(t);e=M(i,l),i.forEach(d)},m(a,i){W(a,t,i),n(t,e)},p(a,i){i&2&&l!==(l=a[9]+"")&&Y(e,l)},d(a){a&&d(t)}}}function Ue(r){let t,l,e,a,i=r[1].extensionData.display+"",s,_,o,u,D,y,I,S,O,q,J,z,j,E,H,B,R,C,k,h,le="Penalty effects:",p,b,c,N=r[1].penaltyData.current+"",U,X,A=r[1].penaltyConfig.required+"",F,fe,K=r[0].what+"",ae,$=r[1].penaltyConfig.required>0?"s":"",se,V=r[1].penaltyConfig.effects.length>0&&ge(r);return{c(){t=v("div"),l=v("div"),e=v("div"),a=v("h5"),s=x(i),_=L(),o=v("div"),u=x(r[5]),D=L(),y=v("div"),I=L(),S=v("a"),O=x("Open"),q=L(),J=v("div"),z=x(r[3]),j=L(),E=v("div"),H=v("div"),R=L(),C=v("div"),k=v("div"),h=v("div"),h.textContent=le,p=L(),V&&V.c(),b=L(),c=v("div"),U=x(N),X=x(" / "),F=x(A),fe=L(),ae=x(K),se=x($),this.h()},l(P){t=m(P,"DIV",{class:!0});var w=g(t);l=m(w,"DIV",{class:!0});var Z=g(l);e=m(Z,"DIV",{class:!0});var ne=g(e);a=m(ne,"H5",{class:!0});var ue=g(a);s=M(ue,i),ue.forEach(d),_=T(ne),o=m(ne,"DIV",{class:!0});var he=g(o);u=M(he,r[5]),he.forEach(d),ne.forEach(d),D=T(Z),y=m(Z,"DIV",{class:!0}),g(y).forEach(d),I=T(Z),S=m(Z,"A",{href:!0,target:!0,class:!0});var pe=g(S);O=M(pe,"Open"),pe.forEach(d),Z.forEach(d),q=T(w),J=m(w,"DIV",{});var ve=g(J);z=M(ve,r[3]),ve.forEach(d),j=T(w),E=m(w,"DIV",{class:!0});var me=g(E);H=m(me,"DIV",{role:!0,class:!0,style:!0}),g(H).forEach(d),me.forEach(d),R=T(w),C=m(w,"DIV",{class:!0});var ie=g(C);k=m(ie,"DIV",{class:!0});var re=g(k);h=m(re,"DIV",{"data-svelte-h":!0}),de(h)!=="svelte-bjs3vd"&&(h.textContent=le),p=T(re),V&&V.l(re),re.forEach(d),b=T(ie),c=m(ie,"DIV",{class:!0});var G=g(c);U=M(G,N),X=M(G," / "),F=M(G,A),fe=T(G),ae=M(G,K),se=M(G,$),G.forEach(d),ie.forEach(d),w.forEach(d),this.h()},h(){f(a,"class","mb-[0.25em]"),f(o,"class","caption"),f(e,"class","flex flex-col"),f(y,"class","grow"),f(S,"href",r[4]),f(S,"target","_blank"),f(S,"class","btn btn-outline-primary"),f(l,"class","flex flex-row space-x-[1em] items-center mb-[0.75em]"),f(H,"role","progressbar"),f(H,"class","progress-bar"),f(H,"style",B=`width: ${r[2]}%`),f(E,"class","progress"),f(k,"class","flex flex-col grow"),f(c,"class","shrink-0 caption"),f(C,"class","flex flex-row items-start text-sm whitespace-pre-wrap space-x-[1em]"),f(t,"class","card-content w-[32em] flex flex-col space-y-[0.5em]")},m(P,w){W(P,t,w),n(t,l),n(l,e),n(e,a),n(a,s),n(e,_),n(e,o),n(o,u),n(l,D),n(l,y),n(l,I),n(l,S),n(S,O),n(t,q),n(t,J),n(J,z),n(t,j),n(t,E),n(E,H),n(t,R),n(t,C),n(C,k),n(k,h),n(k,p),V&&V.m(k,null),n(C,b),n(C,c),n(c,U),n(c,X),n(c,F),n(c,fe),n(c,ae),n(c,se)},p(P,[w]){w&2&&i!==(i=P[1].extensionData.display+"")&&Y(s,i),w&8&&Y(z,P[3]),w&4&&B!==(B=`width: ${P[2]}%`)&&f(H,"style",B),P[1].penaltyConfig.effects.length>0?V?V.p(P,w):(V=ge(P),V.c(),V.m(k,null)):V&&(V.d(1),V=null),w&2&&N!==(N=P[1].penaltyData.current+"")&&Y(U,N),w&2&&A!==(A=P[1].penaltyConfig.required+"")&&Y(F,A),w&1&&K!==(K=P[0].what+"")&&Y(ae,K),w&2&&$!==($=P[1].penaltyConfig.required>0?"s":"")&&Y(se,$)},i:oe,o:oe,d(P){P&&d(t),V&&V.d()}}}function Ye(r,t,l){let{lockID:e}=t,{extensionLookup:a}=t,{individualPenaltyData:i}=t;const s=`/locks/${e}/extensions/${i.extensionData._id}`,_=a.key==="extended_wheel"?`Spin the wheel named '${i.penaltyConfig.display}'`:"";let o=i.penaltyData.current/i.penaltyConfig.required*100;o>100&&(o=100);let u="",D=setInterval(()=>{const y=new Date().getTime(),I=i.penaltyData.lastPenaltyMS+i.penaltyConfig.interval-y;l(3,u=I>0?Ne(Math.floor(I/1e3)):i.penaltyData.current>i.penaltyConfig.required?"Completed! Waiting for system...":"Too late! Waiting for system...")},200);return Pe(()=>{clearInterval(D)}),r.$$set=y=>{"lockID"in y&&l(6,e=y.lockID),"extensionLookup"in y&&l(0,a=y.extensionLookup),"individualPenaltyData"in y&&l(1,i=y.individualPenaltyData)},[a,i,o,u,s,_,e]}class Be extends Ie{constructor(t){super(),ke(this,t,Ye,Ue,we,{lockID:6,extensionLookup:0,individualPenaltyData:1})}}function be(r,t,l){const e=r.slice();e[11]=t[l];const a=e[6][e[11].extensionData.slug];return e[12]=a,e}function Ae(r){let t,l,e,a='<h4 class="mb-0">[üçì] Strawberria Penalties</h4> <span class="caption">Developer: <a href="https://chaster.app/user/strawberria" target="_blank">@strawberria</a></span>',i,s,_=`Extended penalty handling for all personally-developed extensions! <br/>
                    Now supporting extended lock effects and dynamic penalty interval with minute-level granularity!`,o,u,D,y,I,S,O,q,J,z,j,E,H,B,R,C,k=ce(r[5]),h=[];for(let p=0;p<k.length;p+=1)h[p]=De(be(r,k,p));const le=p=>te(h[p],1,1,()=>{h[p]=null});return{c(){t=v("div"),l=v("div"),e=v("div"),e.innerHTML=a,i=L(),s=v("div"),s.innerHTML=_,o=L(),u=v("div"),D=v("i"),y=L(),I=v("h3"),S=x(r[2]),O=x(" / "),q=x(r[3]),J=x(" completed"),z=L(),j=v("div"),E=v("div"),B=L(),R=v("div");for(let p=0;p<h.length;p+=1)h[p].c();this.h()},l(p){t=m(p,"DIV",{class:!0});var b=g(t);l=m(b,"DIV",{class:!0});var c=g(l);e=m(c,"DIV",{class:!0,"data-svelte-h":!0}),de(e)!=="svelte-1drm992"&&(e.innerHTML=a),i=T(c),s=m(c,"DIV",{class:!0,"data-svelte-h":!0}),de(s)!=="svelte-18bx7mj"&&(s.innerHTML=_),o=T(c),u=m(c,"DIV",{class:!0});var N=g(u);D=m(N,"I",{class:!0}),g(D).forEach(d),y=T(N),I=m(N,"H3",{});var U=g(I);S=M(U,r[2]),O=M(U," / "),q=M(U,r[3]),J=M(U," completed"),U.forEach(d),N.forEach(d),z=T(c),j=m(c,"DIV",{class:!0});var X=g(j);E=m(X,"DIV",{role:!0,class:!0,style:!0}),g(E).forEach(d),X.forEach(d),c.forEach(d),B=T(b),R=m(b,"DIV",{class:!0});var A=g(R);for(let F=0;F<h.length;F+=1)h[F].l(A);A.forEach(d),b.forEach(d),this.h()},h(){f(e,"class","flex items-end justify-between mb-2"),ee(e,"flex-row",r[8]),ee(e,"flex-col",!r[8]),ee(e,"space-x-1",r[8]),ee(e,"items-end",r[8]),f(s,"class","caption mb-3"),f(D,"class","fal fa-tasks fa-2x"),f(u,"class","flex flex-row space-x-[0.5em]"),f(E,"role","progressbar"),f(E,"class","progress-bar"),f(E,"style",H=`width: ${r[4]}%;`),f(j,"class","progress"),f(l,"class","card-content svelte-14jhaos"),ee(l,"card-wrapper-desktop",r[8]),f(R,"class","grid grid-cols-2 gap-[1.5em]"),f(t,"class","flex flex-col space-y-[1.5em] w-[65.5em]")},m(p,b){W(p,t,b),n(t,l),n(l,e),n(l,i),n(l,s),n(l,o),n(l,u),n(u,D),n(u,y),n(u,I),n(I,S),n(I,O),n(I,q),n(I,J),n(l,z),n(l,j),n(j,E),n(t,B),n(t,R);for(let c=0;c<h.length;c+=1)h[c]&&h[c].m(R,null);C=!0},p(p,b){if((!C||b&4)&&Y(S,p[2]),(!C||b&8)&&Y(q,p[3]),(!C||b&16&&H!==(H=`width: ${p[4]}%;`))&&f(E,"style",H),b&98){k=ce(p[5]);let c;for(c=0;c<k.length;c+=1){const N=be(p,k,c);h[c]?(h[c].p(N,b),Q(h[c],1)):(h[c]=De(N),h[c].c(),Q(h[c],1),h[c].m(R,null))}for(Ve(),c=k.length;c<h.length;c+=1)le(c);Ce()}},i(p){if(!C){for(let b=0;b<k.length;b+=1)Q(h[b]);C=!0}},o(p){h=h.filter(Boolean);for(let b=0;b<h.length;b+=1)te(h[b]);C=!1},d(p){p&&d(t),Ee(h,p)}}}function Fe(r){let t,l,e,a,i,s;return{c(){t=v("div"),l=v("img"),a=L(),i=v("div"),s=x(r[0]),this.h()},l(_){t=m(_,"DIV",{class:!0});var o=g(t);l=m(o,"IMG",{src:!0,alt:!0}),a=T(o),i=m(o,"DIV",{class:!0});var u=g(i);s=M(u,r[0]),u.forEach(d),o.forEach(d),this.h()},h(){Me(l.src,e=He)||f(l,"src",e),f(l,"alt","Chaster logo"),f(i,"class","mt-4 caption text-lg"),f(t,"class","w-full h-screen flex flex-col items-center justify-center")},m(_,o){W(_,t,o),n(t,l),n(t,a),n(t,i),n(i,s)},p(_,o){o&1&&Y(s,_[0])},i:oe,o:oe,d(_){_&&d(t)}}}function De(r){let t,l;return t=new Be({props:{lockID:r[1],extensionLookup:r[12],individualPenaltyData:r[11]}}),{c(){Te(t.$$.fragment)},l(e){je(t.$$.fragment,e)},m(e,a){Oe(t,e,a),l=!0},p(e,a){const i={};a&2&&(i.lockID=e[1]),a&32&&(i.extensionLookup=e[12]),a&32&&(i.individualPenaltyData=e[11]),t.$set(i)},i(e){l||(Q(t.$$.fragment,e),l=!0)},o(e){te(t.$$.fragment,e),l=!1},d(e){qe(t,e)}}}function Ge(r){let t,l,e,a;const i=[Fe,Ae],s=[];function _(o,u){return o[0]!==""?0:1}return l=_(r),e=s[l]=i[l](r),{c(){t=v("div"),e.c(),this.h()},l(o){t=m(o,"DIV",{class:!0});var u=g(t);e.l(u),u.forEach(d),this.h()},h(){f(t,"class","container-bg min-w-0 min-h-0 p-4 space-y-2 grow svelte-14jhaos")},m(o,u){W(o,t,u),s[l].m(t,null),a=!0},p(o,[u]){let D=l;l=_(o),l===D?s[l].p(o,u):(Ve(),te(s[D],1,1,()=>{s[D]=null}),Ce(),e=s[l],e?e.p(o,u):(e=s[l]=i[l](o),e.c()),Q(e,1),e.m(t,null))},i(o){a||(Q(e),a=!0)},o(o){te(e),a=!1},d(o){o&&d(t),s[l].d()}}}const Xe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwbmpsYmpwY2ZlYnFwYXFrcGh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODg1NDM0NTgsImV4cCI6MjAwNDExOTQ1OH0.CsGySz2c8bIWphE6--T51CsmSeBQajfwvBYfTkjviM4",Ze="https://bpnjlbjpcfebqpaqkphy.supabase.co/functions/v1/chaster_utilities";function Qe(r,t,l){let e;const a={"extended-wheel-of-fortune":{key:"extended_wheel",what:"spin"}};let i="Loading extension data...",s="",_=Je([]);Se(r,_,O=>l(5,e=O));let o="",u="";xe(async()=>{u=window.location.hash.substring(1).split("?")[0];const O=window.location.search,q=new URLSearchParams(O);if(u!=="")s=JSON.parse(decodeURIComponent(u)).mainToken;else{const j=q.get("state");j!==null&&(s=JSON.parse(decodeURIComponent(j)).mainToken)}const J=await fetch(Ze,{method:"POST",headers:{Authorization:`Bearer ${Xe}`},body:JSON.stringify({action:"strawberria_penalties-page",mainToken:s})});if(J.status!==200)throw console.error(`Error retrieving session data: ${await J.text()}`),new Error("error retrieving session data");const z=await J.json();Le(_,e=z.data,e),l(1,o=z.lockID),l(0,i="")});let D=0,y=1,I=0;_.subscribe(O=>{l(2,D=0),l(3,y=0);for(const q of O)l(2,D+=q.penaltyData.current>=q.penaltyConfig.required?1:0),l(3,y++,y);l(4,I=y===0?0:D/y*100)});let S=!/Mobi/i.test(window.navigator.userAgent);return[i,o,D,y,I,e,a,_,S]}class st extends Ie{constructor(t){super(),ke(this,t,Qe,Ge,we,{})}}export{st as component,at as universal};
