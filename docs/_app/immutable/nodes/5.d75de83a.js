import{s as ke,f as v,l as L,a as M,g as _,h as y,m as T,d as u,c as x,M as ue,j as f,U as he,i as K,x as i,n as Y,y as ce,V as Le,D as Ee,z as Me,o as Te,K as xe,N as X,F as Oe}from"../chunks/scheduler.e90efb79.js";import{S as Ce,i as Ve,t as te,c as Pe,a as W,g as Se,b as je,d as qe,m as ze,e as He}from"../chunks/index.acf5b682.js";import{e as fe}from"../chunks/each.e59479a4.js";import{w as Je}from"../chunks/index.3c4c46b7.js";import{c as Ne}from"../chunks/logo.09e82b80.js";import{b as Ue,g as Re}from"../chunks/utility.88e4a2e0.js";const Ye=!0,nt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ye},Symbol.toStringTag,{value:"Module"}));function ye(n,t,l){const e=n.slice();e[9]=t[l];const s=Re(e[9]);return e[10]=s,e}function De(n){let t,l=fe(n[2].penaltyConfig.effects),e=[];for(let s=0;s<l.length;s+=1)e[s]=we(ye(n,l,s));return{c(){t=v("ul");for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l(s){t=_(s,"UL",{class:!0});var o=y(t);for(let a=0;a<e.length;a+=1)e[a].l(o);o.forEach(u),this.h()},h(){f(t,"class","flex flex-col list effect-list caption pl-[0.25em] mt-[0.125em] svelte-1fe1t23")},m(s,o){K(s,t,o);for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(t,null)},p(s,o){if(o&4){l=fe(s[2].penaltyConfig.effects);let a;for(a=0;a<l.length;a+=1){const m=ye(s,l,a);e[a]?e[a].p(m,o):(e[a]=we(m),e[a].c(),e[a].m(t,null))}for(;a<e.length;a+=1)e[a].d(1);e.length=l.length}},d(s){s&&u(t),Ee(e,s)}}}function we(n){let t,l=n[10]+"",e;return{c(){t=v("li"),e=L(l)},l(s){t=_(s,"LI",{});var o=y(t);e=T(o,l),o.forEach(u)},m(s,o){K(s,t,o),i(t,e)},p(s,o){o&4&&l!==(l=s[10]+"")&&Y(e,l)},d(s){s&&u(t)}}}function Be(n){let t,l,e,s,o=n[2].extensionData.display+"",a,m,c,d,w,I,g,k,j,q,z,U,O,V,H,B,J,P,E,h,le="Penalty effects:",p,D,r,N=n[2].penaltyData.current+"",R,Z,F=n[2].penaltyConfig.required+"",A,de,$=n[1].what+"",ae,ee=n[2].penaltyConfig.required>0?"s":"",se,ne,S=n[2].penaltyConfig.effects.length>0&&De(n);return{c(){t=v("div"),l=v("div"),e=v("div"),s=v("h5"),a=L(o),m=M(),c=v("div"),d=L(n[6]),w=M(),I=v("div"),g=M(),k=v("a"),j=L("Open"),q=M(),z=v("div"),U=L(n[4]),O=M(),V=v("div"),H=v("div"),J=M(),P=v("div"),E=v("div"),h=v("div"),h.textContent=le,p=M(),S&&S.c(),D=M(),r=v("div"),R=L(N),Z=L(" / "),A=L(F),de=M(),ae=L($),se=L(ee),this.h()},l(C){t=_(C,"DIV",{class:!0});var b=y(t);l=_(b,"DIV",{class:!0});var Q=y(l);e=_(Q,"DIV",{class:!0});var ie=y(e);s=_(ie,"H5",{class:!0});var pe=y(s);a=T(pe,o),pe.forEach(u),m=x(ie),c=_(ie,"DIV",{class:!0});var ve=y(c);d=T(ve,n[6]),ve.forEach(u),ie.forEach(u),w=x(Q),I=_(Q,"DIV",{class:!0}),y(I).forEach(u),g=x(Q),k=_(Q,"A",{href:!0,target:!0,class:!0});var _e=y(k);j=T(_e,"Open"),_e.forEach(u),Q.forEach(u),q=x(b),z=_(b,"DIV",{});var me=y(z);U=T(me,n[4]),me.forEach(u),O=x(b),V=_(b,"DIV",{class:!0});var ge=y(V);H=_(ge,"DIV",{role:!0,class:!0,style:!0}),y(H).forEach(u),ge.forEach(u),J=x(b),P=_(b,"DIV",{class:!0});var oe=y(P);E=_(oe,"DIV",{class:!0});var re=y(E);h=_(re,"DIV",{"data-svelte-h":!0}),ue(h)!=="svelte-bjs3vd"&&(h.textContent=le),p=x(re),S&&S.l(re),re.forEach(u),D=x(oe),r=_(oe,"DIV",{class:!0});var G=y(r);R=T(G,N),Z=T(G," / "),A=T(G,F),de=x(G),ae=T(G,$),se=T(G,ee),G.forEach(u),oe.forEach(u),b.forEach(u),this.h()},h(){f(s,"class","mb-[0.25em]"),f(c,"class","caption"),f(e,"class","flex flex-col"),f(I,"class","grow"),f(k,"href",n[5]),f(k,"target","_blank"),f(k,"class","btn btn-outline-primary"),f(l,"class","flex flex-row space-x-[1em] items-center mb-[0.75em]"),f(H,"role","progressbar"),f(H,"class","progress-bar"),f(H,"style",B=`width: ${n[3]}%`),f(V,"class","progress"),f(E,"class","flex flex-col grow"),f(r,"class","shrink-0 caption"),f(P,"class","flex flex-row items-start text-sm whitespace-pre-wrap space-x-[1em]"),f(t,"class",ne=he(`card-content flex flex-col space-y-[0.5em] ${n[0]?"w-[32em]":"w-full"}`)+" svelte-1fe1t23")},m(C,b){K(C,t,b),i(t,l),i(l,e),i(e,s),i(s,a),i(e,m),i(e,c),i(c,d),i(l,w),i(l,I),i(l,g),i(l,k),i(k,j),i(t,q),i(t,z),i(z,U),i(t,O),i(t,V),i(V,H),i(t,J),i(t,P),i(P,E),i(E,h),i(E,p),S&&S.m(E,null),i(P,D),i(P,r),i(r,R),i(r,Z),i(r,A),i(r,de),i(r,ae),i(r,se)},p(C,[b]){b&4&&o!==(o=C[2].extensionData.display+"")&&Y(a,o),b&16&&Y(U,C[4]),b&8&&B!==(B=`width: ${C[3]}%`)&&f(H,"style",B),C[2].penaltyConfig.effects.length>0?S?S.p(C,b):(S=De(C),S.c(),S.m(E,null)):S&&(S.d(1),S=null),b&4&&N!==(N=C[2].penaltyData.current+"")&&Y(R,N),b&4&&F!==(F=C[2].penaltyConfig.required+"")&&Y(A,F),b&2&&$!==($=C[1].what+"")&&Y(ae,$),b&4&&ee!==(ee=C[2].penaltyConfig.required>0?"s":"")&&Y(se,ee),b&1&&ne!==(ne=he(`card-content flex flex-col space-y-[0.5em] ${C[0]?"w-[32em]":"w-full"}`)+" svelte-1fe1t23")&&f(t,"class",ne)},i:ce,o:ce,d(C){C&&u(t),S&&S.d()}}}function Fe(n,t,l){let{shouldHorizontal:e}=t,{lockID:s}=t,{extensionLookup:o}=t,{individualPenaltyData:a}=t;const m=`https://chaster.app/locks/${s}/extensions/${a.extensionData._id}`,c=o.key==="extended_wheel"?`Spin the wheel named '${a.penaltyConfig.display}'`:"";let d=a.penaltyData.current/a.penaltyConfig.required*100;d>100&&(d=100);let w="",I=setInterval(()=>{const g=new Date().getTime(),k=a.penaltyData.lastPenaltyMS+a.penaltyConfig.interval-g;l(4,w=k>0?Ue(Math.floor(k/1e3)):a.penaltyData.current>a.penaltyConfig.required?"Completed! Waiting for system...":"Too late! Waiting for system...")},200);return Le(()=>{clearInterval(I)}),n.$$set=g=>{"shouldHorizontal"in g&&l(0,e=g.shouldHorizontal),"lockID"in g&&l(7,s=g.lockID),"extensionLookup"in g&&l(1,o=g.extensionLookup),"individualPenaltyData"in g&&l(2,a=g.individualPenaltyData)},[e,o,a,d,w,m,c,s]}class Ae extends Ce{constructor(t){super(),Ve(this,t,Fe,Be,ke,{shouldHorizontal:0,lockID:7,extensionLookup:1,individualPenaltyData:2})}}function be(n,t,l){const e=n.slice();e[11]=t[l];const s=e[6][e[11].extensionData.slug];return e[12]=s,e}function Ge(n){let t,l,e,s='<h4 class="mb-0">[üçì] Strawberria Penalties</h4> <span class="caption">Developer: <a href="https://chaster.app/user/strawberria" target="_blank">@strawberria</a></span>',o,a,m=`Extended penalty handling for all personally-developed extensions! <br/>
                    Now supporting extended lock effects and dynamic penalty interval with minute-level granularity!`,c,d,w,I,g,k,j,q,z,U,O,V,H,B,J,P,E=fe(n[5]),h=[];for(let p=0;p<E.length;p+=1)h[p]=Ie(be(n,E,p));const le=p=>te(h[p],1,1,()=>{h[p]=null});return{c(){t=v("div"),l=v("div"),e=v("div"),e.innerHTML=s,o=M(),a=v("div"),a.innerHTML=m,c=M(),d=v("div"),w=v("i"),I=M(),g=v("h3"),k=L(n[2]),j=L(" / "),q=L(n[3]),z=L(" completed"),U=M(),O=v("div"),V=v("div"),B=M(),J=v("div");for(let p=0;p<h.length;p+=1)h[p].c();this.h()},l(p){t=_(p,"DIV",{class:!0});var D=y(t);l=_(D,"DIV",{class:!0});var r=y(l);e=_(r,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1drm992"&&(e.innerHTML=s),o=x(r),a=_(r,"DIV",{class:!0,"data-svelte-h":!0}),ue(a)!=="svelte-18bx7mj"&&(a.innerHTML=m),c=x(r),d=_(r,"DIV",{class:!0});var N=y(d);w=_(N,"I",{class:!0}),y(w).forEach(u),I=x(N),g=_(N,"H3",{});var R=y(g);k=T(R,n[2]),j=T(R," / "),q=T(R,n[3]),z=T(R," completed"),R.forEach(u),N.forEach(u),U=x(r),O=_(r,"DIV",{class:!0});var Z=y(O);V=_(Z,"DIV",{role:!0,class:!0,style:!0}),y(V).forEach(u),Z.forEach(u),r.forEach(u),B=x(D),J=_(D,"DIV",{class:!0});var F=y(J);for(let A=0;A<h.length;A+=1)h[A].l(F);F.forEach(u),D.forEach(u),this.h()},h(){f(e,"class","flex items-end justify-between mb-2"),X(e,"flex-row",n[8]),X(e,"flex-col",!n[8]),X(e,"space-x-1",n[8]),X(e,"items-end",n[8]),f(a,"class","caption mb-3"),f(w,"class","fal fa-tasks fa-2x"),f(d,"class","flex flex-row space-x-[0.5em]"),f(V,"role","progressbar"),f(V,"class","progress-bar"),f(V,"style",H=`width: ${n[4]}%;`),f(O,"class","progress"),f(l,"class","card-content svelte-17a10ne"),X(l,"card-wrapper-desktop",n[8]),f(J,"class","grid gap-[1.5em]"),X(J,"grid-cols-2",n[8]),X(J,"grid-cols-1",!n[8]),f(t,"class",he(`flex flex-col space-y-[1.5em] ${n[8]?"w-[65.5em]":"w-full"}`)+" svelte-17a10ne")},m(p,D){K(p,t,D),i(t,l),i(l,e),i(l,o),i(l,a),i(l,c),i(l,d),i(d,w),i(d,I),i(d,g),i(g,k),i(g,j),i(g,q),i(g,z),i(l,U),i(l,O),i(O,V),i(t,B),i(t,J);for(let r=0;r<h.length;r+=1)h[r]&&h[r].m(J,null);P=!0},p(p,D){if((!P||D&4)&&Y(k,p[2]),(!P||D&8)&&Y(q,p[3]),(!P||D&16&&H!==(H=`width: ${p[4]}%;`))&&f(V,"style",H),D&354){E=fe(p[5]);let r;for(r=0;r<E.length;r+=1){const N=be(p,E,r);h[r]?(h[r].p(N,D),W(h[r],1)):(h[r]=Ie(N),h[r].c(),W(h[r],1),h[r].m(J,null))}for(Se(),r=E.length;r<h.length;r+=1)le(r);Pe()}},i(p){if(!P){for(let D=0;D<E.length;D+=1)W(h[D]);P=!0}},o(p){h=h.filter(Boolean);for(let D=0;D<h.length;D+=1)te(h[D]);P=!1},d(p){p&&u(t),Ee(h,p)}}}function Xe(n){let t,l,e,s,o,a;return{c(){t=v("div"),l=v("img"),s=M(),o=v("div"),a=L(n[0]),this.h()},l(m){t=_(m,"DIV",{class:!0});var c=y(t);l=_(c,"IMG",{src:!0,alt:!0}),s=x(c),o=_(c,"DIV",{class:!0});var d=y(o);a=T(d,n[0]),d.forEach(u),c.forEach(u),this.h()},h(){Oe(l.src,e=Ne)||f(l,"src",e),f(l,"alt","Chaster logo"),f(o,"class","mt-4 caption text-lg"),f(t,"class","w-full h-screen flex flex-col items-center justify-center")},m(m,c){K(m,t,c),i(t,l),i(t,s),i(t,o),i(o,a)},p(m,c){c&1&&Y(a,m[0])},i:ce,o:ce,d(m){m&&u(t)}}}function Ie(n){let t,l;return t=new Ae({props:{shouldHorizontal:n[8],lockID:n[1],extensionLookup:n[12],individualPenaltyData:n[11]}}),{c(){je(t.$$.fragment)},l(e){qe(t.$$.fragment,e)},m(e,s){ze(t,e,s),l=!0},p(e,s){const o={};s&2&&(o.lockID=e[1]),s&32&&(o.extensionLookup=e[12]),s&32&&(o.individualPenaltyData=e[11]),t.$set(o)},i(e){l||(W(t.$$.fragment,e),l=!0)},o(e){te(t.$$.fragment,e),l=!1},d(e){He(t,e)}}}function Ze(n){let t,l,e,s;const o=[Xe,Ge],a=[];function m(c,d){return c[0]!==""?0:1}return l=m(n),e=a[l]=o[l](n),{c(){t=v("div"),e.c(),this.h()},l(c){t=_(c,"DIV",{class:!0});var d=y(t);e.l(d),d.forEach(u),this.h()},h(){f(t,"class","container-bg min-w-0 min-h-0 p-4 space-y-2 grow svelte-17a10ne")},m(c,d){K(c,t,d),a[l].m(t,null),s=!0},p(c,[d]){let w=l;l=m(c),l===w?a[l].p(c,d):(Se(),te(a[w],1,1,()=>{a[w]=null}),Pe(),e=a[l],e?e.p(c,d):(e=a[l]=o[l](c),e.c()),W(e,1),e.m(t,null))},i(c){s||(W(e),s=!0)},o(c){te(e),s=!1},d(c){c&&u(t),a[l].d()}}}const Qe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwbmpsYmpwY2ZlYnFwYXFrcGh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODg1NDM0NTgsImV4cCI6MjAwNDExOTQ1OH0.CsGySz2c8bIWphE6--T51CsmSeBQajfwvBYfTkjviM4",We="https://bpnjlbjpcfebqpaqkphy.supabase.co/functions/v1/chaster_utilities";function Ke(n,t,l){let e;const s={"extended-wheel-of-fortune":{key:"extended_wheel",what:"spin"}};let o="Loading extension data...",a="",m=Je([]);Me(n,m,j=>l(5,e=j));let c="",d="";Te(async()=>{d=window.location.hash.substring(1).split("?")[0];const j=window.location.search,q=new URLSearchParams(j);if(d!=="")a=JSON.parse(decodeURIComponent(d)).mainToken;else{const O=q.get("state");O!==null&&(a=JSON.parse(decodeURIComponent(O)).mainToken)}const z=await fetch(We,{method:"POST",headers:{Authorization:`Bearer ${Qe}`},body:JSON.stringify({action:"strawberria_penalties-page",mainToken:a})});if(z.status!==200)throw console.error(`Error retrieving session data: ${await z.text()}`),new Error("error retrieving session data");const U=await z.json();xe(m,e=U.data,e),l(1,c=U.lockID),l(0,o="")});let w=0,I=1,g=0;m.subscribe(j=>{l(2,w=0),l(3,I=0);for(const q of j)l(2,w+=q.penaltyData.current>=q.penaltyConfig.required?1:0),l(3,I++,I);l(4,g=I===0?0:w/I*100)});let k=!/Mobi/i.test(window.navigator.userAgent);return[o,c,w,I,g,e,s,m,k]}class it extends Ce{constructor(t){super(),Ve(this,t,Ke,Ze,ke,{})}}export{it as component,nt as universal};
